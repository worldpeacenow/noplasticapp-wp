(window.webpackETJsonp=window.webpackETJsonp||[]).push([[0],{1218:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(12),r=n.n(i),s=n(2),l=n.n(s),u=n(36),d=n.n(u),c=n(89),p=n.n(c),f=n(37),h=n.n(f),m=n(11),_=n(3),b=n(0),g=n(1219),v=(n(1233),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=ETBuilderBackend.i18n.tooltips;var S=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"upload";return n=t=function(t){function n(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=i=k(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),i.state={exportFileName:"Divi Builder Layout",importOptions:{replaceLayout:"on",importBackUp:"off",addToLibrary:"off"},importFile:"",importLayoutName:"",importError:"",importProgress:0,importEstimation:1,importCategories:"",importNewCategory:""},i._onChange=function(e,t){var n=Object(b.intentionallyCloneDeep)(i.state);h()(e)?n=p()(n,e):n[e]=t,i.setState(n)},i.exportLayout=function(){i._onChange("exportError",""),m.b.exportLayout(i.state.exportFileName)},i.importFileName=function(){return l()(i.state,"importFile.name",E.noFile)},i.importLayout=function(){i._onChange("importError",""),m.b.importLayout(i.state)},i.onExportError=function(e){return i._onChange({exportError:e})},i.onImportError=function(e){return i._onChange({importError:e})},i.onImportProgress=function(e,t){"download"===o&&(e=e/2+50),i._onChange({importProgress:e,importEstimation:t})},i._renderProgressBar=function(){return a.a.createElement(g.a,{progress:i.state.importProgress,time_remaining:i.state.importEstimation})},k(i,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),y(n,[{key:"componentDidMount",value:function(){_.a.addImportProgressListener(this.onImportProgress),_.a.addImportErrorListener(this.onImportError),_.a.addExportErrorListener(this.onExportError);var e=_.a.getDroploaderPayloadPortability();e&&this.setState({active_tab:"modules_library",importOptions:r()(this.state.importOptions,e.details.importOptions),importFile:e.details.importFile})}},{key:"componentWillUnmount",value:function(){_.a.removeImportProgressListener(this.onImportProgress),_.a.removeImportErrorListener(this.onImportError),_.a.removeExportErrorListener(this.onExportError)}},{key:"shouldComponentUpdate",value:function(e,t){return!d()(this.props,e)||!d()(this.state,t)}},{key:"render",value:function(){var t=this.state.importProgress>0;return a.a.createElement("div",{className:"et-fb-with-portability"},a.a.createElement(e,v({isLoadingLayout:t,_renderProgressBar:this._renderProgressBar,_onChange:this._onChange,exportLayout:this.exportLayout,importFileName:this.importFileName,importLayout:this.importLayout},this.state,this.props)))}}]),n}(),t.displayName="withPortability("+e.displayName+")",n},w=n(48),C=n.n(w),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var O=function(e){var t,n,o=C()(e)?e:e.displayName;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),M(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t=this.props,n=t._ref,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["_ref"]);return a.a.createElement(e,T({ref:n},o))}}]),n}(),t.displayName="withOneRender("+o+")",n};n.d(t,"a",function(){return O}),n.d(t,"b",function(){return S})},1219:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(13);t.a=function(t){var n=t.progress,o=t.time_remaining;if(0===n)return!1;var r={width:Object(i.spring)(n,{stiffness:300,damping:30})};return n<100?a.a.createElement("div",{className:"et-fb-tooltip-modal--progress"},a.a.createElement("div",{className:"et-fb-tooltip-modal--progress-bar"},a.a.createElement(i.Motion,{defaultStyle:{width:0,opacity:100},style:r},function(e){return a.a.createElement("div",{className:"et-fb-tooltip-modal--progress-chart",style:{width:e.width+"%"}},a.a.createElement("div",{className:"et-fb-tooltip-modal--progress-label"},parseInt(e.width),"%"))})),a.a.createElement("div",{className:"et-fb-tooltip-modal--time-estimation"},o>0&&e.appWindow().etCore.portability.text.importing.replace("<span>1</span>",o))):a.a.createElement("span",{className:"et-fb-tooltip-modal--loader et-core-loader et-core-loader-success"})}}).call(this,n(0))},1220:function(e,t,n){"use strict";var o=n(4),a=n.n(o),i=n(1),r=n.n(i),s=n(223),l=n(8),u={MODULE:"module",MODULE_ITEM:"module_item"},d=n(31),c=n(21),p=n(11),f=n(2),h=n.n(f),m=(n(33),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=!1,g={beginDrag:function(e){return{id:e.id}},endDrag:function(e){p.b.moduleItemDragEnd(e,b),b=!1}},v={hover:function(e,t){var n=t.getItem().id;n!==e.id&&(b=!0,e.moveItem(n,e.id))}},y={connectDragSource:a.a.func.isRequired,connectDropTarget:a.a.func.isRequired,isDragging:a.a.bool.isRequired,id:a.a.any.isRequired,title:a.a.element.isRequired,moveItem:a.a.func.isRequired,_onMouseEnterItem:a.a.oneOfType([a.a.func,a.a.bool]),_onMouseLeaveItem:a.a.oneOfType([a.a.func,a.a.bool])},k=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._handleMouseEnter=function(){var e=o.props._onMouseEnterItem;e&&e(o)},o._handleMouseLeave=function(){var e=o.props._onMouseLeaveItem;e&&e(o)},_(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"componentWillMount",value:function(){h()(this,"props.just_created")&&p.b.openModuleSettings(this)}},{key:"render",value:function(){var e={cursor:"move",opacity:this.props.isDragging?0:1};return this.props.connectDragSource(this.props.connectDropTarget(r.a.createElement("li",{className:"et-fb-settings-module-item",style:e,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},r.a.createElement(d.a,{buttonName:l.a.MODULE_ITEM_EDIT,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--edit",small:!0,ink:!1},r.a.createElement(c.a,{icon:"setting",color:"rgb(115, 126, 137)"})),r.a.createElement(d.a,{buttonName:l.a.MODULE_ITEM_COPY,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--copy",small:!0,ink:!1},r.a.createElement(c.a,{icon:"copy",color:"rgb(115, 126, 137)"})),r.a.createElement(d.a,{buttonName:l.a.MODULE_ITEM_DELETE,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--delete",small:!0,ink:!1},r.a.createElement(c.a,{icon:"delete",color:"rgb(115, 126, 137)"})),r.a.createElement("span",{className:"et-fb-settings-module-item-title"},this.props.title))))}}]),t}();k.propTypes=y,k.defaultProps={_onMouseEnterItem:!1,_onMouseLeaveItem:!1};var E=Object(s.DragSource)(u.MODULE_ITEM,g,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}),S=Object(s.DropTarget)(u.MODULE_ITEM,v,function(e){return{connectDropTarget:e.dropTarget()}});t.a=S(E(k))},1221:function(e,t,n){},1222:function(e,t,n){},1223:function(e,t,n){},1224:function(e,t,n){},1225:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(58),r=n.n(i),s=(n(16),n(14)),l=n.n(s),u=n(23),d=n.n(u),c=(n(1224),n(11)),p=(n(43),n(5)),f=n.n(p),h=n(27),m=n.n(h),_=n(10),b=n.n(_),g=n(142),v=n.n(g),y=r()({displayName:"ETBuilderSettingsColumn",mixin:[d.a],render:function(){var e=this,t=this.props.row,n=t.props.section_parent,o=ETBuilderBackend.columnLayouts,i=f()(o[n])?[]:o[n],r="specialty"===n?"":m()(t.props.children,function(e){return e.attrs.type}).join(",");if("specialty"===n){var s=[],u=i[t.props.specialty_layout].columns;b()(v()(u),function(e){var t=[];e+=1;b()(v()(e),function(n){var o=1===e?"4_4":"1_"+e;t.push(o)}),s.push(t.join(","))}),"1_3,2_3"!==t.props.specialty_layout&&"2_3,1_3"!==t.props.specialty_layout||s.splice(2,1),i=s}this.props.setMaxItemIndex(i.length,"modules_all");var d=i.map(function(t,o){var i=t,s=m()(i.split(","),function(e){return e.split("_")}),u={};i===r&&(u["et-fb-column-layout--selected"]=!0),e.props.selectedItemIndex===o+1&&(u["et-fb-selected-item"]=!0),u["et-fb-product-tour-element"]="selectRow"===e.props.currentTourElement&&"1_3,1_3,1_3"===i;var d=s.map(function(e,t){var r={width:parseInt(e[0])/parseInt(e[1])*100+"%"};return a.a.createElement("span",{key:"blocks-"+o+"-"+t,"data-layout":i,className:"column-block-wrap",style:r},a.a.createElement("span",{className:"column-block","data-layout":i,"data-section":n},e[0],"/",e[1]))});return a.a.createElement("li",{className:l()(u),"data-layout":i,onClick:e._onClickAction,onMouseUp:e._onMouseUp,key:"column-"+o},d)});return a.a.createElement("ul",{className:"et-fb-columns-layout"},d)},_onMouseUp:function(e){this._onClickAction(e),c.b.cancelTooltip()},_onClickAction:function(e){var t=e.target.getAttribute("data-layout"),n="specialty"===this.props.row.props.section_parent?"et_pb_row_inner":"et_pb_row";f()(this.props._onClick)?this._changeStructure(e,t):this.props._onClick(t,n)},_changeStructure:function(e,t){e.target.getAttribute("data-layout");c.b.rowColumnChange(this.props.row,t)}});t.a=y},1226:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(16),r=n.n(i),s=n(14),l=n.n(s),u=n(11),d=n(3),c=n(102),p=n(732),f=n(731),h=n(10),m=n.n(h),_=n(7),b=n.n(_),g=n(2),v=n.n(g),y=n(5),k=n.n(y),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=ETBuilderBackend.saveModuleLibraryCategories,C=ETBuilderBackend.i18n.saveModuleLibraryAttrs,T=function(t){function n(){var t,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return o=a=S(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),a.state={template_name:"",selected_cats:"",make_global:"off",new_category_name:"",name_error:"",sync_error:""},a.setFieldClass=function(){var e={},t=""!==a.state.name_error;return e["et-fb-settings-option-container"]=!0,!0===t&&(e["et-fb-settings-option-container-input-error"]=!0),l()(e)},a.isGlobalOptionSupported=function(){var e=d.a.getModuleLibrarySave();if("root"===e||d.a.isGlobalLibraryPage())return!1;var t=v()(e,"props.attrs");return!!t&&(!t.global_module&&!t.global_parent)},a.getCategoriesNamesArray=function(){var e=w,t=[];return b()(e)||m()(e,function(e){t.push(e.name)}),t},a._onInput=function(e,t){var n=t;switch(e){case"template_name":a.setState({name_error:""===t?"on":""})}a.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n))},a._onSave=function(t){var n=a.state;t.preventDefault(),""===n.template_name?(a.setState({name_error:"on"}),e(r.a.findDOMNode(a)).animate({scrollTop:0},1e3,"swing"),e(r.a.findDOMNode(a)).find("#et-fb-template_name").focus()):(u.b.performLibraryModuleSaving(n),u.b.cancelTooltip())},S(a,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),E(n,[{key:"_renderCategories",value:function(){return 0!==this.getCategoriesNamesArray().length&&a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("label",null,C.addToCatText,":"),a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(p.a,{value:this.state.selected_cats,name:"selected_cats",options:this.getCategoriesNamesArray(),shortcut_index:"library-categories",_onChange:this._onInput})))}},{key:"render",value:function(){var e=d.a.getModuleLibrarySave(),t="root"!==e?e.props:e,n=!k()(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"",o="",i=void 0;return i="root"===t?C.descriptionTextLayout:C.descriptionText,this.isGlobalOptionSupported()&&(o=a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("label",null,C.globalTitle,":"),a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(p.a,{value:this.state.make_global,name:"make_global",options:[C.globalText],shortcut_index:"make-global",_onChange:this._onInput})))),a.a.createElement("div",{className:"et-fb-settings-options-wrap",style:n},a.a.createElement("div",{className:"et-fb-settings-options"},a.a.createElement("p",{className:"et-fb-description-text"},i),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("label",null,C.templateName,":"),a.a.createElement("div",{className:this.setFieldClass()},a.a.createElement(c.a,{type:"text",value:this.state.template_name,name:"template_name",_onChange:this._onInput}))),o,this._renderCategories(),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("label",null,C.createCatText,":"),a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(c.a,{type:"text",value:this.state.new_category_name,name:"new_category_name",_onChange:this._onInput})),a.a.createElement(f.a,{videoListId:"et_pb_save_to_library",trigger:"tooltip"})),a.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:this._onSave},C.saveText)))}}]),n}();t.a=T}).call(this,n(30))},1227:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(58),r=n.n(i),s=(n(8),n(11)),l=n(3),u=n(21),d=n(0),c=n(14),p=n.n(c),f=n(7),h=n.n(f),m=n(5),_=n.n(m),b=n(12),g=n.n(b),v=n(10),y=n.n(v),k=n(2),E=n.n(k),S=n(74);var w=new S.AllHtmlEntities,C=r()({displayName:"ETBuilderModuleItem",render:function(){if(!l.a.isAllowedAction(this.props.label))return!1;var e,t,n,o=(e={},t=""+this.props.label.replace("et_pb_","et_fb_"),n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),i=this.props.specialtyLayout,r="",s="",c="",f="",m="";h()(i)||(r=i.layoutFormat,s=i.layoutType.split(","),c=i.specialtyColumns,m=this.props.label,o.et_fb_specialty_layout_item=!0,f=i.columns.map(function(e,t){var n="et_pb_layout_column",o=t+e;n+=" et_pb_column_layout_"+e;var i="",r="",l="";return"1"===s[t]?(n+=" et_pb_variations et_pb_"+c+"_variations",i=a.a.createElement("div",{className:"et_pb_variation et_pb_variation_full"}),r=a.a.createElement("div",{className:"et_pb_variation_row"},a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"})),3===c&&(l="2_3,1_3"===m||"1_3,2_3"===m?a.a.createElement("div",{className:"et_pb_variation_row"},a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"})):a.a.createElement("div",{className:"et_pb_variation_row"},a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),a.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"})))):n+=" et_pb_specialty_column",a.a.createElement("div",{className:n,key:o},i,r,l)}));var _=d.default.hasValue(this.props.iconSvg)?a.a.createElement(u.a,{iconSvg:this.props.iconSvg}):"",b=a.a.createElement("span",{className:"et_module_title"}," ",w.decode(E()(this,"props.title",""))," ");return""!==f&&(b=f),this.props.itemIndex===this.props.selectedItemIndex&&(o["et-fb-selected-item"]=!0),d.default.hasValue(this.props.icon)&&(o["et-fb-has-icon"]=!0),d.default.hasValue(this.props.iconSvg)&&(o["et-fb-has-svg-icon"]=!0),o=g()(o,this.props.classnames),a.a.createElement("li",{className:p()(o),onClick:this._onClick,"data-layout":r,"data-specialty":s,"data-specialty_columns":c,onMouseEnter:this._onMouseEnter,"data-icon":this.props.icon},_,b)},_onClick:function(){(l.a.abIsMode("off")||"layout"!==E()(this,"props.label"))&&("function"==typeof this.props.onClickAction?this.props.onClickAction(this.props):this.performModuleAdding())},_onMouseEnter:function(){_()(this.props.onMouseEnter)||this.props.onMouseEnter(this.props.itemIndex)},performModuleAdding:function(){var e=this.props.specialtyLayout,t=h()(e)?this.props.label:"et_pb_specialty_layout_"+e.layoutFormat,n=h()(e)?"":e.layoutType;if(this.props.savedShortcode){var o={};return g()(o,this.props.savedShortcode[0]),""===this.props.globalID||this.props.isAddingIntoGlobal||(o=this.prepareGlobalModule(o)),"et_pb_row_inner"===this.props.label&&(o.type="et_pb_row_inner"),s.b.insertSavedModule(o),void s.b.cancelTooltip()}s.b.insertNewModule(t,"",n,this.props.fbSupport),"et_fb_specialty"!==this.props.label&&s.b.cancelTooltip()},prepareGlobalModule:function(e,t){var n=this,o=n.props.globalID;return t?e.attrs.global_parent=o:e.attrs.global_module=o,!h()(e.content)&&Array.isArray(e.content)&&y()(e.content,function(e){n.prepareGlobalModule(e,!0)}),e}});t.a=C},1228:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(5),r=n.n(i),s=n(2),l=n.n(s),u=n(27),d=n.n(u),c=n(7),p=n.n(c),f=n(14),h=n.n(f),m=n(122),_=n(1219),b=n(102),g=n(731),v=n(732),y=n(1218),k=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var S=ETBuilderBackend.i18n.tooltips,w=ETBuilderBackend.saveModuleLibraryCategories,C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getFilePlaceholderClassName=function(){return h()({"et-core-portability-import-placeholder":!0,"et-fb-portability-import-placeholder--active":!p()(l()(n.props,"importFile.name",""))})},n._onChange=function(e,t){var o=t.split("|"),a=k(o,2),i={importOptions:{addToLibrary:"off",replaceLayout:a[0],importBackUp:a[1]}};n.props._onChange(i)},n.onImportLayout=function(e){e.preventDefault(),n.props.importLayout()},n.onExportLayout=function(e){e.preventDefault(),n.props.exportLayout()},n.onFileUpload=function(e){var t=l()(e,"target.files[0]",""),o=t?t.name.replace(".json",""):"";n.props._onChange({importFile:t,importLayoutName:o})},n._renderCategories=function(){return!(!w||0===w.length)&&a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"et-fb-import-categories-field"},a.a.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.addToCatText,":"),a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(v.a,{value:n.props.importCategories,name:"importCategories",options:d()(w,function(e){return e.name}),shortcut_index:"import-categories",_onChange:n.props._onChange}))),a.a.createElement("div",{className:"et-fb-export-file-name-field"},a.a.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.createCatText),a.a.createElement(b.a,{type:"text",value:n.props.importNewCategory,name:"importNewCategory",_onChange:n.props._onChange})))},n._renderExportTab=function(){return a.a.createElement("div",{className:n.props.tabClassName("modules_all")},a.a.createElement("div",{className:"et-fb-export-file-name-field"},a.a.createElement("h3",null,S.exportName),a.a.createElement(b.a,{type:"text",value:n.props.exportFileName,name:"exportFileName",_onChange:n.props._onChange})),a.a.createElement("div",{className:"et-fb-export-error-container"},n.props.exportError),a.a.createElement(g.a,{videoListId:"et_pb_portability",trigger:"tooltip"}),a.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:n.onExportLayout},S.exportButton))},n._renderImportTab=function(){var e=n.props.importOptions,t=e.replaceLayout,o=e.importBackUp,i=e.addToLibrary;return a.a.createElement("div",{className:n.props.tabClassName("modules_library")},a.a.createElement("div",{className:"et-fb-upload-file-container"},a.a.createElement("h3",null,S.chooseFile),a.a.createElement("span",{className:n._getFilePlaceholderClassName()},n.props.importFileName()),a.a.createElement("input",{type:"file",className:"et-fb-import-file",onChange:n.onFileUpload})),a.a.createElement("div",{className:"et-fb-import-error-container"},n.props.importError),a.a.createElement("div",{className:"et-fb-import-options-field"},a.a.createElement("h3",null,S.importOptions,":"),a.a.createElement(v.a,{value:t+"|"+o,name:"importOptions",options:[S.replaceLayout,S.importBackUp],shortcut_index:"import-options",_onChange:n._onChange})),"on"===i&&n._renderImportNameField(),"on"===i&&n._renderCategories(),a.a.createElement(g.a,{videoListId:"et_pb_portability",trigger:"tooltip"}),a.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:n.onImportLayout},S.importButton))},n._renderImportNameField=function(){return a.a.createElement("div",{className:"et-fb-export-file-name-field"},a.a.createElement("h3",null,S.layoutName),a.a.createElement(b.a,{type:"text",value:n.props.importLayoutName,default:n.props.importLayoutName,name:"importLayoutName",_onChange:n.props._onChange}))},n._renderProgress=function(){return a.a.createElement(_.a,{progress:n.props.importProgress,time_remaining:n.props.importEstimation})},n._renderModalContent=function(){return n.props.preloadingItems&&n.props.importProgress?n._renderProgress():a.a.createElement(m.a,{isLoading:n.props.preloadingItems},n._renderExportTab(),n._renderImportTab())},n.tabs=[{name:"tooltips.export",className:"modules_all"},{name:"tooltips.import",className:"modules_library"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),E(t,[{key:"render",value:function(){var e,t=!r()(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"";return a.a.createElement("div",{className:"et-fb-main-settings et-fb-main-settings--portability"},(e=this.props)._renderTabs.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.tabs)),a.a.createElement("div",{className:"et-fb-settings-options-wrap et_fb_save_module_modal",style:t},a.a.createElement("div",{className:"et-fb-settings-options"},this._renderModalContent())))}}]),t}();C.displayName="ETBuilderPortabilityModal",t.a=Object(y.b)(C)},1229:function(e,t,n){},1230:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome");function a(e,t,n){if(!document.documentMode&&!window.StyleMedia&&!o)return new window.File(e,t,n);var a=new Blob(e,n);return a.lastModified=Date.now(),a.name=t,a}},1231:function(e,t,n){},1232:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(14),r=n.n(i),s=n(21),l=n(31),u=n(102),d=n(131),c=(n(1231),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=ETBuilderBackend.i18n,h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null},o.onClickAccountFieldHelp=function(e){var t=e+"_field_help_active";o.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,!o.state[t]))},o.onMouseEnterFieldGroup=function(e){o.setState({hovered_field_group:e})},o.onMouseLeaveFieldGroup=function(e){o.state.hovered_field_group===e&&o.setState({hovered_field_group:null})},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),c(t,[{key:"_renderSubmitButton",value:function(){var e=a.a.createElement(s.a,{icon:"loading",color:"#FFFFFF"});return a.a.createElement(l.a,{_onClick:this.props.onClickSubmitButton,inverse:!0},this.state.ajax_in_progress||f.library.Submit,this.state.ajax_in_progress&&e)}},{key:"_renderAPIKeyFormGroup",value:function(){return a.a.createElement(d.b,{name:"api_key",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},a.a.createElement(d.c,{name:"api_key",activeHelp:this.state.api_key_field_help_active,hoveredGroup:"api_key"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},f.library["API Key"]),a.a.createElement(d.a,{active:this.state.api_key_field_help_active},f.library.$apiKeyHelp),a.a.createElement(u.a,{type:"text",value:this.props.et_api_key,name:"et_api_key",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderUsernameFormGroup",value:function(){return a.a.createElement(d.b,{name:"username",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},a.a.createElement(d.c,{name:"username",activeHelp:this.state.username_field_help_active,hoveredGroup:"username"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},f.library.Username),a.a.createElement(d.a,{active:this.state.username_field_help_active},f.library.$usernameHelp),a.a.createElement(u.a,{type:"text",value:this.props.et_username,name:"et_username",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderExpiredAccountError",value:function(){return a.a.createElement("div",{className:"et-fb-account-status-error__content"},a.a.createElement("p",{dangerouslySetInnerHTML:{__html:f.library.$expiredAccount}}))}},{key:"_renderNoAccountError",value:function(){return a.a.createElement("div",{className:"et-fb-account-status-error__content"},a.a.createElement("p",null,f.library.$noAccount),this._renderUsernameFormGroup(),this._renderAPIKeyFormGroup(),a.a.createElement("div",null,this._renderSubmitButton()))}},{key:"render",value:function(){var e="expired"===this.props.status,t=e?f.library["Uh Oh!"]:f.library["Authentication Required"],n={"et-fb-account-status-error":!0,"et-fb-account-status-error--auth-failed":this.props.authFailed};return a.a.createElement("div",{className:r()(n)},a.a.createElement("h2",null,t),e&&this._renderExpiredAccountError(),e||this._renderNoAccountError())}}]),t}();t.a=h},1233:function(e,t,n){},1234:function(e,t,n){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(){var e;c.debug&&(e=console).log.apply(e,arguments)}var n=window.navigator.userAgent.indexOf("Edge")>-1;function o(e,t){return(e.origin===t||n)&&"object"===i(e.data)&&"postmate"in e.data&&e.data.type===r&&!!{"handshake-reply":1,call:1,emit:1,reply:1,request:1}[e.data.postmate]}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="application/x-postmate-v1+json",s=Object.prototype.hasOwnProperty,l=0,u=function(){function n(o){var a=this;e(this,n),this.parent=o.parent,this.frame=o.frame,this.child=o.child,this.childOrigin=o.childOrigin,this.events={},t("Parent: Registering API"),t("Parent: Awaiting messages..."),this.listener=function(e){var n=((e||{}).data||{}).value||{},o=n.data,i=n.name;"emit"===e.data.postmate&&(t("Parent: Received event emission: "+i),i in a.events&&a.events[i].call(a,o))},this.parent.addEventListener("message",this.listener,!1),t("Parent: Awaiting event emissions from Child")}return a(n,[{key:"get",value:function(e){var t=this;return new c.Promise(function(n){var o=++l;t.parent.addEventListener("message",function e(a){a.data.uid===o&&"reply"===a.data.postmate&&(t.parent.removeEventListener("message",e,!1),n(a.data.value))},!1),t.child.postMessage({postmate:"request",type:r,property:e,uid:o},t.childOrigin)})}},{key:"call",value:function(e,t){this.child.postMessage({postmate:"call",type:r,property:e,data:t},this.childOrigin)}},{key:"on",value:function(e,t){this.events[e]=t}},{key:"destroy",value:function(){t("Parent: Destroying Postmate instance"),window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}]),n}(),d=function(){function n(a){var i=this;e(this,n),this.model=a.model,this.parent=a.parent,this.parentOrigin=a.parentOrigin,this.child=a.child,t("Child: Registering API"),t("Child: Awaiting messages..."),this.child.addEventListener("message",function(e){if(o(e,i.parentOrigin)){t("Child: Received request",e.data);var n=e.data,a=n.property,s=n.uid,l=n.data;if("call"===e.data.postmate)return void(a in i.model&&"function"==typeof i.model[a]&&i.model[a].call(i,l));(function(e,t){var n="function"==typeof e[t]?e[t]():e[t];return c.Promise.resolve(n)})(i.model,a).then(function(t){return e.source.postMessage({property:a,postmate:"reply",type:r,uid:s,value:t},e.origin)})}})}return a(n,[{key:"emit",value:function(e,n){t('Child: Emitting Event "'+e+'"',n),this.parent.postMessage({postmate:"emit",type:r,value:{name:e,data:n}},this.parentOrigin)}}]),n}(),c=function(){function n(t){e(this,n);var o=t.container,a=void 0===o?void 0!==a?a:document.body:o,i=t.model,r=t.url;return this.parent=window,this.frame=document.createElement("iframe"),a.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=i||{},this.sendHandshake(r)}return a(n,[{key:"sendHandshake",value:function(e){var a=this,i=function(e){var t=document.createElement("a");return t.href=e,t.origin||t.protocol+"//"+t.hostname}(e),s=0,l=void 0;return new n.Promise(function(n,d){a.parent.addEventListener("message",function e(r){return!!o(r,i)&&("handshake-reply"===r.data.postmate?(clearInterval(l),t("Parent: Received handshake reply from Child"),a.parent.removeEventListener("message",e,!1),a.childOrigin=r.origin,t("Parent: Saving Child origin",a.childOrigin),n(new u(a))):(t("Parent: Invalid handshake reply"),d("Failed handshake")))},!1);var c=function(){t("Parent: Sending handshake attempt "+ ++s,{childOrigin:i}),a.child.postMessage({postmate:"handshake",type:r,model:a.model},i),5===s&&clearInterval(l)},p=function(){c(),l=setInterval(c,500)};a.frame.attachEvent?a.frame.attachEvent("onload",p):a.frame.onload=p,t("Parent: Loading frame",{url:e}),a.frame.src=e})}}]),n}();return c.debug=!1,c.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),c.Model=function(){function o(t){return e(this,o),this.child=window,this.model=t,this.parent=this.child.parent,this.sendHandshakeReply()}return a(o,[{key:"sendHandshakeReply",value:function(){var e=this;return new c.Promise(function(o,a){e.child.addEventListener("message",function i(l){if(l.data.postmate){if("handshake"===l.data.postmate){t("Child: Received handshake from Parent"),e.child.removeEventListener("message",i,!1),t("Child: Sending handshake reply to Parent"),l.source.postMessage({postmate:"handshake-reply",type:r},l.origin),e.parent!==l.source&&(e.parent=l.source),e.parentOrigin=n?"*":l.origin;var u=l.data.model;if(u){for(var c=Object.keys(u),p=0;p<c.length;p++)s.call(u,c[p])&&(e.model[c[p]]=u[c[p]]);t("Child: Inherited and extended model from Parent")}return t("Child: Saving Parent origin",e.parentOrigin),o(new d(e))}return a("Handshake Reply Failed")}},!1)})}}]),o}(),c}()},1235:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(1234),r=n.n(i),s=n(30),l=n.n(s),u=n(14),d=n.n(u),c=n(2),p=n.n(c),f=n(10),h=n.n(f),m=n(36),_=n.n(m),b=n(7),g=n.n(b),v=n(41),y=n.n(v),k=n(48),E=n.n(k),S=n(37),w=n.n(S),C=n(5),T=n.n(C),M=n(19),O=n.n(M),F=n(1218),A=n(0),N=n(122),L=n(1232),P=n(1230),I=n(11),D=n(922),x=n(3),B=n(29),j=(n(1229),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var G=Object(F.a)("div"),R=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.state={local_layouts:{},custom_layouts:{},account_status_error:"",account_auth_failed:!1,et_username:"",et_api_key:"",username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null,ajax_in_progress:!1},o.tabs=[{name:["library","Premade Layouts"],className:"modules_all"},{name:["library","Your Saved Layouts"],className:"modules_library"}],o._hasActiveAccount=function(){return"active"===o.account.status},o.onAccountStatusError=function(e){o.setState({account_status_error:e}),o.props.pageChanged(!0)},o.onAuthenticationComplete=function(e){if(o.state.account_status_error){if(o.setState({ajax_in_progress:!1}),e.authenticated)return o.account={et_username:o.state.et_username,et_api_key:o.state.et_api_key,status:e.status},o.setState({account_status_error:""}),o.library.call("retryUseLayout"),void I.b.updateETAccount(o.account);o.setState({account_auth_failed:!0})}},o.onChangeAccountFields=function(e,t){t!==o.state[e]&&o.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},o.onClickAccountSubmit=function(){var e={et_username:o.state.et_username,et_api_key:o.state.et_api_key};o.setState({ajax_in_progress:!0}),o.library.call("authenticate",e)},o.onClickHelpButton=function(){I.b.setVideoList("et_pb_default_layouts",1,"library")},o.onDismissedAccountStatusError=function(){return o.setState({account_status_error:""})},o.onDownloadProgress=function(e){(e=Math.floor(e/2))<1&&(e=1),o.props._onChange("importProgress",e)},o.onLayoutsDataFetched=function(e,t){o.setState({local_layouts:e,custom_layouts:t})},o.onPageChanged=function(e){var t=o.current_page.previous_url;o.current_page=e,o.current_page.previous_url||(o.current_page.previous_url=t),o.props.pageChanged(e.is_layout)},o.onUseLayout=function(e){if(x.a.isProductTourActive()&&l()("body").trigger("et_fb_product_tour_element_clicked"),w()(e))var t=e.layout,n=e.replace_content;else t=e;E()(t)?(t=new P.a([t],"layout.json",{type:"application/json"}),o.props._onChange({importFile:t,importOptions:{replaceLayout:n}}),setTimeout(o.props.importLayout,150)):(n="on"===n,D.a.getLayout(t).then(function(e){I.b.insertSavedModule(e,!0,n)}))},o.account=x.a.getETAccount(),o.site_url=ETBuilderBackend.site_url,o.library=null,o.$library=l()(),o.library_url=o._getLibraryURL(),o.inside_iframe=!1,o.current_page={},D.a.addLayoutsDataFetchedListener(o.onLayoutsDataFetched),e.appWindow().onAccountStatusError=o.onAccountStatusError;var a=B.a.getLayoutsTabs();return w()(a)&&!g()(a)&&h()(a,function(e,t){return o.tabs.push({name:e,className:t})}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),j(n,[{key:"_getLibraryURL",value:function(){var e=[],t={animation:x.a.getAppPreference("builder_animation"),iframe:1};return this.props.isProductTour&&(t.product_tour=1),h()(t,function(t,n){return e.push("et_"+n+"="+t)}),"https://www.elegantthemes.com/layouts?"+(e=e.join("&"))}},{key:"_loadLibrary",value:function(){return r.a.debug=!1,new r.a({container:this.node,url:this._getLibraryURL()})}},{key:"_setLayoutsData",value:function(){if(g()(D.a.layouts_data))I.b.fetchLayoutsData();else{var e=D.a.layouts_data.local_layouts,t=D.a.layouts_data.custom_layouts;this.setState({local_layouts:e,custom_layouts:t})}}},{key:"componentWillMount",value:function(){this._setLayoutsData()}},{key:"componentDidMount",value:function(){var t=this;this.mounted=!0,Object(A.enableScrollLock)(),e.$appWindow().on("et-fb-product-tour-skip",function(e,n){t.library.call("productTourSkipStep",n)}),this._loadLibrary().then(function(e){if(t.mounted&&(t.library=e,t.$library=l()(e.frame),t.$library.height(t.props.height-96).width(t.props.width),Object(A.isIEOrEdge)()&&(t.$library.onload=function(){t.$library.contentWindow.location.reload(),t.$library.onload=null}),t.library.on("current_page_changed",t.onPageChanged),t.library.on("use_layout",t.onUseLayout),t.library.on("download_progress",t.onDownloadProgress),t.library.on("account_status_error",t.onAccountStatusError),t.library.on("authentication_complete",t.onAuthenticationComplete),t.library.on("help_button_clicked",t.onClickHelpButton),t.library.call("setAccount",{username:Object(A.sanitized_previously)(t.account.et_username),api_key:Object(A.sanitized_previously)(t.account.et_api_key)}),t.library.call("setShowLoadOptions",!t.isCurrentLayoutEmpty()),t.props.doneLoading(),t._setLayoutsData(),!T()(t.props.layoutFilters))){var n=O()(t.props.layoutFilters)?t.props.layoutFilters:[t.props.layoutFilters];t.library.call("emitSignal",{signal:"categoriesFilterChanged",data:{value:n}})}})}},{key:"componentWillReceiveProps",value:function(e){e.backToLayouts&&this.state.account_status_error&&(e.active_tab!==this.props.active_tab&&this.$library.hide(0),this.setState({account_status_error:""}),this.props.pageChanged(!0))}},{key:"componentDidUpdate",value:function(e){this.props.width!==e.width&&this.$library.width(this.props.width),this.props.height!==e.height&&this.$library.height(this.props.height-96)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.library&&this.library.destroy(),D.a.removeLayoutsDataFetchedListener(this.onLayoutsDataFetched),Object(A.disableScrollLock)()}},{key:"isCurrentLayoutEmpty",value:function(){return 0===l()("#et_pb_root").find(".et_pb_module, .et-fb-skeleton--collapsed").length||x.a.isProductTourActive()}},{key:"shouldComponentUpdate",value:function(e,t){var n=e.active_tab!==this.props.active_tab,o=e.active_tab===this.props.active_tab&&"modules_all"===e.active_tab;if(this.library&&e.backToLayouts&&!this.state.account_status_error&&!n)this.library.call("goTo",this.current_page.previous_url);else if(this.library&&(n||!o)){var a="modules_all"===e.active_tab?{}:this.state.local_layouts;"modules_library"!==e.active_tab&&(a=p()(this.state.custom_layouts,e.active_tab,{})),y()(a,"filters.type",this.props.type),y()(a,"load_options.show",!this.isCurrentLayoutEmpty()),this.library.call("toggleLocalLayouts",a),n&&this.state.account_status_error&&this.$library.fadeIn()}return!_()(this.props,e)||!_()(this.state,t)}},{key:"_renderAccountStatusError",value:function(){return a.a.createElement(L.a,{status:this.state.account_status_error,authFailed:this.state.account_auth_failed,onClickSubmitButton:this.onClickAccountSubmit,onChangeAccountFields:this.onChangeAccountFields,ajaxInProgress:this.state.ajax_in_progress})}},{key:"render",value:function(){var e,t=this,n=d()({"et-fb-library-container":!0,"et-fb-portability__content--hidden":this.props.isLoadingLayout||this.state.account_status_error}),o=d()({"et-fb-main-settings":!0,"et-fb-main-settings--load_layout":!0,"et-fb-main-settings--error":this.state.account_status_error,"et-fb-main-settings--moving":this.props.modalMoving});return a.a.createElement("div",{className:o},(e=this.props)._renderTabs.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.tabs)),this.props.isLoadingLayout&&this.props._renderProgressBar(),this.state.account_status_error&&this._renderAccountStatusError(),a.a.createElement(N.a,{isLoading:this.props.isLoading}),a.a.createElement("div",{className:n},a.a.createElement(G,{_ref:function(e){return t.node=e}})))}}]),n}();R.displayName="ETBuilderLibraryModal",t.a=Object(F.b)(R,"download")}).call(this,n(0))},1236:function(e,t,n){},1237:function(e,t,n){},1238:function(e,t,n){},1239:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(13),r=n(14),s=n.n(r),l=n(4),u=n.n(l),d=n(7),c=n.n(d),p=(n(1238),n(11)),f=(n(3),n(31)),h=n(21),m=n(737),_=n(64),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var g=ETBuilderBackend.i18n,v={className:u.a.string,currentVideo:u.a.number,currentVideoList:u.a.string,modalPosition:u.a.object,modalWidth:u.a.number,modalMoving:u.a.bool},y=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={videoHover:!1},e._handleVideoMouseEnter=e._handleVideoMouseEnter.bind(e),e._handleVideoMouseLeave=e._handleVideoMouseLeave.bind(e),e._renderUndockButton=e._renderUndockButton.bind(e),e._handleAnimation=e._handleAnimation.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),b(n,[{key:"_handleVideoMouseEnter",value:function(){this.props.modalMoving||this.setState({videoHover:!0})}},{key:"_handleVideoMouseLeave",value:function(){this.setState({videoHover:!1})}},{key:"_handleAnimation",value:function(e,t){return this.props.animate?e:t}},{key:"_renderUndockButton",value:function(){var e=this.props,t=e.helpModalState,n=e.modalPosition,o=e.modalWidth,r=e.videoOverlayStatus,s=this.state.videoHover,l=c()(t)?{width:o,position:{x:n.x,y:n.y}}:t;return a.a.createElement(i.Motion,{defaultStyle:{s:.5,o:0,x:15,y:15},style:{s:this._handleAnimation(Object(i.spring)(s?1:.5,{stiffness:300,damping:20}),s?1:.5),o:this._handleAnimation(Object(i.spring)(s?1:0,{stiffness:300,damping:20}),s?1:0),x:this._handleAnimation(Object(i.spring)(s?15:0,{stiffness:300,damping:20}),s?15:0),y:this._handleAnimation(Object(i.spring)(s?0:15,{stiffness:300,damping:20}),s?0:15)}},function(e){return a.a.createElement(f.a,{round:!0,elevate:!0,primary:!0,small:!0,__onClick:function(){p.b.setVideoOverlay(l.width,l.position.x,l.position.y,!r)},style:{opacity:e.o,transform:"translate("+e.x+"px, "+e.y+"px) scale("+e.s+")"}},a.a.createElement(h.a,{icon:"window-undock",color:"#FFFFFF"}))})}},{key:"render",value:function(){var t=this.props,n=t.className,o=t.currentVideo,i=t.currentVideoList,r=t.modalWidth,l=t.videoOverlayStatus,u=s()("et-fb-video-list",n);return a.a.createElement("div",{className:u},a.a.createElement("div",{className:"et-fb-video-list__container"},a.a.createElement("div",{className:"et-fb-video-list__header",onMouseEnter:this._handleVideoMouseEnter,onMouseLeave:this._handleVideoMouseLeave,style:{height:.5625*(r-60)}},a.a.createElement(_.a,null,this._renderUndockButton(),l?a.a.createElement("span",null,g.video.active):function(e,t){return navigator.onLine?a.a.createElement(m.a,{dividers:!0,style:{width:"100%",height:"100%"},videoId:g.videos[e][t].id}):a.a.createElement("span",null,g.video.offline)}(i,o))),a.a.createElement("ul",{className:"et-fb-video-list__menu"},a.a.createElement(_.a,null,Object.keys(g.videos[i]).map(function(t){return a.a.createElement("li",{className:s()({"et-fb-video-list__item":!0,"et-fb-video-list__item--active":o===parseInt(t,10)}),onClick:function(n){e(n.target).closest(".et-fb-tabs__panel--active").animate({scrollTop:0},300),p.b.setVideo(parseInt(t,10))},key:"video-"+t},a.a.createElement("div",{className:"et-fb-video-list__icon"}),a.a.createElement("span",null,g.videos[i][t].name))})))))}}]),n}();y.propTypes=v,y.defaultProps={currentVideo:1,currentVideoList:"et_pb_default"},t.a=y}).call(this,n(30))},1240:function(e,t,n){},1241:function(e,t,n){},1242:function(e,t,n){},1243:function(e,t,n){},1244:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(16),r=n.n(i),s=n(71),l=n.n(s),u=n(14),d=n.n(u),c=n(7),p=n.n(c),f=n(36),h=n.n(f),m=n(142),_=n.n(m),b=n(2),g=n.n(b),v=n(240),y=n.n(v),k=n(0),E=n(102),S=n(3),w=n(11),C=n(145),T=(n(1243),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var M=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={activeColorpicker:null,paletteColors:p()(t.getSavedPalette())?t.getDefaultPalette():t.getSavedPalette()},t._repositionColorpickerElements=t._repositionColorpickerElements.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),T(n,[{key:"getClassName",value:function(e){return"et-fb-settings-option-colorpalette-"+e}},{key:"getDefaultPalette",value:function(){return ETBuilderBackend.pageSettingsFields.et_pb_color_palette.default.split("|")}},{key:"getSavedPalette",value:function(){return k.default.get(S.a.getPageSetting("et_pb_color_palette"),"").split("|").filter(y()(p.a))}},{key:"getPalette",value:function(){return this.state.paletteColors}},{key:"_repositionColorpickerElements",value:function(){var t=e(r.a.findDOMNode(this)).find('.et-fb-settings-option-colorpalette-colorpicker-wrap[data-index="'+this.state.activeColorpicker+'"]'),n=parseInt(t.find(".iris-square-value.ui-draggable").width()),o=parseInt(t.find(".iris-square-value.ui-draggable").css("left"))+n/2,a=parseInt(t.width());k.default.hasValue(this.props.value)&&o>a-50?t.addClass("on-right-corner"):t.removeClass("on-right-corner")}},{key:"render",value:function(){var e=this,t=this.getPalette(),n=_()(8).map(function(n){return a.a.createElement("span",{key:"overviewItem-"+n,className:e.getClassName("overview-item"),"data-index":n,"data-tip":!0,"data-for":"color-palette-tooltip-"+n,onClick:e._onOverviewClick.bind(e,n)},a.a.createElement("span",{className:"color",style:{backgroundColor:t[n]}}),a.a.createElement(l.a,{id:"color-palette-tooltip-"+n,effect:"solid"},t[n]))}),o=_()(8).map(function(n){var o={};o[""+e.getClassName("colorpicker-wrap")]=!0,o[e.getClassName("colorpicker-wrap")+"--active"]=n===e.state.activeColorpicker;var i={"et-fb-settings-option-colorpalette-input":!0};return i["et-fb-color-type-"+C.a.getColorType(t[n])]=!0,a.a.createElement("div",{className:d()(o),key:"colorpickerWrap-"+n,"data-index":n},a.a.createElement(E.a,{ref:"input-"+n,className:d()(i),name:e.getClassName("input")+"-"+n,value:t[n],_onChange:e._onChange,additional_attrs:{"data-alpha":!0}}))});return a.a.createElement("div",{className:d()({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner--colorpalette":!0}),ref:"colorpalette"},a.a.createElement("div",{className:e.getClassName("overview")},n),o)}},{key:"componentWillReceiveProps",value:function(){var e=this.getSavedPalette();h()(this.getPalette(),e)||this.setState({paletteColors:p()(e)?this.getDefaultPalette():e})}},{key:"componentDidMount",value:function(){var e=this,t=this.getPalette(),n=this.getDefaultPalette(),o=void 0;k.default.$appWindow(r.a.findDOMNode(this.refs.colorpalette)).find("."+e.getClassName("input")).each(function(a,i){var r=k.default.$appWindow(this);r.wpColorPicker({hide:!1,default:n[a],palettes:!1,change:function(n,i){var r=i.color.toString();if(t[a]=r,e.setState({paletteColors:t}),w.b.pageSettingsChange("et_pb_color_palette",t.join("|")),"square"===g()(n,"originalEvent.type")){var s=k.default.$appWindow(this).closest(".et-fb-settings-option-colorpalette-colorpicker-wrap");s.find(".button-confirm").css("backgroundColor",r),s.hasClass("is-dragging")||s.addClass("is-dragging"),clearTimeout(o),o=setTimeout(function(){e._repositionColorpickerElements(),s.find(".button-confirm").css("backgroundColor",""),s.removeClass("is-dragging")},300)}},clear:function(){var n=e.getDefaultPalette();t[a]=n[a],r.wpColorPicker("color",n[a]),w.b.pageSettingsChange("et_pb_color_palette",t.join("|"))},diviColorpicker:!0,onClose:function(){k.default.$topDocument().off("click.etClickOutsideColorpicker_"+a),e.setState({activeColorpicker:null})}}),r.next('input[type="button"]').attr({value:ETBuilderBackend.i18n.controls.colorpicker.clear}),r.closest(".wp-picker-container").find(".wp-color-result").attr("title",ETBuilderBackend.i18n.controls.colorpicker.select)})}},{key:"_onOverviewClick",value:function(e){var t=this,n=e===this.state.activeColorpicker?null:e,o=k.default.$appWindow(r.a.findDOMNode(this)).find('.et-fb-settings-option-colorpalette-colorpicker-wrap[data-index="'+n+'"]'),a=o.find("."+this.getClassName("input"));o.find(".iris-picker").show(),k.default.$topDocument().on("click.etClickOutsideColorpicker.etClickOutsideColorpicker_"+e,function(){a.wpColorPicker("close")}),this.setState({activeColorpicker:n}),setTimeout(function(){t._repositionColorpickerElements()},100)}},{key:"_onChange",value:function(){}}]),n}();t.a=M}).call(this,n(30))},1245:function(e,t,n){},1246:function(e,t,n){"use strict";(function(e,o){var a=n(1),i=n.n(a),r=n(4),s=n.n(r),l=n(7),u=n.n(l),d=n(5),c=n.n(d),p=n(2),f=n.n(p),h=n(255),m=n.n(h),_=(n(1245),n(411)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var g=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["PureComponent"]),b(n,[{key:"_openLinkInNewTab",value:function(t){var n=t.target.href;c()(n)||(t.preventDefault(),e.topWindow().open(n,"_blank").focus())}},{key:"componentDidMount",value:function(){this.$creditsContainer=o(this.creditsContainer),this.$creditsContainer.on("click","a",this._openLinkInNewTab)}},{key:"componentWillUnmount",value:function(){this.$creditsContainer.off("click","a",this._openLinkInNewTab)}},{key:"render",value:function(){var e=this,t=this.props,n=t.moduleTitle,o=t.moduleType,a=f()(ETBuilderBackend,"customModuleCredits."+o,!1),r=f()(ETBuilderBackend,"customModuleCredits."+o+".author","");if(!a||u()(r))return!1;var s=u()(a.module_uri)?n:'<a href="'+a.module_uri+'">'+n+"</a>",l=u()(a.author_uri)?r:'<a href="'+a.author_uri+'">'+r+"</a>";return i.a.createElement("div",{className:"et-fb-settings-modal-module-credits",dangerouslySetInnerHTML:{__html:m()(s+" by "+l)},ref:function(t){return e.creditsContainer=t}})}}]),n}(),v={moduleTitle:s.a.string,moduleType:s.a.string};_.a.propTypes=v,t.a=g}).call(this,n(0),n(30))},1247:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(46),l=n(22),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.PureComponent),u(t,[{key:"render",value:function(){var e=this.props.dynamic.attribute;return e.loading?this.props.renderLoading(this.props.type):this.props.children(e.value,e.dynamic)}}]),t}();d.propTypes={type:r.a.oneOf(["text","image"]),attributes:r.a.object.isRequired,attribute:r.a.string.isRequired,value:r.a.oneOfType([r.a.string,r.a.number]),renderLoading:r.a.func,children:r.a.func},d.defaultProps={type:"text",value:void 0,renderLoading:l.j,children:function(e,t){return t?Object(l.i)(e):e}},t.a=Object(s.a)(function(e){return{attribute:{attribute:e.attribute,value:e.value||null}}},function(e){return e.attributes})(d)},1248:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(5),l=n.n(s),u=n(27),d=n.n(u),c=n(79),p=n.n(c),f=n(75),h=n.n(f),m=n(2),_=n.n(m),b=n(50),g=n.n(b),v=n(1220),y=n(11),k=n(445),E=n(29),S=n(3),w=n(33),C=n(144),T=n(1247),M=(n(22),n(64)),O=n(0),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var N=void 0,L=!1,P=function(e){if(S.a.getModuleItemDragEndWaiting()){var t=void 0;"function"!=typeof Event?(t=document.createEvent("Event")).initEvent("dragend",!0,!0):t=new Event("dragend"),O.default.appWindow().dispatchEvent(t)}},I=function(e){L=!0},D=function(e){clearTimeout(N),N=setTimeout(function(){if(!L&&g()(Event)){var e=void 0;"function"!=typeof Event?(e=document.createEvent("Event")).initEvent("dragend",!0,!0):e=new Event("dragend"),O.default.appWindow().dispatchEvent(e)}L=!1},150)},x={module:r.a.object,_v:w.a._v,setHoveredElement:r.a.oneOfType([r.a.func,r.a.bool])},B=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.moveItem=function(e,n){var o=t.props.module.props.content,a=o.filter(function(t){return t._i===e})[0],i=o.filter(function(e){return e._i===n})[0],r=a._order;a._order=i._order,i._order=r,o.sort(t.compareItems),o=d()(h()(o),function(e,t){var n=e.address.split(".");return(n=p()(n)).push(t),e.address=n.join("."),e}),y.b.moduleContentChange(t.props.module,o,!0,!0)},t._onMouseEnterItem=function(e){var n=t.props.setHoveredElement;n&&n("child_item",e.type,C.a.getHelper("child_item").preparePayload(e))},t._onMouseLeaveItem=function(e){var n=t.props.setHoveredElement;n&&n(!1,e.type)},t._getItemTitleAttribute=function(e){if("content"===e.child_title_var&&_()(e,"content"))return{value:_()(e,"content"),attribute:"content"};for(var t=[[_()(e.attrs,e.child_title_var),e.child_title_var],[_()(e.attrs,e.child_title_fallback_var),e.child_title_fallback_var],[_()(e,"advanced_setting_title_text",ETBuilderBackend.i18n.modules.items.newItemDefaultText),"advanced_setting_title_text"],[_()(e.attrs,"title"),"title"]],n=0;n<t.length;n++)if(t[n][0])return{value:t[n][0].trim(),attribute:t[n][1]};return{value:"",attribute:"title"}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),A(n,[{key:"componentDidMount",value:function(){O.default.appWindow().addEventListener("dragstart",P),O.default.appWindow().addEventListener("dragend",I),O.default.appWindow().addEventListener("drop",D)}},{key:"componentWillUnmount",value:function(){O.default.appWindow().removeEventListener("dragstart",P),O.default.appWindow().removeEventListener("dragend",I),O.default.appWindow().removeEventListener("drop",D)}},{key:"compareItems",value:function(e,t){return e._order-t._order}},{key:"render",value:function(){var t=this;return a.a.createElement(k.a,null,a.a.createElement("ul",{className:"et-fb-settings-module-items"},d()(this.props.module.props.content,function(n,o){if(!l()(n)){n.attrs=E.a.setAttrs(n.attrs,n.type);var i=t._getItemTitleAttribute(n),r=a.a.createElement(M.a,null,a.a.createElement(T.a,{attributes:n.attrs,attribute:i.attribute,value:i.value},function(t,n){return n?e(e.parseHTML(t)).text():t}));return a.a.createElement(v.a,F({key:n._i,index:o,id:n._i,title:r,moveItem:t.moveItem,_onMouseEnterItem:t._onMouseEnterItem,_onMouseLeaveItem:t._onMouseLeaveItem},n))}})))}}]),n}();B.propTypes=x,B.defaultProps={module:{},_v:0,setHoveredElement:!1},t.a=B}).call(this,n(30))},1249:function(e,t,n){},1250:function(e,t,n){"use strict";(function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(14),l=n.n(s),u=n(2),d=n.n(u),c=n(31),p=n(122),f=n(0),h=(n(1249),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var m=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={loading:!1},e._onClickChangeApiKey=e._onClickChangeApiKey.bind(e),e._onClickGenerateImageUrlFromVideo=e._onClickGenerateImageUrlFromVideo.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),h(n,[{key:"_onClickChangeApiKey",value:function(){f.default.topWindow().open(ETBuilderBackend.urls.themeOptionsUrl,"_blank").focus()}},{key:"_onClickGenerateImageUrlFromVideo",value:function(){var t=this,n=t.props.module,o=d()(t,"props.module.props.attrs.__oembed_thumbnail");f.default.hasValue(o)?t.props._onChange(t.props.name,o):(this.setState({loading:!0}),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,data:{action:"et_pb_video_get_oembed_thumbnail",et_admin_load_nonce:ETBuilderBackend.nonces.et_admin_load,et_video_url:n.props.attrs[t.props.attrs.video_source]},success:function(e){t.props._onChange(t.props.name,e),t.setState({loading:!1})}}))}},{key:"render",value:function(){var e="";switch(this.props.type){case"change_google_api_key":e=a.a.createElement(c.a,{_onClick:this._onClickChangeApiKey,className:l()(["et-fb-settings-button--additional-button","et-fb-settings-button--change-api-key"]),inverse:!0},ETBuilderBackend.i18n.controls.additionalButton.changeApiKey);break;case"generate_image_url_from_video":e=a.a.createElement(c.a,{_onClick:this._onClickGenerateImageUrlFromVideo,className:l()(["et-fb-settings-button--additional-button","et-fb-settings-button--generate-image-url-from-video"]),inverse:!0},ETBuilderBackend.i18n.controls.additionalButton.generateImageUrlFromVideo)}return a.a.createElement(p.a,{useWrapper:!1,isLoading:this.state.loading},e)}}]),n}();m.propTypes={attrs:r.a.object,module:r.a.object,name:r.a.string,type:r.a.string,_onChange:r.a.func},t.a=m}).call(this,n(30))},1251:function(e,t,n){},1252:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=(n(14),n(131)),l=n(573),u=n(102),d=n(732),c=n(21),p=n(122),f=n(45),h=(n(1221),n(7)),m=n.n(h),_=n(2),b=n.n(_),g=n(27),v=n.n(g),y=n(5),k=n.n(y),E=n(9),S=n.n(E),w=n(75),C=n.n(w),T=n(123),M=n.n(T),O=n(10),F=n.n(O),A=n(72),N=n.n(A),L=n(136),P=n.n(L),I=n(176),D=n.n(I),x=(n(99),n(161)),B=n.n(x),j=n(56),G=n.n(j),R=n(3),H=(n(29),n(11)),W=n(0),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var U={active:r.a.bool},$=W.default.$topWindow("body"),z=ETBuilderBackend.i18n.fonts,K=ETBuilderBackend.allFontWeights,q=ETBuilderBackend.allFontFormats,J=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={fontFilesData:{},fontError:"",errorElements:[],fontName:"",fontProcessing:!1,selectedFontWeightsAll:"on",selectedFontWeights:"",activeDescription:null,hoveredGroup:null},e._onFileUpload=e._onFileUpload.bind(e),e.onUpload=e.onUpload.bind(e),e.onDelete=e.onDelete.bind(e),e._onFontNameInput=e._onFontNameInput.bind(e),e.processFont=e.processFont.bind(e),e.updateFontSettings=e.updateFontSettings.bind(e),e.fontDataValid=e.fontDataValid.bind(e),e.maybeAddScrollbar=e.maybeAddScrollbar.bind(e),e.generateFilesListPreview=e.generateFilesListPreview.bind(e),e.removeFontFile=e.removeFontFile.bind(e),e._onClickHelp=e._onClickHelp.bind(e),e._isDescriptionVisible=e._isDescriptionVisible.bind(e),e._isHoveredGroup=e._isHoveredGroup.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),V(n,[{key:"componentDidMount",value:function(){$.append('<div class="et-core-modal-overlay et-fb-font-upload-overlay et-core-active"></div>'),$.addClass("et-fb-global-scroll-disabled"),this.shortThrottleReset=N()(this.maybeAddScrollbar,100),W.default.appWindow().addEventListener("resize",this.shortThrottleReset),this.maybeAddScrollbar();var e=R.a.getDroploaderPayloadFont();e&&this.setState({fontFilesData:e.fontFilesData,fontName:e.fontName})}},{key:"componentWillUnmount",value:function(){$.removeClass("et-fb-global-scroll-disabled"),W.default.appWindow().removeEventListener("resize",this.shortThrottleReset)}},{key:"_onClickHelp",value:function(e){var t=this.state.activeDescription===e?null:e;this.setState({activeDescription:t})}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isHoveredGroup",value:function(e){return this.state.hoveredGroup===e}},{key:"maybeAddScrollbar",value:function(){var e=W.default.$topWindow(".et-fb-font-upload-modal");800>W.default.$topWindow().height()?e.addClass("et-core-modal-enabled-scrollbar"):e.removeClass("et-core-modal-enabled-scrollbar")}},{key:"fontDataValid",value:function(e){var t=[],n="";return"add"!==e||(""===this.state.fontName&&t.push("fontName"),m()(this.state.fontFilesData)&&(n=z.noFilesError,t.push("fontFile")),"on"!==this.state.selectedFontWeightsAll&&-1===this.state.selectedFontWeights.indexOf("on")&&t.push("fontWeight"),m()(t)?(this.setState({errorElements:[],fontError:""}),!0):(this.setState({errorElements:t,fontProcessing:!1,fontError:n}),!1))}},{key:"_onFontNameInput",value:function(e,t){var n=D()(this.state.errorElements,function(e){return"fontName"===e});this.setState({fontName:t,errorElements:n})}},{key:"onUpload",value:function(){this.state.fontProcessing||this.processFont("add")}},{key:"onDelete",value:function(){this.state.fontProcessing||this.processFont("remove",this.props.fontID)}},{key:"getFontWeights",value:function(){if("on"===this.state.selectedFontWeightsAll)return"all";var e=this.state.selectedFontWeights.split("|"),t=0;return C()(v()(K,function(n,o){return"on"===e[++t-1]&&o})).join(",")}},{key:"processFont",value:function(t,n){var o=this,a=k()(n)?o.state.fontName:n,i={};if(o.fontDataValid(t)){o.setState({fontError:"",errorElements:[],fontProcessing:!0}),"add"===t&&(i=JSON.stringify({font_weights:o.getFontWeights(),generic_family:"sans-serif"}));var r=new FormData,s={action:"et_pb_process_custom_font",et_pb_font_action:t,et_fb_upload_font_nonce:ETBuilderBackend.nonces.uploadFontNonce,et_pb_font_name:a,et_pb_font_settings:i};F()(o.state.fontFilesData,function(e,t){s["et_pb_font_file_"+t]=e.file}),e.each(s,function(e,t){r.append(e,t)}),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,contentType:!1,processData:!1,data:r,success:function(n){var a=e.parseJSON(n);if(m()(a.error)){if(ETBuilderBackend.customFonts=b()(a,"updated_fonts",ETBuilderBackend.customFonts),o.setState({fontError:"",fontProcessing:!1}),"add"===t&&""!==o.props.callback){var i=b()(a,"uploaded_font","");o.props.callback(i)}o.onClose()}else o.setState({fontError:a.error,fontProcessing:!1})}})}}},{key:"getFontName",value:function(e){return b()(ETBuilderBackend.customFonts,[e,"font_name"],e)}},{key:"onClose",value:function(){H.b.setFontUploaderStatus("disabled"),W.default.$topWindow(".et-fb-font-upload-overlay").remove()}},{key:"_onFileUpload",value:function(e){var t=e.target.files,n=this.state.fontFilesData;if(!(G()(t)<1))if(F()(t,function(e){var t=B()(b()(e,"name",""));F()(q,function(o){M()(t,o)&&(n[o]={fileName:t,file:e})})}),m()(n)){var o=z.fileError+". "+z.supportedFiles+": "+q.join(", ");this.setState({fontError:o})}else this.setState({fontFilesData:n,fontError:""})}},{key:"updateFontSettings",value:function(e,t){switch(e){case"et-font-uploader-weights-all":this.setState({selectedFontWeightsAll:t});break;case"et-font-uploader-weights-select":this.setState({selectedFontWeights:t})}}},{key:"removeFontFile",value:function(t){var n=e(t.target).closest(".et-fb-font-files-list-item");if(!(n.length<1)){var o=n.data("file_ext"),a=this.state.fontFilesData;P()(a,o),this.setState({fontFilesData:a})}}},{key:"generateFilesListPreview",value:function(){var e=this;if(m()(this.state.fontFilesData))return!1;var t=v()(this.state.fontFilesData,function(t,n){return a.a.createElement("div",{className:"et-fb-font-files-list-item","data-file_ext":n,key:n},a.a.createElement("span",{className:"et-fb-font-files-list-item-remove",onClick:e.removeFontFile},a.a.createElement(c.a,{icon:"delete",color:f.a.danger})),t.fileName)});return a.a.createElement("div",{className:"et-fb-font-files-list"},a.a.createElement("label",{className:"et-fb-form__label"},a.a.createElement("span",{className:"et-fb-form__label-text"},z.selectedFiles,":")),t)}},{key:"getWeightCheckboxValues",value:function(){var e=[];return F()(K,function(t,n){var o=t+" "+n;e.push({value:t,label:o})}),e}},{key:"render",value:function(){var e={"et-fb-font-upload-modal":!0,"et-fb-font-upload-modal--delete":"delete"===this.props.action,"et-fb-modal-allow-scroll":!0},t=""!==this.state.fontError?a.a.createElement("div",{className:"et-fb-font-upload-error"},this.state.fontError):"",n="";if(this.state.fontProcessing)n=a.a.createElement(p.a,{isLoading:!0});else if("delete"===this.props.action){var o=a.a.createElement("div",{className:"et_pb_prompt_buttons et-fb-font-delete-confirmation"},a.a.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore et-core-modal-action-secondary",onClick:this.onClose},z.cancel),a.a.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-restore",onClick:this.onDelete},z.delete));n=a.a.createElement("div",null,a.a.createElement("div",{className:"et-core-modal-content"},z.deleteConfirm+' "'+this.getFontName(this.props.fontID)+'"',"?"),o)}else{var i="on"!==this.state.selectedFontWeightsAll?a.a.createElement(d.a,{options:this.getWeightCheckboxValues(),name:"et-font-uploader-weights-select",_onChange:this.updateFontSettings,value:this.state.selectedFontWeights}):"",r=a.a.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore",onClick:this.onUpload},z.upload);n=a.a.createElement("div",null,a.a.createElement("div",{className:"et-core-modal-content et-fb-allow-mouse-wheel"},a.a.createElement("div",{className:"et-core-modal-content-inner et-fb-allow-mouse-wheel-form"},t,a.a.createElement("label",{className:"et-fb-form__label"},a.a.createElement("span",{className:"et-fb-form__label-text"},z.fontNameLabel)),a.a.createElement(u.a,{type:"text",value:this.state.fontName,name:"userFontName",_onChange:this._onFontNameInput,className:!!S()(this.state.errorElements,"fontName")&&"et-fb-font-error-element",additional_attrs:{placeholder:z.fontName}}),a.a.createElement("div",{className:"et-fb-upload-file-container"},a.a.createElement("span",{className:"et-core-portability-import-placeholder"},z.noFile),a.a.createElement("button",{className:"et-fb-button et-fb-button--upload-font et-fb-button--inverse et-fb-settings-button--additional-button"},z.chooseFile),a.a.createElement("input",{type:"file",className:"et-fb-import-file",onChange:this._onFileUpload,accept:".ttf, .otf, .eot, .woff2, .woff",multiple:!0}),a.a.createElement("p",{className:"et-font-uploader-hint"},z.supportedFiles,": ",q.join(", "))),this.generateFilesListPreview(),a.a.createElement(s.c,{name:"et-font-uploader-weight",activeHelp:this._isDescriptionVisible("et-font-uploader-weight"),hoveredGroup:!0,key:"et-font-uploader-weight-label",onClickHelp:this._onClickHelp},z.weightsSupport),a.a.createElement(s.a,{active:this._isDescriptionVisible("et-font-uploader-weight"),key:"et-font-uploader-weight-desc"},z.weightsHelp),a.a.createElement("div",{className:S()(this.state.errorElements,"fontWeight")?"et-fb-font-error-element":""},a.a.createElement(d.a,{options:[z.all],_onChange:this.updateFontSettings,name:"et-font-uploader-weights-all",value:this.state.selectedFontWeightsAll}),i))),r)}var c="delete"===this.props.action?z.delete:z.upload,f=!!W.default.condition("is_bfb")&&W.default.$topWindow("body #et-boc #et-fb-app");return a.a.createElement(l.default,{active:!0,actionType:"custom_content",tooltipTitle:c+" "+z.font,_closeFunction:this.onClose,classNames:e,ignorePosition:!0,enableContextMenu:!0,movable:!1,tooltipModalContainer:f},n)}}]),n}();J.propTypes=U,J.defaultProps={active:!1},t.default=J}.call(this,n(30))},1253:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(573),l=(n(1222),n(5)),u=n.n(l),d=n(2),c=n.n(d),p=n(28),f=n.n(p),h=n(59),m=n.n(h),_=n(36),b=n.n(_),g=n(7),v=n.n(g),y=n(508),k=n.n(y),E=n(66),S=n.n(E),w=n(178),C=n.n(w),T=n(26),M=n.n(T),O=n(73),F=n.n(O),A=n(53),N=n.n(A),L=n(9),P=n.n(L),I=n(72),D=n.n(I),x=n(52),B=n.n(x),j=n(3),G=n(11),R=n(0),H=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var W={active:r.a.bool},V=R.default.$appWindow("body"),U=R.default.$topWindow("body"),$=R.default.condition("is_bfb"),z=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));e.productTourLocalization=ETBuilderBackend.i18n.productTourText;var t={__html:e.productTourLocalization.start.description},o=a.a.createElement("div",{className:"et-fb-product-tour-text",dangerouslySetInnerHTML:t});if(e.state={isActive:!0,modalContent:o,modalTitle:e.productTourLocalization.start.title,endButtonText:e.productTourLocalization.start.endButtonText,skipButtonText:e.productTourLocalization.start.skipButtonText,tourElement:"start",autoLoadDemo:!1,modalPosition:{top:1e3,left:1e3,element:!1}},e.stepsSequence=e.getAvailableTourItems(),e.appliedModalOffsets={},e.skipToArray={start:"loadLayout",moveModule:"rightClickCopy",rightClickCopy:"rowOptions",rightClickPaste:"rowOptions",rowOptions:"pageSettings",tabletPreview:"desktopPreview",desktopPreview:"openHistory",openHistory:"savePage",savePage:"finish"},e.absolutelyPositionedElements=["addSection","selectModule","selectSectionType","selectRow","rowOptions","rightClickPaste","rightClickCopy","moveModule","duplicateModule"],$){e.absolutelyPositionedElements=B()(e.absolutelyPositionedElements,["loadLayout","tabletPreview","desktopPreview","openHistory","savePage"]),e.skipToArray.rowOptions="tabletPreview"}return e.onClose=e.onClose.bind(e),e.nextTip=e.nextTip.bind(e),e.nextTourContent=e.nextTourContent.bind(e),e.skipTip=e.skipTip.bind(e),e.isTourButtonClicked=e.isTourButtonClicked.bind(e),e.getActiveElementPosition=e.getActiveElementPosition.bind(e),e.getAvailableTourItems=e.getAvailableTourItems.bind(e),e.autoloadLayout=e.autoloadLayout.bind(e),e.setAfterMoveStep=e.setAfterMoveStep.bind(e),e.maybeScroll=e.maybeScroll.bind(e),e.maybeAddScrollbar=e.maybeAddScrollbar.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),H(n,[{key:"componentDidMount",value:function(){var t=this,n=this;(V.add(U).on("click mouseup mousedown","*",n.isTourButtonClicked),V.add(U).on("mouseup click",".et-fb-product-tour-element",function(t){"mouseup"===t.type&&"selectRow"!==n.state.tourElement||e(this).hasClass("et_fb_move_module_handler")||e(this).hasClass("et-fb-product-tour-element-text")||setTimeout(n.nextTip,0)}),V.add(U).on("keyup",".et-fb-product-tour-element-text",function(){setTimeout(n.nextTip,0)}),V.add(U).on("mouseup",".et-fb-product-tour-secondary-element",function(){G.b.setActiveTourElement(n.state.tourElement,!0)}),V.add(U).on("mousedown",".et_fb_move_module_handler.et-fb-product-tour-element",function(){n.nextTip()}),V.add(U).on("et_fb_product_tour_element_clicked",function(e){return setTimeout(t.nextTip,0)}),R.default.$topWindow("#et-boc #et-fb-app").append('<div class="et-core-modal-overlay et-fb-product-tour-overlay et-core-active"></div>'),e(".et_search_form_container").length>0&&e(".et_search_form_container").addClass("et_pb_is_animating"),e(".et_header_style_slide .et_slide_in_menu_container").length>0)&&(e(".et_header_style_slide .et_slide_in_menu_container").addClass("et_pb_slide_menu_opened"),e("#main-header").on("click",".et_toggle_slide_menu",n.disableSlideMenu));e(".et_header_style_fullscreen .et_slide_in_menu_container").length>0&&e("#page-container").on("click",".et_toggle_fullscreen_menu",n.disableFullscreenMenu),j.a.addProductTourMoveFinishedListener(this.setAfterMoveStep),U.on("click",".et-fb-tour-video-overlay",function(){var t=e(this),n=t.data("video");t.replaceWith('<iframe width="200" height="150" src="'+n+'" frameborder="0" allowfullscreen></iframe>')}),U.on("mousedown, click, mouseup","#publishing-action.et-fb-product-tour-element",function(e){return e.preventDefault(),!1}),this.shortThrottleReset=D()(this.maybeAddScrollbar,100),R.default.appWindow().addEventListener("resize",this.shortThrottleReset),this.maybeAddScrollbar()}},{key:"componentWillUnmount",value:function(){j.a.removeProductTourMoveFinishedListener(this.setAfterMoveStep),R.default.appWindow().removeEventListener("resize",this.shortThrottleReset),V.off("click mouseup mousedown","*",this.isTourButtonClicked),V.off("et_fb_product_tour_element_clicked")}},{key:"disableSlideMenu",value:function(){var t=e(".et_header_style_slide .et_slide_in_menu_container");return t.hasClass("et_pb_slide_menu_opened")?t.removeClass("et_pb_slide_menu_opened"):t.addClass("et_pb_slide_menu_opened"),!1}},{key:"disableFullscreenMenu",value:function(){e(".et_header_style_fullscreen .et_slide_in_menu_container").removeClass("et_pb_fullscreen_menu_opened"),V.removeClass("et_pb_fullscreen_menu_active")}},{key:"maybeAddScrollbar",value:function(){var t=e(".et-fb-tooltip--product-tour--centered"),n=R.default.$appWindow().height();this.getActiveElementPosition(this.state.tourElement),800>n?t.addClass("et-core-modal-enabled-scrollbar"):t.removeClass("et-core-modal-enabled-scrollbar")}},{key:"setAfterMoveStep",value:function(){var e=c()(this.stepsSequence,S()(this.stepsSequence,"moveModule")+1,"");j.a.setProductTourElementReady(e)}},{key:"isTourButtonClicked",value:function(t){return"mouseup"===t.type&&"moveModule"===this.state.tourElement||(!(0===e(t.target).closest(".et-fb-product-tour-element, .et-fb-product-tour-secondary-element, .et-fb-tooltip--product-tour, .et-fb-modal__module-settings, .et-fb-modal-history, .et-fb-tour-video-overlay, #wpadminbar, .et-fb-product-tour-secondary-element-hidden").length||e(t.target).closest(".et-fb-modal__footer").length>0&&0===e(t.target).closest(".et-fb-product-tour-element, .et-fb-product-tour-secondary-element, .et-fb-product-tour-secondary-element-hidden").length)||(t.preventDefault(),t.stopPropagation(),!1))}},{key:"maybeScroll",value:function(){var e=$?"top":"app";if("selectModule"===this.state.tourElement&&R.default.$topWindow(".et-fb-settings-options-wrap").animate({scrollTop:150},400),"editRow"===this.state.tourElement&&R.default.$topWindow(".et-fb-tabs__panel--general").animate({scrollTop:130},400),P()(this.absolutelyPositionedElements,this.state.tourElement)){var t=R.default.$topWindow(".et-fb-tooltip--product-tour").length>0?R.default.$topWindow(".et-fb-tooltip--product-tour"):R.default.$appWindow(".et-fb-tooltip--product-tour");if(t.length>0){var n=R.default.$topWindow().height(),o=("top"===e?R.default.$topWindow().scrollTop():R.default.$appWindow().scrollTop())+n,a=t.innerHeight(),i=t.offset().top,r=$?90:0,s=0===R.default.$appWindow(".et-fb-product-tour-element").length?R.default.$topWindow(".et-fb-product-tour-element"):R.default.$appWindow(".et-fb-product-tour-element"),l=$&&s.closest(".et-fb-page-settings-bar").length>0;if(o<i+a+r||l){var u=i-a/2-r;("top"===e?R.default.$topWindow("html, body"):R.default.$appWindow("html, body")).animate({scrollTop:u<0?0:u},500,"swing")}}}else this.maybeAddScrollbar()}},{key:"getAvailableTourItems",value:function(){var e=!1,t=!1,n=!1,o=j.a.isAllowedAction("divi_library")&&j.a.isAllowedAction("load_layout"),a=j.a.isAllowedAction("add_module"),i=j.a.isAllowedAction("edit_module"),r=j.a.isAllowedAction("move_module");if(j.a.isAllowedAction("et_pb_blurb"))e=!0,j.a.setProductTourModuleName("et_pb_blurb");else{var s,l=F()(ETBuilderBackend.modules,{is_parent:"on"});s=N()(l,function(e){return!P()(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"],e.label)&&j.a.isAllowedAction(e.label)}),v()(s)||(s.label,j.a.setProductTourModuleName(s.label),e=!0)}(j.a.isAllowedAction("general_settings")||j.a.isAllowedAction("advanced_settings")||j.a.isAllowedAction("custom_css_settings"))&&(t=!(!j.a.isAllowedAction("general_settings")&&!j.a.isAllowedAction("custom_css_settings")),n=!0);var u={start:!0,loadLayout:o,selectLayoutPack:o,loadLayoutItem:o,addSection:e&&a,selectSectionType:e&&a,selectRow:e&&a,selectModule:e&&a,configureModule:e&&a&&t,saveModule:e&&a,duplicateModule:e&&a,moveModule:r,rightClickCopy:a,rightClickPaste:a,rowOptions:i&&n,editRow:i&&n,saveRow:i&&n,pageSettings:!R.default.condition("is_bfb"),tabletPreview:!0,desktopPreview:!0,openHistory:!0,editHistory:!0,savePage:!0,finish:!0};return M()(C()(u,this.isFalse))}},{key:"isFalse",value:function(e){return!1===e}},{key:"getActiveElementPosition",value:function(e){var t=0===R.default.$appWindow(".et-fb-product-tour-element").length,n=t?R.default.$topWindow(".et-fb-product-tour-element"):R.default.$appWindow(".et-fb-product-tour-element"),o=this.state.modalPosition,a=this.getElementOffset(e),i=$?R.default.$topWindow("#et-bfb-app-frame").offset():0,r=t&&!$?R.default.$appWindow().scrollTop():0;if(!a.usePrevElementPosition&&n.length>0&&(o=n.offset(),n.closest(".et-fb-page-settings-bar").length>0))if($)n.closest(".et-fb-page-settings-bar__column--left").length>0&&(o.top-=i.top,o.left-=200);else{var s=n.closest(".et-fb-page-settings-bar");o.top=s.position().top-100}u()(o)?this.setState({isActive:!0}):(o.top+=r,c()(this.appliedModalOffsets,e)?o=this.appliedModalOffsets[e]:(o.element=!1,o.top+=k()(c()(a,"top",0)),o.left+=k()(c()(a,"left",0)),this.appliedModalOffsets[e]=o),$&&t&&(n.closest(".et-fb-modal__module-settings").length>0||n.closest(".et-fb-tooltip-modal").length>0||n.closest(".et-fb-right-click-menu").length>0)&&(o.top-=k()(i.top)+200),this.setState({modalPosition:o,isActive:!0}))}},{key:"getElementOffset",value:function(e){var t={top:100,left:0,usePrevElementPosition:!1};switch(e){case"loadLayout":case"openHistory":case"pageSettings":t={left:-50,top:$?130:80};break;case"selectLayoutPack":t={left:850,top:-330,usePrevElementPosition:!0};break;case"loadLayoutItem":t={left:0,top:150,usePrevElementPosition:!0};break;case"addSection":t={left:-240,top:100};break;case"selectSectionType":t={left:600,top:150};break;case"selectModule":t={left:600,top:19};break;case"selectRow":t={left:-500,top:163};break;case"configureModule":t={left:590,top:-700};break;case"saveModule":t={left:630,top:-878};break;case"duplicateModule":t={left:410,top:247};break;case"rightClickCopy":t={left:440,top:255};break;case"moveModule":t={left:810,top:260};break;case"rightClickPaste":t={left:-300,top:307};break;case"rowOptions":t={left:367,top:250};break;case"editRow":t={left:590,top:-710};break;case"saveRow":t={left:320,top:-879};break;case"tabletPreview":t={left:50,top:75};break;case"desktopPreview":t={left:100,top:75};break;case"editHistory":t={left:320,top:-879};break;case"savePage":t={left:-125,top:95}}return t}},{key:"nextTourContent",value:function(e){var t=this,n=c()(this.productTourLocalization,[e,"endButtonText"],this.productTourLocalization.endButtonTextDefault),o=c()(this.productTourLocalization,[e,"skipButtonText"],this.productTourLocalization.skipButtonTextDefault),i=c()(this.productTourLocalization,[e,"title"],""),r=c()(this.productTourLocalization,[e,"description"],!1);setTimeout(function(){t.getActiveElementPosition(e)},200);var s={__html:r};r=a.a.createElement("div",{className:"et-fb-product-tour-text",dangerouslySetInnerHTML:s}),this.setState({tourElement:e,modalContent:r,modalTitle:i,endButtonText:n,skipButtonText:o}),setTimeout(this.maybeScroll,1e3)}},{key:"nextTip",value:function(e){var t=this,n=this.state.tourElement,o=c()(this.stepsSequence,S()(this.stepsSequence,n)+1,"");if(e)if(f()(this.skipToArray,n)){var a=this.skipToArray[n];if(-1===S()(this.stepsSequence,a))for(;-1===S()(this.stepsSequence,a);)a=f()(this.skipToArray,a)?this.skipToArray[a]:o;o=a}else if(P()(["selectLayoutPack","loadLayoutItem"],n)){var i="loadLayoutItem"===n?"button:last-child":"";R.default.$appWindow().trigger("et-fb-product-tour-skip",i)}else{(0===R.default.$appWindow(".et-fb-product-tour-element").length?R.default.$topWindow(".et-fb-product-tour-element"):R.default.$appWindow(".et-fb-product-tour-element")).trigger("click"),"pageSettings"===n&&G.b.settingsBarToggleStatus("active")}var r=!1,s=!1,l=[];switch("loadLayoutItem"===n&&G.b.settingsBarToggleStatus("inactive"),o){case"loadLayout":R.default.$topWindow("#et-boc #et-fb-app").find(".et-fb-product-tour-overlay").remove(),G.b.settingsBarToggleStatus("active");break;case"selectLayoutPack":case"loadLayoutItem":r=!0,l.push(o);break;case"moveModule":case"rowOptions":case"rightClickCopy":"not_set"===j.a.getProductTourModule()&&j.a.setProductTourModule(),"moveModule"!==n||e||l.push(o);break;case"savePage":$&&R.default.$topWindow("#publishing-action").addClass("et-fb-product-tour-element");break;case"finish":$&&R.default.$topWindow("#publishing-action").removeClass("et-fb-product-tour-element"),R.default.$topWindow("#et-boc #et-fb-app").append('<div class="et-core-modal-overlay et-fb-product-tour-overlay et-core-active"></div>')}if(P()(["moveModule","loadLayoutItem"],n)&&(r=!0,s=!0,"loadLayoutItem"===n&&l.push("addSection")),"start"===n&&"loadLayout"!==o&&(l.push("predefined_layouts"),r=!0,"pageSettings"===o&&(s=!0),this.setState({autoLoadDemo:!0}),j.a.activateGlobalPreloader(),j.a.emitPreloaderInProcess(),this.autoloadLayout(!0)),this.setState({isActive:!1}),s||setTimeout(function(){G.b.setActiveTourElement(o)},0),r)this.waitProductTourElement(l,o,s);else{var u=P()(["rightClickCopy","rightClickPaste"],n)?800:500;setTimeout(function(){t.nextTourContent(o)},u)}}},{key:"waitProductTourElement",value:function(e,t,n){var o=this,a=j.a.getProductTourElementReady();if(b()(e,m()(a,e)))return n&&G.b.setActiveTourElement(t),void this.nextTourContent(t);setTimeout(function(){o.waitProductTourElement(e,t,n)},1e3)}},{key:"autoloadLayout",value:function(e){if((this.state.autoLoadDemo||e)&&!v()(results)){var t=results.pop();this.setState({autoLoadDemo:!1}),t[0].savedShortcode=t[0].shortcode,j.a.loadSavedLayoutFromComponent(t[0],!0),setTimeout(function(){j.a.replacePageContent(),j.a.setProductTourElementReady("predefined_layouts"),R.default.$topWindow("#et-boc #et-fb-app").find(".et-fb-product-tour-overlay").remove()},1e3)}}},{key:"onClose",value:function(){G.b.endProductTour();(R.default.$topWindow("#et-boc #et-fb-app").find(".et-fb-product-tour-overlay").remove(),e(".et_search_form_container").length>0&&e(".et_search_form_container").removeClass("et_pb_is_animating"),e(".et_header_style_slide .et_slide_in_menu_container").length>0)&&(e(".et_header_style_slide .et_slide_in_menu_container").removeClass("et_pb_slide_menu_opened"),V.removeClass("et_pb_slide_menu_active"),e("#main-header").off("click",".et_toggle_slide_menu",this.disableSlideMenu));e(".et_header_style_fullscreen .et_slide_in_menu_container").length>0&&e("#page-container").off("click",".et_toggle_fullscreen_menu",this.disableFullscreenMenu),this.setState({isActive:!1}),V.off("click mouseup mousedown ondragstart","*",this.isTourButtonClicked)}},{key:"skipTip",value:function(){this.nextTip(!0)}},{key:"render",value:function(){if(!this.state.isActive)return!1;var e="finish"===this.state.tourElement?"":a.a.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore et-core-modal-action-secondary",onMouseUp:this.skipTip},this.state.skipButtonText),t=a.a.createElement("div",{className:"et-fb-tour-buttons"},a.a.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore",onClick:this.onClose},this.state.endButtonText),e),n=!P()(this.absolutelyPositionedElements,this.state.tourElement),o={"et-fb-tooltip--no-arrow":!0,"et-fb-tooltip--product-tour":!0,"et-fb-tooltip--product-tour--centered":"start"===this.state.tourElement||"finish"===this.state.tourElement,"et-fb-tooltip--product-tour--finish":"finish"===this.state.tourElement},i="start"===this.state.tourElement||"finish"===this.state.tourElement,r=0===R.default.$appWindow(".et-fb-product-tour-element").length;return a.a.createElement(s.default,{active:this.state.isActive,actionType:"custom_content",tooltipTitle:this.state.modalTitle,_closeFunction:this.onClose,classNames:o,modalPosition:this.state.modalPosition,forceFixedPosition:n,modalWidth:340,enableContextMenu:!0,ignorePosition:i,movable:!i,buttons:t,renderInsideApp:!r&&!$},a.a.createElement("div",null,this.state.modalContent))}}]),n}();z.propTypes=W,z.defaultProps={active:!1},t.default=z}.call(this,n(30))},1254:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(16),r=n.n(i),s=n(14),l=n.n(s),u=n(75),d=n.n(u),c=n(73),p=n.n(c),f=n(2),h=n.n(f),m=n(28),_=n.n(m),b=n(9),g=n.n(b),v=n(7),y=n.n(v),k=n(50),E=n.n(k),S=n(37),w=n.n(S),C=n(5),T=n.n(C),M=n(27),O=n.n(M),F=n(265),A=n.n(F),N=n(255),L=n.n(N),P=n(99),I=n.n(P),D=n(306),x=n.n(D),B=n(3),j=n(0),G=n(11),R=n(31),H=n(8),W=n(21),V=n(409),U=n(122),$=n(227),z=n(45),K=(n(1236),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=ETBuilderBackend.i18n,Q=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),o=["clicks","reads","bounces","engagements","conversions","shortcode_conversions"],a=ETBuilderBackend.abTesting.refresh_interval_duration,i=x()(o,A()(o.length,function(){return a}));return t.tabList=o,t.subjects=B.a.abGetAllSubjects(),t.hasConversion=B.a.abHasConversion(h()(B.a.abGetAllGoals(),"type")),t.hasShortcodeConversions=j.default.isOn(B.a.getPageSetting("et_pb_enable_shortcode_tracking")),t.timeFilterList=["day","week","month","all"],t.renderedPieChart={},t.renderedLineChart={},t.onMountInit=!1,t.state={durations:i,tab:"clicks",loading:!1,reportData:q({},a,B.a.abGetReportData(a)),excludedSubjects:{}},t._onABTestingChange=t._onABTestingChange.bind(t),t._handleTabSwitch=t._handleTabSwitch.bind(t),t._handleFilterSubjectChange=t._handleFilterSubjectChange.bind(t),t._handleFilterTimeChange=t._handleFilterTimeChange.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),K(n,[{key:"componentDidMount",value:function(){this.unmounted=!1,B.a.abAddChangeListener(this._onABTestingChange)}},{key:"componentDidUpdate",value:function(){this.initUI()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0,B.a.abRemoveChangeListener(this._onABTestingChange)}},{key:"initUI",value:function(){var t=e(r.a.findDOMNode(this)),n=this.getCurrentTab(),o=t.find("#et-fb-ab-testing-report-table-"+n);o.tablesorter(),o.trigger("update"),o.find(".headerSortUp").length||o.find(".headerSortDown").length||o.find("thead tr:first th:first").trigger("click");var a=this.getPieChartData(),i=t.find("#et-fb-ab-testing-report-pie-"+n);E()(h()(this,["renderedPieChart",n,"destroy"]))&&this.renderedPieChart[n].destroy(),!y()(a)&&i.length&&(this.renderedPieChart[n]=new Chart(i.get(0).getContext("2d")).Pie(a,{animationEasing:"easeInCubic",animationSteps:50,tooltipTemplate:"<%if (label){%><%=label%><%}%>"}));var s=this.getLineChartData(),l=t.find("#et-fb-ab-testing-report-chart-"+n);E()(h()(this,["renderedLineChart",n,"destroy"]))&&this.renderedLineChart[n].destroy(),_()(s,"datasets")&&y()(s.datasets)&&(s.datasets=[{}]),T()(l.get(0))||(this.renderedLineChart[n]=new Chart(l.get(0).getContext("2d")).Line(s,{scaleFontSize:13,scaleFontColor:"#a1a9b1",scaleLabel:"<%=value%>%",scaleGridLineWidth:2,scaleLineWidth:2,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>%",multiTooltipTemplate:"<%= value %>%",datasetStrokeWidth:4,pointDotStrokeWidth:2,pointDotRadius:7}))}},{key:"_handleTabSwitch",value:function(e){var t=this,n=d()(O()(this.tabList,function(e){return!("conversions"===e&&!t.hasConversion)&&(!("shortcode_conversions"===e&&!t.hasShortcodeConversions)&&e)}));_()(n,e)&&this.setState({tab:h()(n,e)})}},{key:"_handleFilterSubjectChange",value:function(e){e.preventDefault();var t=h()(this,"state.excludedSubjects",{}),n=e.target.getAttribute("data-tab-name"),o=e.target.getAttribute("data-subject-id");_()(t,[n,o])?delete t[n][o]:w()(h()(t,[n]))?t[n][o]=o:t[n]=q({},o,o),this.setState({excludedSubjects:t})}},{key:"_handleFilterTimeChange",value:function(e){e.preventDefault();var t=h()(this,["state","tab"]),n=h()(this,["state","durations"]),o=e.target.getAttribute("data-time");n[t]=o,this.setState({durations:n})}},{key:"_onABTestingChange",value:function(){var e=this.getCurrentDuration(),t=h()(this,"state.reportData");t[e]=B.a.abGetReportData(e),this.unmounted||this.setState({reportData:t})}},{key:"isSubjectDisabled",value:function(e,t){var n=I()(h()(this.state,["excludedSubjects",e],[]));return _()(t,"attrs.ab_subject_id")&&g()(n,h()(t,"attrs.ab_subject_id"))}},{key:"getCurrentTab",value:function(){return h()(this,"state.tab")}},{key:"getCurrentDuration",value:function(){return h()(this,["state","durations",this.getCurrentTab()])}},{key:"getCurrentData",value:function(){return h()(this,["state","reportData",h()(this,["state","durations",this.getCurrentTab()])])}},{key:"getReportData",value:function(e){if(_()(this,["state","reportData",e]))return h()(this,["state","reportData",e]);var t=h()(this,"state.reportData");return t[e]=B.a.abGetReportData(e),this.setState({reportData:t}),B.a.abGetReportData(e)}},{key:"getRenderedSubjects",value:function(){var e=this,t=h()(e,"state.tab");return p()(this.subjects,function(n){return!e.isSubjectDisabled(t,n)})}},{key:"getLineChartData",value:function(){var e=this.getCurrentTab(),t=this.getReportData(this.getCurrentDuration()),n=h()(t,"dates");return!T()(n)&&{labels:n,datasets:O()(this.getRenderedSubjects(),function(n){var o=h()(n,"attrs.ab_subject_id"),a=h()(t,["subjects_totals","subject_"+o,"color"]),i=B.a.abGetSubjectLabel(n);return{data:I()(h()(t,["subjects_analysis","subject_"+o,e])),fillColor:"transparent",label:i,pointColor:a,pointStrokeColor:"#fff",strokeColor:a,subject_id:o}})}}},{key:"getPieChartData",value:function(){var e=h()(this,["state","reportData",this.getCurrentDuration(),"subjects_totals"]),t=h()(this,"state.tab");return T()(e)?[]:d()(O()(this.getRenderedSubjects(),function(n){var o="subject_"+h()(n,"attrs.ab_subject_id");return{value:h()(e,[o,t]),color:h()(e,[o,"color"]),label:B.a.abGetSubjectLabel(n)}}))}},{key:"headerButtons",value:function(){return[a.a.createElement(R.a,{block:!0,buttonName:H.a.AB_CLOSE_REPORT,_onClick:function(){G.b.abCloseReport()}},a.a.createElement(W.a,{icon:"close",color:"#FFFFFF"}))]}},{key:"renderSubjectFilter",value:function(e){var t=this;return O()(this.subjects,function(n,o){var i="tab-"+e+"-filter-subject-"+o,r=t.isSubjectDisabled(e,n),s=r?z.a.disabledSubject:B.a.abGetSubjectRank(n,"color");return a.a.createElement("li",{key:i},a.a.createElement("button",{"data-subject-id":h()(n,"attrs.ab_subject_id"),"data-tab-name":e,style:{backgroundColor:s},className:l()({"et-fb-ab-testing-filter-item-subject":!0,"et-fb-ab-testing-filter-item-subject--disabled":r}),onClick:t._handleFilterSubjectChange},B.a.abGetSubjectLabel(n)))})}},{key:"renderTimeFilter",value:function(e){var t=this;return O()(t.timeFilterList,function(n,o){var i="tab-"+e+"-filter-time-"+o,r=n===h()(t,["state","durations",e]);return a.a.createElement("li",{key:i},a.a.createElement("button",{className:l()({"et-fb-ab-testing-filter-item-time":!0,"et-fb-ab-testing-filter-item-time--active":r}),"data-time":n,onClick:t._handleFilterTimeChange},h()(J,["abTesting","reportFilterTime",n])))})}},{key:"renderTabPanel",value:function(e){var t=this.getCurrentData(),n="isFetchingData"===t,o=!t||y()(h()(t,"subjects_totals")),i=h()(this,["state","durations",e]),r=a.a.createElement("canvas",{id:"et-fb-ab-testing-report-chart-"+e,className:"et-fb-ab-testing-report-chart"});return a.a.createElement($.c,{key:"abTesting-report-panel-"+e},a.a.createElement("div",{className:"et-fb-form"},a.a.createElement(U.a,{isLoading:n},o?a.a.createElement("div",{className:"et-fb-ab-testing-no-report"},a.a.createElement("object",{type:"image/svg+xml",data:ETBuilderBackend.images_uri+"/stats-no-data.svg"}),a.a.createElement("h2",null,h()(J,"abTesting.no_report.title")),a.a.createElement("p",null,h()(J,"abTesting.no_report.desc"))):a.a.createElement("div",null,a.a.createElement("ul",{className:"et-fb-ab-testing-filter--time"},this.renderTimeFilter(e),a.a.createElement("li",null,a.a.createElement(R.a,{className:"et-fb-ab-testing-report-refresh",buttonName:H.a.AB_REFRESH_REPORT,_onClick:function(){G.b.abRefreshReport(i)},tooltip:h()(J,"abTesting.reportRefreshTooltip")},a.a.createElement(W.a,{icon:"undo",color:z.a.abTestingTimeFilter})))),a.a.createElement("ul",{className:"et-fb-ab-testing-filter--subjects"},this.renderSubjectFilter(e)),r,this.renderTable(e),this.renderPieChart(e)))))}},{key:"renderTable",value:function(e){var t=this,n=h()(this,["state","durations",e]),o=B.a.abGetAnalysisFormula(e),i=h()(o,"denominator"),r=h()(o,"numerator"),s=h()(J,["abTesting","view_stats_thead_titles",e]),l=0,u=0,d=0,c=O()(this.getRenderedSubjects(),function(o){var s=h()(o,"attrs.ab_subject_id");if(T()(s))return!1;var c="subject_"+s,p=B.a.abGetSubjectLabel(o),f=h()(t,["state","reportData",n,"subjects_totals",c,i],0),m=h()(t,["state","reportData",n,"subjects_totals",c,r],0),_=h()(t,["state","reportData",n,"subjects_totals",c,e],0);return l+=parseFloat(f),u+=parseFloat(m),d+=parseFloat(_),a.a.createElement("tr",{key:"abTesting-row-"+e+"-"+n+"-"+s},a.a.createElement("td",null,s),a.a.createElement("td",null,p),a.a.createElement("td",null,f),a.a.createElement("td",null,m),a.a.createElement("td",null,_+"%"))}),p=d/c.length,f=(""+p).split(".").length>1?2:0,m=!y()(this.getRenderedSubjects())&&a.a.createElement("tr",null,a.a.createElement("td",{colSpan:"2"},h()(J,["abTesting","reportTotal"])),a.a.createElement("td",null,l),a.a.createElement("td",null,u),a.a.createElement("td",null,p.toFixed(f)+"%"));return a.a.createElement("div",{className:"et-fb-ab-testing-report-table--wrapper"},a.a.createElement("table",{id:"et-fb-ab-testing-report-table-"+e,className:"et-fb-ab-testing-report-table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,s[0]),a.a.createElement("th",null,s[1]),a.a.createElement("th",null,s[2]),a.a.createElement("th",null,s[3]),a.a.createElement("th",null,s[4]))),a.a.createElement("tbody",null,c),a.a.createElement("tfoot",null,m)))}},{key:"renderPieChart",value:function(e){var t=this,n=O()(this.subjects,function(n,o){var i=t.isSubjectDisabled(t.state.tab,n),r=i?"#E1E4E9":B.a.abGetSubjectRank(n,"color"),s=i?{color:"#E1E4E9"}:{};return a.a.createElement("li",{key:e+"-legend-"+o},a.a.createElement("span",{style:{backgroundColor:r}}),a.a.createElement("a",{href:"#subject",style:s,"data-subject-id":h()(n,"attrs.ab_subject_id"),"data-tab-name":e,onClick:t._handleFilterSubjectChange},B.a.abGetSubjectLabel(n)))}),o=y()(h()(this.getLineChartData(),"datasets"))?a.a.createElement("div",{className:"et-fb-ab-testing-report-chart"}):a.a.createElement("canvas",{id:"et-fb-ab-testing-report-pie-"+e,className:"et-fb-ab-testing-report-pie",width:"200",height:"200"});return a.a.createElement("div",{className:"et-fb-ab-testing-report-pie--wrapper"},o,a.a.createElement("ul",{className:"et-fb-ab-testing-report-pie--legend"},n))}},{key:"render",value:function(){var e=this,t=this,n=O()(this.tabList,function(e){return!("conversions"===e&&!t.hasConversion)&&(!("shortcode_conversions"===e&&!t.hasShortcodeConversions)&&a.a.createElement($.a,{key:"abTesting-report-nav-"+e},h()(J,["abTesting","reportTabNavs",e])))}),o=O()(this.tabList,function(n){return!("conversions"===n&&!t.hasConversion)&&(!("shortcode_conversions"===n&&!t.hasShortcodeConversions)&&e.renderTabPanel(n))});return a.a.createElement(V.a,{fullscreen:!0,headerButtons:this.headerButtons(),footerButtons:[a.a.createElement(R.a,{block:!0,info:!0,buttonName:H.a.BUTTON_AB_DISABLE},L()(h()(J,"abTesting.reportEndTestButton")))],label:h()(J,"abTesting.reportTitle"),onRest:function(){t.onMountInit||(t.initUI(),t.onMountInit=!0)}},a.a.createElement($.d,{selectedIndex:0,onSelect:this._handleTabSwitch},a.a.createElement($.b,{disableScroll:!1},n),o))}}]),n}();t.default=Q}.call(this,n(30))},1255:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(10),l=n.n(s),u=n(19),d=n.n(u),c=n(48),p=n.n(c),f=n(5),h=n.n(f),m=n(93),_=n.n(m),b=(n(34),n(3)),g=n(8),v=n(11),y=n(1239),k=n(31),E=n(21),S=n(409),w=n(227),C=n(64),T=n(0),M=(n(1237),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var F=ETBuilderBackend.i18n.help,A={isVisible:r.a.bool,onModalChange:r.a.func,modalMoving:r.a.bool},N=.5625;var L=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t._checkActiveModals=function(){return t.handleShortcutsTimeout=setTimeout(t._setHandleShortcuts)},t._setHandleShortcuts=function(){b.a.getActiveModule()?(T.default.appWindow().removeEventListener("keydown",t._handleShortcuts),T.default.topWindow().removeEventListener("keydown",t._handleShortcuts)):(T.default.appWindow().addEventListener("keydown",t._handleShortcuts),T.default.topWindow().addEventListener("keydown",t._handleShortcuts,{useCapture:!0}))},t.isOSX=-1!==navigator.userAgent.indexOf("Mac OS X");var o=400*N,a=Object.keys(ETBuilderBackend.i18n.videos[t.props.currentVideoList]).length;return t.state={index:null,height:50*a+116+o,width:400,position:{x:t.props.position.x,y:t.props.position.y}},t._updateSpecificModal=t._updateSpecificModal.bind(t),t._handleMouseEnter=t._handleMouseEnter.bind(t),t._handleMouseLeave=t._handleMouseLeave.bind(t),t._handleShortcuts=t._handleShortcuts.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),O(n,[{key:"componentWillMount",value:function(){var e=this;setTimeout(function(){return e._updateSpecificModal({width:400,x:e.props.position.x,y:e.props.position.y})},0)}},{key:"componentDidMount",value:function(){this._setHandleShortcuts(),b.a.addModuleActiveListener(this._checkActiveModals),T.default.topDocument().addEventListener("keydown",this._handleShortcuts)}},{key:"componentWillUnmount",value:function(){T.default.topDocument().removeEventListener("keydown",this._handleShortcuts)}},{key:"_getHeaderButtons",value:function(){return[a.a.createElement(k.a,{primary:!0,buttonName:g.a.MODAL_HELP_BUTTON_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},a.a.createElement(E.a,{icon:"close",color:"#FFFFFF"}))]}},{key:"_updateSpecificModal",value:function(e){v.b.setHelpModal({width:e.width,position:{x:e.x,y:e.y}}),this.setState({width:e.width})}},{key:"_handleMouseEnter",value:function(){this.setState({hover:!0})}},{key:"_handleMouseLeave",value:function(){this.setState({hover:!1})}},{key:"_handleShortcuts",value:function(t){var n=t.keyCode,o=t.metaKey;if((27===n||13===n&&!o)&&!e(":focus").length)return v.b.buttonClick({props:{buttonName:g.a.MODAL_HELP_BUTTON_CLOSE}}),!1}},{key:"renderKdb",value:function(e,t){var n=e;return"super"===n&&(n=this.isOSX?"cmd":"ctrl"),a.a.createElement("kbd",{key:"shortcut-item-kbd-"+t,className:"key-"+n},n)}},{key:"renderShortcutSet",value:function(e,t){var n=this,o=[];return l()(e,function(i,r){p()(i)?(o.push(n.renderKdb(i,t+"-"+r)),r<e.length-1&&o.push(a.a.createElement("span",{className:"et-fb-shortcut-separator-combination",key:"shortcut-set-separator-combination"+t+"-"+r},"+"))):l()(i,function(e,s){o.push(n.renderKdb(e,t+"-"+r+"-"+s)),s<i.length-1&&o.push(a.a.createElement("span",{className:"et-fb-shortcut-separator-optional",key:"shortcut-set-separator-optional-"+t+"-"+r+"-"+s},"/"))})}),o}},{key:"renderShortcutSets",value:function(e,t){var n=this;return d()(e)?this.renderShortcutSet(e,t):_()(e).map(function(e,o){var i=t+"-"+o;return a.a.createElement("div",{className:"et-fb-shortcut-item-set",key:"shortcut-item-set-"+i},n.renderShortcutSet(e,i))})}},{key:"renderShortcutList",value:function(){var e=this,t=ETBuilderBackend.i18n.help.shortcuts;return _()(t).map(function(t,n){return _()(t).map(function(t,o){return h()(t.title)?a.a.createElement("div",{className:"et-fb-shortcut-item",key:"shortcut-item-"+n+"-"+o},a.a.createElement("div",{className:"et-fb-shortcut-kbd"},e.renderShortcutSets(t.kbd,n+"-"+o)),a.a.createElement("div",{className:"et-fb-shortcut-desc"},a.a.createElement("p",null,t.desc))):a.a.createElement("h4",{className:"et-fb-shortcut-subtitle",key:"shortcut-item-"+n},t.title)})})}},{key:"render",value:function(){var e=this.props,t=e.currentVideo,n=e.currentVideoList,o=e.helpModalState,i=e.onModalChange,r=e.videoOverlayStatus,s=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["currentVideo","currentVideoList","helpModalState","onModalChange","videoOverlayStatus"]),l=this.state,u=l.height,d=l.hover,c=l.position,p=l.width,f=this.props.activeTab||0;return a.a.createElement(S.a,M({className:"et-fb-modal--help",headerButtons:this._getHeaderButtons(),label:F.modal.title,measurement:{height:u,width:400},onModalChange:i,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,updateSpecificModal:this._updateSpecificModal},s),a.a.createElement(w.d,{selectedIndex:f},a.a.createElement(w.b,null,a.a.createElement(w.a,null,F.modal.tabs.gettingStarted),a.a.createElement(w.a,null,F.modal.tabs.shortcut)),a.a.createElement(w.c,null,a.a.createElement("div",{className:"et-fb-form"},a.a.createElement(C.a,null,a.a.createElement(y.a,{currentVideo:t,currentVideoList:n,helpModalState:o,modalHover:d,modalPosition:c,modalWidth:p,videoOverlayStatus:r,modalMoving:this.props.modalMoving,animate:this.props.options.animate})))),a.a.createElement(w.c,null,a.a.createElement("div",{className:"et-fb-form"},a.a.createElement(C.a,null,this.renderShortcutList())))))}}]),n}();L.propTypes=A,t.default=L}.call(this,n(30))},1256:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(16),r=n.n(i),s=n(4),l=n.n(s),u=n(14),d=n.n(u),c=n(3),p=n(738),f=n.n(p),h=n(0),m=(n(1240),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var _={active:l.a.bool},b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),m(t,[{key:"componentDidMount",value:function(){h.default.$appWindow().trigger("et-core-modal-active")}},{key:"renderDescription",value:function(){var e=c.a.getAlertModalSetting("description");return h.default.hasValue(e)?a.a.createElement("div",{className:"et-core-modal-content",dangerouslySetInnerHTML:{__html:f.a.wpautop(e)}}):""}},{key:"renderButton",value:function(e,t,n){var o=d()({"et-core-modal-action":!0},n);return a.a.createElement("a",{href:"#button",className:o,onClick:t},e)}},{key:"render",value:function(){var e=h.default.replaceCodeContentEntities(c.a.getAlertModalSetting("title")),t=c.a.getAlertModalSetting("buttonCancelLabel"),n=t?this.renderButton(t,c.a.getAlertModalSetting("onClickCancelButton"),{"et-core-modal-action-secondary":!0}):"",o=c.a.getAlertModalSetting("buttonProceedLabel"),i=o?this.renderButton(o,c.a.getAlertModalSetting("onClickProceedButton"),{"et-core-modal-action-restore":!0}):"",s=t?a.a.createElement("a",{href:"#close",className:"et-core-modal-close",onClick:c.a.getAlertModalSetting("onClickCancelButton")}):"",l=["et-core-modal-overlay","et-core-active","et-fb-modal-alert"];o&&t&&l.push("et-core-modal-two-buttons");var u=a.a.createElement("div",{className:d()(l),onClick:c.a.getAlertModalSetting("onClickCancelButton")},a.a.createElement("div",{className:"et-core-modal"},a.a.createElement("div",{className:"et-fb-modal-overlay-mousetrap"}),a.a.createElement("div",{className:"et-core-modal-header"},a.a.createElement("h3",{className:"et-core-modal-title"},e),s),this.renderDescription(),a.a.createElement("div",{className:"et_pb_prompt_buttons"},n,i)));return r.a.createPortal(u,h.default.$topWindow("#et-boc #et-fb-app")[0])}}]),t}();b.propTypes=_,b.defaultProps={active:!1},t.default=b},1257:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(14),r=n.n(i),s=n(74),l=n(12),u=n.n(l),d=n(53),c=n.n(d),p=n(10),f=n.n(p),h=n(2),m=n.n(h),_=n(28),b=n.n(_),g=n(82),v=n.n(g),y=n(9),k=n.n(y),E=n(19),S=n.n(E),w=n(37),C=n.n(w),T=n(7),M=n.n(T),O=n(5),F=n.n(O),A=(n(48),n(26)),N=n.n(A),L=n(100),P=n.n(L),I=n(80),D=n.n(I),x=n(34),B=n.n(x),j=n(76),G=n.n(j),R=n(65),H=n.n(R),W=n(175),V=n.n(W),U=n(25),$=n.n(U),z=n(41),K=n.n(z),q=n(49),J=n.n(q),Q=n(31),X=n(21),Y=n(242),Z=n(64),ee=n(409),te=n(227),ne=n(131),oe=n(11),ae=n(3),ie=n(734),re=n(0),se=(n(1241),n(410)),le=n(22),ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},de=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=new ie.a,fe=new s.AllHtmlEntities,he=ETBuilderBackend.i18n.modals.extend_styles,me=ETBuilderBackend.i18n.fonts,_e=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaultStates={to:n.getSelectedModule("props.is_module_child",!1)&&m()(e,"element")?"module":n.getSelectedModuleType(),throughout:"page"},n.state=u()({buttonState:!1},n.defaultStates),n.slug="extend-styles",n.onClose=n.onClose.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseEnterGroup=n.onMouseEnterGroup.bind(n),n.onMouseLeaveGroup=n.onMouseLeaveGroup.bind(n),n.onClickHelp=n.onClickHelp.bind(n),n.onChangeField=n.onChangeField.bind(n),n.onExtendStyles=n.onExtendStyles.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.PureComponent),de(t,[{key:"componentDidMount",value:function(){pe.reset(),Object(re.appWindow)().addEventListener("keydown",this.onKeyDown),Object(re.topWindow)().addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){pe.reset(),Object(re.appWindow)().removeEventListener("keydown",this.onKeyDown),Object(re.topWindow)().removeEventListener("keydown",this.onKeyDown)}},{key:"onClose",value:function(){var e=m()(this.props,"source"),t=m()(this.props,"element"),n=m()(this.props,"module");oe.b.extendStylesModalClose(e,t,n)}},{key:"onKeyDown",value:function(e){27===e.keyCode&&this.onClose()}},{key:"onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"onMouseLeaveGroup",value:function(){this.setState({hoveredGroup:!1})}},{key:"onClickHelp",value:function(e){this.setState({activeDescription:this.state.activeDescription!==e&&e})}},{key:"onChangeField",value:function(e,t){m()(this.state,e)!==t&&b()(this.defaultStates,e)&&this.setState(ce({},e,t))}},{key:"onExtendStyles",value:function(){var e=this;this.setState({buttonState:"loading"});var t=function(t,n,o,a){var i=m()(t,"name"),r=m()(n,"attrs."+i);if("font"!==m()(t,"type")||"option"!==e.getSelectedSource())return r;var s=r.split("|"),l=m()(o,"name"),u=m()(a,"attrs."+l,"||||||||").split("|"),d=m()({font:[0],weight:[1],style:[2,3,4,5,6],line_style:[7],line_color:[8]},e.getSelectedField("subField","font"),[]);return f()(d,function(e){u[e]=s[e]}),u.join("|")};new Promise(function(n){setTimeout(function(){var o=e.getSelectedModule("props"),a=e.getSelectedModuleType(),i=ae.a.getSectionsFlattened().filter(function(t){var n=t.type.replace("_inner","");if("module"!==e.state.to){if(M()(t.child_slug)&&!t.is_module_child&&n!==e.state.to)return!1;if(!M()(t.child_slug)&&t.child_slug!==e.state.to&&n!==e.state.to)return!1;if(t.is_module_child&&n!==m()(ETBuilderBackend.moduleChildSlugs,e.state.to)&&n!==e.state.to)return!1}return("module"!==e.state.to||e.getModuleStructure(n)===e.state.to)&&(t.address!==e.getSelectedModule("props.address")&&(m()(t,"parent_address")!==e.getSelectedModule("props.address")&&(!!e.isModuleAddressAffected(t)&&!e.isModuleLocked(t))))});if(M()(i))return n(!1);var r=H()(ae.a.getModuleFields(a),function(t){return("general"!==t.tab_slug||"background"===t.toggle_slug)&&(("css"!==t.tab_slug||"custom_css"===t.toggle_slug)&&(("options_group"!==e.getSelectedSource()||e.getSelectedElement("payload.toggleId")===t.toggle_slug)&&(("options_group"!==e.getSelectedSource()||e.getSelectedElement("payload.toggleGroupId")===t.tab_slug)&&!("option"===e.getSelectedSource()&&!k()(e.getSelectedElement("payload.option"),t.name)))))}),s=[];M()(r)||f()(i,function(e){var n={},i=m()(e,"type","");i===a?f()(r,function(a){n[a.name]=t(a,o,a,e)}):f()(r,function(r){var s={};if(pe.has("targetFields",r.name,a,i))s=pe.get("targetFields",r.name,a,i);else{var l={moduleType:a,field:r};s=H()(ae.a.getModuleFields(i),function(e){var t=u()({},{moduleType:i,field:e});return ae.a.getModuleFieldsMapping(l,t)}),pe.set(s,"targetFields",r.name,a,i)}M()(s)||f()(s,function(a){n[a.name]=t(r,o,a,e)})}),M()(n)||s.push(u()({},e,{extendStylesData:n}))});var l=s.filter(function(t){return!(e.getSelectedModule("props.is_module_child",!1)&&!M()(t.child_slug)&&!M()(c()(s,{parent_address:t.address})))&&!(!M()(e.getSelectedModule("props.child_slug",""))&&t.is_module_child&&!M()(c()(s,{address:t.parent_address})))});return M()(l)?n(!1):(f()(l,function(e){oe.b.extendStylesModalUpdate(e.address,e.extendStylesData)}),n(!0))},0)}).then(function(){e.onClose()})}},{key:"getExtendStylesValue",value:function(e,t,n){var o=this.getSelectedModule("props.attrs."+e.name);if("font"!==m()(e,"type")||"option"!==this.getSelectedSource())return o;var a=this.getSelectedField("subField","font"),i=m()(n,"attrs."+t,"||||||||").split("|"),r=o.split("|");return f()(m()({font:[0],weight:[1],style:[2,3,4,5,6],line_style:[7],line_color:[8]},a,[]),function(e){i[e]=r[e]}),i.join("|")}},{key:"isModuleAddressAffected",value:function(e){if("page"===this.state.throughout)return!0;var t=this.getModuleAncestorAddress(this.state.throughout,this.getSelectedModule("props")).split("."),n=m()(e,"address").split("."),o=!0;return f()(t,function(e,t){if(m()(n,t)!==e&&(o=!1),!o)return!1}),o}},{key:"isModuleLocked",value:function(e){var t=m()(e,"address");if(pe.has("isModuleLocked",t))return pe.get("isModuleLocked",t);var n=Object(re.isOn)(m()(e,"attrs.locked"))||m()(e,"lockedParent");if(!n){var o=t.split("."),a=N()(o).map(function(e){return V()(o,parseInt(e,10)+1)});f()(a,function(e){var t=c()(ae.a.getSectionsFlattened(),{address:e.join(".")});if(Object(re.isOn)(m()(t,"attrs.locked"))||m()(t,"lockedParent"))return n=!0,!1})}return pe.set(n,"isModuleLocked",t)}},{key:"getSelectedSource",value:function(){return m()(this.props,"source")}},{key:"getSelectedElement",value:function(e,t){var n=m()(this.props,"element");return F()(e)?n:m()(n,e,t)}},{key:"getSelectedModule",value:function(e,t){var n=m()(this.props,"module");return F()(e)?n:m()(n,e,t)}},{key:"getSelectedModuleType",value:function(){return this.getSelectedModule("props.type")}},{key:"getSelectedModuleTitle",value:function(){var e=this.getSelectedModuleType();return pe.has("getSelectedModuleTitle",e)?pe.get("getSelectedModuleTitle",e):pe.set(ae.a.getModuleTitle(e),"getSelectedModuleTitle",e)}},{key:"getSelectedModuleTitlePlural",value:function(){var e=this.getSelectedModuleType();return pe.has("getSelectedModuleTitlePlural",e)?pe.get("getSelectedModuleTitlePlural",e):pe.set(ae.a.getModuleTitlePlural(e),"getSelectedModuleTitlePlural",e)}},{key:"getSelectedModuleStructure",value:function(){var e=this.getSelectedModuleType();return pe.has("getSelectedModuleStructure",e)?pe.get("getSelectedModuleStructure",e):pe.set(this.getModuleStructure(e),"getSelectedModuleStructure",e)}},{key:"getSelectedField",value:function(e,t){var n=this.getSelectedElement("elementId"),o=this.getSelectedElement("payload.toggleGroupId"),a=this.getSelectedElement("payload.toggleId"),i=this.getSelectedModuleType(),r=c()(ae.a.getModuleFields(i),{name:n,tab_slug:o,toggle_slug:a}),s=u()({},{name:n,type:this.getSelectedElement("payload.option_family"),label:this.getSelectedElement("payload.optionTitle"),subField:this.getSelectedElement("subElementId")},r);return F()(e)?s:m()(s,e,t)}},{key:"getSelectedFieldValue",value:function(){return this.getFieldValue(m()(this.getSelectedField(),"name"),this.getSelectedField(),this.getSelectedModule("props"))}},{key:"getModuleStructure",value:function(e){if(pe.has("getModuleStructure",e))return pe.get("getModuleStructure",e);switch(e){case"et_pb_section":return pe.set("section","getModuleStructure",e);case"et_pb_row":case"et_pb_row_inner":return pe.set("row","getModuleStructure",e);case"et_pb_column":case"et_pb_column_inner":return pe.set("column","getModuleStructure",e);default:return pe.set("module","getModuleStructure",e)}}},{key:"getModuleSectionType",value:function(e){var t=v()(m()(e,"address").split(".")),n=c()(ae.a.getSections(),{address:t});return!!n&&(Object(re.isOn)(m()(n,"attrs.fullwidth"))?"fullwidth":Object(re.isOn)(m()(n,"attrs.specialty"))?"specialty":"regular")}},{key:"getModuleAncestorAddress",value:function(e,t){switch(this.getModuleSectionType(t)){case"fullwidth":return this.getModuleAncestorAddressFullwidth(e,t);case"specialty":return this.getModuleAncestorAddressSpecialty(e,t);default:return this.getModuleAncestorAddressRegular(e,t)}}},{key:"getModuleAncestorAddressFullwidth",value:function(e,t){var n=t||this.getSelectedModule("props"),o=m()(n,"address","").split(".");switch(e){case"column":return V()(o,2).join(".");default:return V()(o,1).join(".")}}},{key:"getModuleAncestorAddressSpecialty",value:function(e,t){var n=t||this.getSelectedModule("props"),o=this.getModuleStructure(m()(n,"type")),a=m()(n,"address","").split(".");switch(e){case"column":return"module"===o&&a.length>4?V()(a,4).join("."):V()(a,2).join(".");case"row":return"module"===o&&a.length>4?V()(a,3).join("."):V()(a,2).join(".");default:return V()(a,1).join(".")}}},{key:"getModuleAncestorAddressRegular",value:function(e,t){var n=t||this.getSelectedModule("props"),o=m()(n,"address","").split(".");switch(e){case"column":return V()(o,3).join(".");case"row":return V()(o,2).join(".");default:return V()(o,1).join(".")}}},{key:"getFieldValue",value:function(e,t,n){var o=n||this.getSelectedModule("props"),a=o.attrs||{},i=void 0;if(("content"===e||m()(t,"is_fb_content",!1))&&(i=m()(o,"content")),"custom_padding"===t.type&&"custom_padding"!==e){var r=k()(["et_pb_row","et_pb_row_inner"],o.type),s=Object(re.isOn)(m()(o,"attrs.specialty")&&"et_pb_section"===m()(o,"type"));if(r||s){var l=e.replace("padding_",""),u=Object(re.hasValue)(a["padding_"+l+"_last_edited"])?a["padding_"+l+"_last_edited"].split("|"):[],d=(m()(a,"padding_top_"+l,"")||"").trim()+"|"+(m()(a,"padding_right_"+l,"")||"").trim()+"|"+(m()(a,"padding_bottom_"+l,"")||"").trim()+"|"+(m()(a,"padding_left_"+l,"")||"").trim()+"|"+(m()(a,"padding_top_bottom_link_"+l,"")||"").trim()+"|"+(m()(a,"padding_left_right_link_"+l,"")||"").trim();switch(F()(u[1])?"desktop":u[1]){case"phone":i=m()(a,"padding_"+l+"_phone","");break;case"tablet":i=m()(a,"padding_"+l+"_tablet","");break;default:i=d}}}if("center_map"===t.type)switch(o.type){case"et_pb_map_pin":i=JSON.stringify(G()(a,["pin_address","pin_address_lat","pin_address_lng","zoom_level"]));break;default:i=JSON.stringify(G()(a,["address_lat","address_lng","zoom_level"]))}if("select_with_option_groups"===t.type&&(i=m()($()(m()(a,e,m()(t,"default"))).split("|"),1,"none")),m()(t,"mobile_options",!1)){var c=m()(a,e+"_last_edited","off|desktop").split("|");Object(re.isOn)(m()(c,0,"off"))&&"desktop"!==m()(c,1,"desktop")&&(i=m()(a,e+"_"+m()(c,1)))}return F()(i)&&(i=m()(a,e,m()(t,"default"))),i}},{key:"renderField",value:function(e,t,n){var i,s=this,l=this.getSelectedModule(),d=!(!l.isModuleItem||F()(l.parentModule.props.type))&&l.parentModule.props.type?e.name+"_child":e.name,c=u()({},e,{resetValue:!1,mobile_options:!1,disableReset:!0,uniqueKey:d,processedKey:d,animate:m()(this.props,"options.animate",!1)}),p=m()(c,"type","text"),f=p.replace("_","-"),h=Object(le.e)(c.value),_=r()((ce(i={},"et-fb-form__group--"+this.slug,!0),ce(i,"et-fb-form__group--"+f,!0),ce(i,"et-fb-form__group--readonly",c.readonly),i)),b=r()(ce({"et-fb-settings-options":!0,"et-fb-option--depends-on":!F()(e.depends_default)||!F()(e.depends_show_if)||!F()(e.depends_show_if_not),"et-fb-option--select-with-option-groups":"select_with_option_groups"===p&&e.groups},"et-fb-option--"+f,!0)),g=r()(ce({"et-fb-option-container":!0},"et-fb-option-container--"+f,!0)),v=Object(o.createElement)(Y.a.getControl(p),c);return a.a.createElement(ne.b,{className:_,name:d,key:this.slug+"-form-group-"+d,onMouseEnterGroup:M()(n)?B.a:function(){return s.onMouseEnterGroup(d)},onMouseLeaveGroup:M()(n)?B.a:this.onMouseLeaveGroup},a.a.createElement(ne.c,{hoveredGroup:this.state.hoveredGroup===d,onClickHelp:function(){return s.onClickHelp(d)},activeHelp:this.state.activeDescription===d},t),a.a.createElement(ne.a,{active:this.state.activeDescription===d},n),a.a.createElement("div",{className:b},a.a.createElement("div",{className:g},a.a.createElement(Z.a,{componentName:d},h&&k()(se.a.supportedFieldTypes,p)?a.a.createElement(se.a,{type:c.dynamic_content||p,fieldName:c.name,fieldType:p,value:c.value,dynamicAttributes:[c.name],previewMode:"background",showSettingsButton:!1,showDisableButton:!1,onChange:c._onChange},v):v))))}},{key:"renderFieldSource",value:function(){var e=this;if("module"===this.getSelectedSource()){var t=this.getSelectedModuleTitle(),n=this.getSelectedModuleTitlePlural(),o=Object(re.sprintf)(he.labels.extend_module,t,n);return a.a.createElement(ne.b,null,a.a.createElement(ne.c,null,fe.decode(o)))}if("options_group"===this.getSelectedSource()){var i=this.getSelectedElement("payload.toggleTitle"),r=he.labels.extend_options_group.replace(/%s/g,i);return a.a.createElement(ne.b,null,a.a.createElement(ne.c,null,fe.decode(r)))}var s=this.getSelectedModuleType(),l=this.getSelectedElement("payload.option"),d=this.getSelectedField();if(!M()(d)){var c=u()({},d,{value:this.getSelectedFieldValue()}),p=this.getSelectedElement("payload.optionTitle"),h=function t(n){K()(n,"module",e),K()(n,"readonly",!0),K()(n,"visible",!0),K()(n,"_onChange",B.a);var o=m()(n,"type");if(J()(o,"background-")){K()(n,"type","background"),K()(n,"activeTab",o.replace("background-","")),K()(n,"isDescriptionVisible",function(){return!1}),K()(n,"isHoveredGroup",function(){return!1}),K()(n,"onMouseEnterGroup",B.a),K()(n,"onMouseLeaveGroup",B.a);var a={};f()(ae.a.getModuleFields(s),function(e){k()(l,e.name)&&(a[e.name]=u()({},t(e)))}),K()(n,"backgroundFields",a)}if("font"===o){var i=m()(n,"group_label",""),r=m()(n,"value","||||||||").split("|"),d={font:m()(r,0,""),weight:m()(r,1,""),italic:m()(r,2,""),uppercase:m()(r,3,""),underline:m()(r,4,""),capitalize:m()(r,5,""),strikethrough:m()(r,6,""),line_style:m()(r,7,""),line_color:m()(r,8,"")},c=Object(re.isOn)(m()(d,"underline"));switch(n.subField){case"weight":K()(n,"label",me.fontWeight);break;case"style":K()(n,"label",me.fontStyle);break;case"line_color":var p=c?me.underline:me.strikethrough,h=me.color;K()(n,"label",p+" "+h);break;case"line_style":var _=c?me.underline:me.strikethrough,b=me.style;K()(n,"label",_+" "+b);break;default:K()(n,"label",m()(me,n.subField,""))}M()(i)||K()(n,"label",i+" "+n.label),K()(n,"subFieldLabel",!1)}if(J()(o,"color")&&(K()(n,"hideColorManagerLinks",!0),K()(n,"hideHarmoniousPalette",!0),K()(n,"hideCurrentColorWrapper",!0),K()(n,"hideColorResetButton",!0),K()(n,"showCustomInput",!0),K()(n,"hasPreview",!1)),"select_with_option_groups"===o&&(K()(n,"hideAddButton",!0),K()(n,"hideRemoveButton",!0),K()(n,"hideFetchButton",!0)),"center_map"===o&&(K()(n,"disableAction",!0),K()(n,"hideUpdateButton",!0)),"conditional_logic"===o&&(K()(n,"hideAddButton",!0),K()(n,"hideDeleteButton",!0)),"categories"===o&&(K()(n,"categories_list",{}),M()(n.taxonomy_name)&&K()(n,"taxonomy_name","category")),"select"===o&&F()(n.default)&&!M()(n.options)){var g=S()(n.options)?[]:{};f()(n.options,function(e,t){C()(e)||S()(e)?f()(e,function(e,t){g[t]=e}):g[t]=e}),M()(g)||K()(n,"default",S()(g)?v()(g):v()(N()(g)))}return n}(c),_=fe.decode(he.labels.extend_option.replace(/%s/g,m()(h,"label",p)));return this.renderField(h,_)}var b=this.getSelectedElement("payload.optionTitle"),g=he.labels.extend_option.replace(/%s/g,b);return a.a.createElement(ne.b,null,a.a.createElement(ne.c,null,fe.decode(g)))}},{key:"renderFieldTo",value:function(){if("module"===this.getSelectedSource())return!1;var e,t,n,o=(e=this.getSelectedModuleStructure(),t=P()(H()(u()({},ae.a.getModules()),function(e){return e.is_official_module&&Object(re.isOn)(e.is_parent)}),function(e,t){var n=ae.a.getModuleTitlePlural(t);return he.labels.all.replace("%s",M()(n)?e.title:n)}),n=P()(u()({},he.options.to),function(e,n){return"containers"===n?G()(t,["et_pb_section","et_pb_row"]):u()({},e,D()(t,["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"]))}),H()(n,function(t,n){return("module"!==e||"containers"!==n)&&t}));return this.renderField({options:o,type:"select",name:"to",default:this.state.to,value:this.state.to,optionGroups:he.groups.to,searchable:!0,_onChange:this.onChangeField},he.labels.to)}},{key:"renderFieldThroughout",value:function(){var e,t=(e=this.getModuleStructure(this.state.to),H()(he.options.throughout,function(t,n){return!("section"===e&&"page"!==n||"row"===e&&k()(["row","column"],n))}));return!M()(t)&&this.renderField({options:t,type:"select",name:"throughout",default:this.state.throughout,value:this.state.throughout,_onChange:this.onChangeField},he.labels.throughout)}},{key:"render",value:function(){var e,t,n=this.state.buttonState?a.a.createElement(X.a,{icon:this.state.buttonState,color:"#FFFFFF"}):he.button,o=[a.a.createElement(Q.a,{block:!0,info:!0,ink:!1,tooltip:he.button,disable:!1!==this.state.buttonState,__onClick:this.state.buttonState?B.a:this.onExtendStyles},n)],i=ue({},this.props,{measurement:{width:ae.a.getAppPreference("modal_dimension_width"),height:ae.a.getAppPreference("modal_dimension_height")},disableFullscreenButton:!0,disableSnapButton:!0,disableResizeButton:!0}),s=r()((ce(e={"et-fb-modal__module-settings":!0},"et-fb-modal__"+this.slug,!0),ce(e,"et-fb-modal__"+this.slug+"--"+this.getSelectedSource(),!0),e)),l=r()((ce(t={"et-fb-tabs__panel":!0},"et-fb-tabs__panel--"+this.slug,!0),ce(t,"et-fb-tabs__panel--"+this.slug+"--"+this.getSelectedSource(),!0),t)),u=r()(ce({"et-fb-form":!0},"et-fb-form--"+this.getSelectedSource(),!0));return a.a.createElement(ee.a,ue({className:s,footerButtons:o,fullscreen:ae.a.getAppPreference("modal_fullscreen"),label:fe.decode(he.title),position:{x:ae.a.getAppPreference("modal_position_x"),y:ae.a.getAppPreference("modal_position_y")},snapLocation:ae.a.getAppPreference("modal_snap_location"),_closeFunction:this.state.buttonState?B.a:this.onClose,globalUpdate:!0},i),a.a.createElement(Z.a,null,a.a.createElement(te.d,{selectedIndex:0},a.a.createElement(te.c,{className:l,slug:this.slug,selected:!0},a.a.createElement("div",{className:u},a.a.createElement("div",{className:"et-fb-form--inner"},this.renderFieldSource(),this.renderFieldTo(),this.renderFieldThroughout()))))))}}]),t}();t.default=_e},1258:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(14),r=n.n(i),s=n(74),l=n(12),u=n.n(l),d=n(53),c=n.n(d),p=n(10),f=n.n(p),h=n(2),m=n.n(h),_=n(28),b=n.n(_),g=n(82),v=n.n(g),y=n(9),k=n.n(y),E=n(19),S=n.n(E),w=n(37),C=n.n(w),T=n(48),M=n.n(T),O=n(7),F=n.n(O),A=n(5),N=n.n(A),L=n(26),P=n.n(L),I=n(100),D=n.n(I),x=n(34),B=n.n(x),j=n(76),G=n.n(j),R=n(65),H=n.n(R),W=n(41),V=n.n(W),U=n(136),$=n.n(U),z=n(175),K=n.n(z),q=n(25),J=n.n(q),Q=n(31),X=n(410),Y=n(22),Z=n(21),ee=n(242),te=n(64),ne=n(409),oe=n(227),ae=n(131),ie=n(11),re=n(3),se=n(734),le=n(0),ue=n(145),de=n(15),ce=(n(1242),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=new se.a,me=new s.AllHtmlEntities,_e=ETBuilderBackend.i18n.findReplace.modal,be=ETBuilderBackend.i18n.fonts,ge=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n._getSelectedFieldValue();return n.state={find:o,replace:n._getSelectedFieldValue(),within:"this_page",throughout:"this_page",all:"off",buttonState:!1},n.tabSlug="find-replace",n.isDynamic=Object(Y.e)(o),n._onKeyDown=n._onKeyDown.bind(n),n._onClose=n._onClose.bind(n),n._onMouseEnterGroup=n._onMouseEnterGroup.bind(n),n._onMouseLeaveGroup=n._onMouseLeaveGroup.bind(n),n._onClickHelp=n._onClickHelp.bind(n),n._onChangeMap=n._onChangeMap.bind(n),n._onChangeField=n._onChangeField.bind(n),n._onChangeFieldWithin=n._onChangeFieldWithin.bind(n),n._onChangeFieldThroughout=n._onChangeFieldThroughout.bind(n),n._onFindReplace=n._onFindReplace.bind(n),n._resetOption=n._resetOption.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.PureComponent),pe(t,[{key:"componentDidMount",value:function(){he.reset(),Object(le.appWindow)().addEventListener("keydown",this._onKeyDown),Object(le.topWindow)().addEventListener("keydown",this._onKeyDown)}},{key:"componentWillUnmount",value:function(){he.reset(),Object(le.appWindow)().removeEventListener("keydown",this._onKeyDown),Object(le.topWindow)().removeEventListener("keydown",this._onKeyDown)}},{key:"_getEditedModule",value:function(e,t){var n=m()(this.props,"module");return N()(e)?n:m()(n,e,t)}},{key:"_getEditedModuleType",value:function(){return this._getEditedModule("props.type")}},{key:"_getModuleStructure",value:function(e){switch(e||this._getEditedModuleType()){case"et_pb_section":return"section";case"et_pb_row":case"et_pb_row_inner":return"row";case"et_pb_column":case"et_pb_column_inner":return"column";default:return"module"}}},{key:"_getModuleTitle",value:function(e){var t=e||this._getEditedModuleType();return he.has("getModuleTitle",t)?he.get("getModuleTitle",t):he.set(re.a.getModuleTitle(t),"getModuleTitle",t)}},{key:"_getModuleSectionType",value:function(e){var t=v()(m()(e,"address").split(".")),n=c()(re.a.getSections(),{address:t});return!!n&&(Object(le.isOn)(m()(n,"attrs.fullwidth"))?"fullwidth":Object(le.isOn)(m()(n,"attrs.specialty"))?"specialty":"regular")}},{key:"_getModuleAncestorAddress",value:function(e,t){switch(this._getModuleSectionType(t)){case"fullwidth":return this._getModuleAncestorAddressFullwidth(e,t);case"specialty":return this._getModuleAncestorAddressSpecialty(e,t);default:return this._getModuleAncestorAddressRegular(e,t)}}},{key:"_getModuleAncestorAddressFullwidth",value:function(e,t){var n=m()(t,"address","").split(".");switch(e){case"column":return K()(n,2).join(".");default:return K()(n,1).join(".")}}},{key:"_getModuleAncestorAddressSpecialty",value:function(e,t){var n=this.getModuleStructure(m()(t,"type")),o=m()(t,"address","").split(".");switch(e){case"column":return"module"===n&&o.length>4?K()(o,4).join("."):K()(o,2).join(".");case"row":return"module"===n&&o.length>4?K()(o,3).join("."):K()(o,2).join(".");default:return K()(o,1).join(".")}}},{key:"_getModuleAncestorAddressRegular",value:function(e,t){var n=m()(t,"address","").split(".");switch(e){case"column":return K()(n,3).join(".");case"row":return K()(n,2).join(".");default:return K()(n,1).join(".")}}},{key:"_getModuleFields",value:function(e){var t=e||this._getEditedModuleType();if(he.has("getModuleFields",t))return he.get("getModuleFields",t);var n=re.a.getModuleFields(t),o=m()(this._getEditedModule("props"),"attrs"),a={};return f()(n,function(e,t){var n=Object(de.b)(t);b()(o,n)&&V()(a,n,e)}),he.set(u()({},n,a),"getModuleFields",t)}},{key:"_getHoveredElement",value:function(e){var t=N()(e)?"element":"element."+e;return m()(this.props,t)}},{key:"_getHoveredElementId",value:function(){return this._getHoveredElement("elementId")}},{key:"_getHoveredElementSubId",value:function(){return this._getHoveredElement("subElementId")}},{key:"_getSelectedField",value:function(){var e=this._getHoveredElement("elementId"),t=this._getHoveredElement("payload.toggleGroupId"),n=this._getHoveredElement("payload.toggleId"),o=this._getEditedModuleType(),a=c()(re.a.getModuleFields(o),{name:e,tab_slug:t,toggle_slug:n}),i=u()({},{name:e,type:this._getHoveredElement("payload.option_family"),label:this._getHoveredElement("payload.optionTitle"),subField:this._getHoveredElement("subElementId")},a);if("categories"===i.type&&(i=u()({},i,{categories_list:{},taxonomy_name:N()(i.taxonomy_name)?"category":i.taxonomy_name})),"conditional_logic"===i.type&&(i=u()({},i,{hideAddButton:!0,hideDeleteButton:!0})),"select"===i.type&&N()(i.default)&&!F()(i.options)){var r=S()(i.options)?[]:{};f()(i.options,function(e,t){C()(e)||S()(e)?f()(e,function(e,t){r[t]=e}):r[t]=e}),r&&(i=u()({},i,{default:S()(r)?r[0]:v()(P()(r))}))}return"center_map"===i.type&&(i=u()({},i,{disableAction:!0,hideUpdateButton:!0})),i}},{key:"_getSelectedFieldType",value:function(){return m()(this._getSelectedField(),"type","text")}},{key:"_getSelectedFieldLabel",value:function(){var e=this._getSelectedField(),t=m()(e,"label","");if("font"===e.type){var n=m()(this._getSelectedField(),"group_label",""),o=this._getHoveredElementSubId(),a=(this._getSelectedFieldValue()||"||||||||").split("|"),i={family:m()(a,0,""),weight:m()(a,1,""),italic:m()(a,2,""),uppercase:m()(a,3,""),underline:m()(a,4,""),capitalize:m()(a,5,""),strikethrough:m()(a,6,""),line_style:m()(a,7,""),line_color:m()(a,8,"")},r=Object(le.isOn)(m()(i,"underline"));switch(o){case"weight":t=be.fontWeight;break;case"style":t=be.fontStyle;break;case"line_color":t=(r?be.underline:be.strikethrough)+" "+be.color;break;case"line_style":t=(r?be.underline:be.strikethrough)+" "+be.style;break;default:t=m()(be,o,"")}return N()(n)?t:n+" "+t}return t}},{key:"_getSelectedFieldValue",value:function(){var e=m()(this._getSelectedField(),"name");if(Object(de.c)()){var t=m()(this._getEditedModule("props"),"attrs"),n=Object(de.b)(e);b()(t,n)&&(e=n)}return this._getFieldValue(e)}},{key:"_getFieldValue",value:function(e,t,n){var o=N()(e)?m()(this._getSelectedField(),"name"):e,a=N()(t)?this._getSelectedField():t,i=N()(n)?this._getEditedModule("props"):n,r=i.attrs||{};if(!(F()(a)||N()(o)||N()(a.type))){var s=void 0;if(("content"===o||m()(a,"is_fb_content",!1))&&(s=m()(i,"content")),"custom_padding"===a.type&&"custom_padding"!==o&&this._isModuleHasColumn(i)){var l=o.replace("padding_",""),u=Object(le.hasValue)(r["padding_"+l+"_last_edited"])?r["padding_"+l+"_last_edited"].split("|"):[],d=(m()(r,"padding_top_"+l,"")||"").trim()+"|"+(m()(r,"padding_right_"+l,"")||"").trim()+"|"+(m()(r,"padding_bottom_"+l,"")||"").trim()+"|"+(m()(r,"padding_left_"+l,"")||"").trim()+"|"+(m()(r,"padding_top_bottom_link_"+l,"")||"").trim()+"|"+(m()(r,"padding_left_right_link_"+l,"")||"").trim();switch(N()(u[1])?"desktop":u[1]){case"phone":s=m()(r,"padding_"+l+"_phone","");break;case"tablet":s=m()(r,"padding_"+l+"_tablet","");break;default:s=d}}if("center_map"===a.type)switch(i.type){case"et_pb_map_pin":s=JSON.stringify(G()(r,["pin_address","pin_address_lat","pin_address_lng","zoom_level"]));break;default:s=JSON.stringify(G()(r,["address_lat","address_lng","zoom_level"]))}if(m()(a,"mobile_options",!1)){var c=m()(r,o+"_last_edited","off|desktop").split("|");Object(le.isOn)(m()(c,0,"off"))&&"desktop"!==m()(c,1,"desktop")&&(s=m()(r,o+"_"+m()(c,1)))}return N()(s)&&(s=m()(r,o,m()(a,"default"))),s}}},{key:"_getWithinOptions",value:function(){var e=this,t={};return f()(ETBuilderBackend.findReplace.within,function(n,o){M()(n)?t[o]=n.replace("%s",e._getModuleTitle()):(S()(n)||C()(n))&&(t[o]=D()(H()(n,function(t,n){switch(e._getModuleStructure()){case"section":return!k()(["this_row","this_column","all_rows","all_modules"],n);case"row":return!k()(["this_column","all_modules"],n);case"column":return!1;default:return!k()(["all_rows"],n)}}),function(t){return t.replace("%s",e._getModuleTitle())}))}),t}},{key:"_getThroughoutOptions",value:function(){var e=this;return D()(H()(ETBuilderBackend.findReplace.throughout,function(t,n){switch(e._getModuleStructure()){case"section":return!1;case"row":return!k()(["this_row","this_column"],n);case"column":return!1;default:return!0}}),function(t){return t.replace("%s",e._getModuleTitle())})}},{key:"_isReplaceValueValid",value:function(e,t){var n=e||this.state.replace,o=t||this._getSelectedField();if(!m()(o,"required",!1)&&!Object(le.hasValue)(n))return!0;switch(m()(o,"type")){case"color":case"color-alpha":return ue.a.isHex(n)||ue.a.isRgb(n)||ue.a.isHsl(n);case"range":var a=/^-?\d*\.?\d+$/,i=m()(o,"default_unit",m()(o,"fixed_unit",!1)),r=i?a.test(n.replace(i,"")):a.test(n);if(r&&m()(o,"fixed_range",!1)){var s=o.range_settings||{min:0,max:100,step:1},l=m()(o,"fixed_unit",m()(o,"default_unit",!1)),u=l?parseFloat(n.replace(l,"")):parseFloat(n);r=u>=m()(s,"min",0)&&u<=m()(s,"max",100)}return r;case"font":return 9===J()(n).split("|").length;case"center_map":return Object(le.isJson)(n);default:return!0}}},{key:"_isFieldTypeMatch",value:function(e,t){var n=!1;switch(t.type){case"upload":var o=m()(t,"data_type","image"),a=m()(this._getSelectedField(),"data_type","image");(n=t.type===this._getSelectedFieldType()&&o===a)&&"video"===a&&(n=m()(t,"field_template",!0)===m()(this._getSelectedField(),"field_template",!1));break;default:(n=t.type===this._getSelectedFieldType())||k()(this._getHoveredElement("payload.option"),e)}return n}},{key:"_isFieldNameMatch",value:function(e,t){if(Object(le.isOn)(this.state.all))return!0;var n={moduleType:this._getEditedModuleType(),field:this._getSelectedField(),value:this._getSelectedFieldValue()},o={moduleType:t.type,field:e,value:this._getFieldValue(m()(e,"name"),e,t)};return re.a.getModuleFieldsMapping(n,o)}},{key:"_isButtonEnabled",value:function(){return J()(this.state.find)!==J()(this.state.replace)&&(!F()(this.state.within)&&((!this._isThroughoutEnabled()||!F()(this.state.throughout))&&!!this._isReplaceValueValid()))}},{key:"_isThroughoutEnabled",value:function(){switch(this._getModuleStructure()){case"section":return!1;case"row":return k()(["all_rows","all_same_type"],this.state.within);case"column":return!1;default:return k()(["all_modules","all_same_type"],this.state.within)}}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isModuleHasColumn",value:function(e){var t=e||this._getModuleEdited("props"),n=k()(["et_pb_row","et_pb_row_inner"],t.type),o=Object(le.isOn)(m()(t,"attrs.specialty")&&"et_pb_section"===m()(t,"type"));return n||o}},{key:"_isModuleLocked",value:function(e){var t=m()(e,"address");if(he.has("isModuleLocked",t))return he.get("isModuleLocked",t);var n=Object(le.isOn)(m()(e,"attrs.locked"))||m()(e,"lockedParent");if(!n){var o=t.split("."),a=P()(o).map(function(e){return K()(o,parseInt(e,10)+1)});f()(a,function(e){var t=c()(re.a.getSectionsFlattened(),{address:e.join(".")});if(Object(le.isOn)(m()(t,"attrs.locked"))||m()(t,"lockedParent"))return n=!0,!1})}return he.set(n,"isModuleLocked",t)}},{key:"_isModuleAddressAffected",value:function(e){var t=this.state.within.replace("this_",""),n=this.state.throughout.replace("this_",""),o=m()(e,"address"),a=o.split("."),i=this._getModuleStructure(e.type),r=this._getEditedModule("props"),s=!1;switch(this.state.within){case"this_section":case"this_row":case"this_column":var l=this._getModuleAncestorAddress(t,r).split(".");s=!0,f()(l,function(e,t){if(m()(a,t)!==e)return s=!1,!1});break;case"this_module":if(e.is_module_child){var u=this._getModuleAncestorAddress("column",r).split(".");s=!0,f()(u,function(e,t){if(m()(a,t)!==e)return s=!1,!1})}else s=o===this._getEditedModule("props.address")||m()(e,"parent_address")===this._getEditedModule("props.address");break;case"all_modules":if("module"===i)switch(this.state.throughout){case"this_section":case"this_row":case"this_column":var d=this._getModuleAncestorAddress(n,r).split(".");s=!0,f()(d,function(e,t){if(m()(a,t)!==e)return s=!1,!1});break;default:s=!0}break;case"all_rows":if(k()(["row","column","module"],i))switch(this.state.throughout){case"this_section":var c=this._getModuleAncestorAddress(n,r).split(".");s=!0,f()(c,function(e,t){if(m()(a,t)!==e)return s=!1,!1});break;default:s=!0}break;case"all_same_type":if(k()([this._getEditedModuleType(),this._getEditedModule("props.child_slug")],m()(r,"type")))switch(this.state.throughout){case"this_section":case"this_row":case"this_column":var p=this._getModuleAncestorAddress(n,r).split(".");s=!0,f()(p,function(e,t){if(m()(a,t)!==e)return s=!1,!1});break;default:s=!0}break;default:s=!0}return s}},{key:"_onKeyDown",value:function(e){27===e.keyCode&&this._onClose()}},{key:"_onClose",value:function(){ie.b.findReplaceModalClose(this._getEditedModule(),this._getHoveredElement())}},{key:"_onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"_onMouseLeaveGroup",value:function(){this.setState({hoveredGroup:!1})}},{key:"_onClickHelp",value:function(e){this.setState({activeDescription:this.state.activeDescription!==e&&e})}},{key:"_onChangeMap",value:function(e,t){try{this.setState({replace:JSON.stringify(V()(JSON.parse(this.state.replace),e,t))})}catch(n){this.setState(fe({},e,t))}}},{key:"_onChangeField",value:function(e,t){e!==m()(this._getSelectedField(),"name")?this.setState(fe({},e,t)):this.setState({replace:t})}},{key:"_onChangeFieldWithin",value:function(e){this.setState({within:e})}},{key:"_onChangeFieldThroughout",value:function(e){this.setState({throughout:e})}},{key:"_onFindReplace",value:function(){var e=this;this.setState({buttonState:"loading"}),new Promise(function(t){setTimeout(function(){var n=re.a.getSectionsFlattened().filter(function(t){return!!e._isModuleAddressAffected(t)&&!e._isModuleLocked(t)});return F()(n)||f()(n,function(t){var n={},o=e._getModuleFields(t.type);if(f()(o,function(o,a){var i=e._getFindReplaceData(a,o,t);F()(i)||f()(i,function(e,o){var a=k()(["content","raw_content"],o)&&"et_pb_counter"!==m()(t,"type");Object(Y.e)(e)&&!Object(Y.f)(m()(t,"type"),o)||V()(n,o,{value:e,isContent:a})})}),!F()(n)){var a=t.address===e._getEditedModule("props.address");ie.b.findReplaceModuleUpdate(t.address,n,a)}}),t(!0)},0)}).then(function(){e._onClose()})}},{key:"_getFindReplaceData",value:function(e,t,n){var o=J()(this.state.find),a=J()(this.state.replace),i=J()(this._getFieldValue(e,t,n)),r={};try{if(!this._isFieldTypeMatch(e,t))throw new Error(_e.error.field_type_not_match);if(!this._isFieldNameMatch(t,n))throw new Error(_e.error.field_name_not_match);if(!this._isReplaceValueValid(a,t))throw new Error(_e.error.replace_value_not_valid);switch(m()(t,"type")){case"skip":case"hidden":break;case"font":var s=this._getFindReplaceDataFont(o,i,a);s&&V()(r,e,s);break;case"center_map":o.toLowerCase()===i.toLowerCase()&&f()(JSON.parse(a),function(e,t){V()(r,t,e)});break;default:o.toLowerCase()===i.toLowerCase()&&V()(r,e,a)}if(F()(r)&&e!==this._getHoveredElementId()&&k()(this._getHoveredElement("payload.option"),e)){var l=this._getSelectedField(),u=J()(this._getFieldValue(e,l,n));if(o.toLowerCase()===u.toLowerCase()&&k()(["padding_1","padding_2"],l.name)){var d=m()(n,"attrs."+l.name+"_last_edited","off|desktop").split("|");if(Object(le.isOn)(m()(d,0,"off"))&&"desktop"!==m()(d,1,"desktop"))V()(r,l.name+"_"+m()(d,1),a);else{var c=l.name.replace("padding_",""),p=a.split("|");e==="padding_top_"+c?V()(r,e,m()(p,0,"")):e==="padding_right_"+c?V()(r,e,m()(p,1,"")):e==="padding_bottom_"+c?V()(r,e,m()(p,2,"")):e==="padding_left_"+c?V()(r,e,m()(p,3,"")):e==="padding_top_bottom_link_"+c?V()(r,e,m()(p,4,"")):e==="padding_left_right_link_"+c&&V()(r,e,m()(p,5,""))}}}if(F()(r))throw new Error(_e.error.replace_value_not_match);if(m()(t,"mobile_options",!1)){var h=m()(n,"attrs."+e+"_last_edited","off|desktop").split("|");Object(le.isOn)(m()(h,0,"off"))&&"desktop"!==m()(h,1,"desktop")&&($()(r,e),V()(r,e+"_"+m()(h,1),this.state.replace))}if(m()(t,"presets",!1)){var _=t.presets.filter(function(e){return m()(e,"value")===a});f()(_,function(e){var t=m()(e,"fields",!1);t&&f()(t,function(e,t){V()(r,t,e)})})}return r}catch(e){return!1}}},{key:"_getFindReplaceDataFont",value:function(e,t,n){var o=!1,a=J()(e).split("|");9!==a.length&&(a="||||||||".split("|"));var i=m()(a,0,""),r=m()(a,1,""),s=m()(a,2,""),l=m()(a,3,""),u=m()(a,4,""),d=m()(a,5,""),c=m()(a,6,""),p=m()(a,7,""),f=m()(a,8,""),h=J()(t).split("|");9!==h.length&&(h="||||||||".split("|"));var _={family:m()(h,0,""),weight:m()(h,1,""),italic:m()(h,2,""),uppercase:m()(h,3,""),capitalize:m()(h,4,""),underline:m()(h,5,""),linethrough:m()(h,6,""),line_color:m()(h,7,""),line_style:m()(h,8,"")},b=J()(n).split("|");9!==b.length&&(b="||||||||".split("|"));var g={family:m()(b,0,""),weight:m()(b,1,""),italic:m()(b,2,""),uppercase:m()(b,3,""),capitalize:m()(b,4,""),underline:m()(b,5,""),linethrough:m()(b,6,""),line_color:m()(b,7,""),line_style:m()(b,8,"")},v=P()(ETBuilderBackend.allFontWeights).map(function(e){return J()(e)});if(!F()(_.family)&&"Default"!==_.family){var y=m()(ETBuilderBackend.googleFonts,_.family,!1);y&&(v=y.styles.split(",").map(function(e){return"regular"===e?"400":J()(e)}).filter(function(e){return k()(v,e)}));var E=m()(ETBuilderBackend.customFonts,_.family,!1);y||F()(E)||(v=E.styles.split(",").map(function(e){return"regular"===e?"400":J()(e)}).filter(function(e){return k()(v,e)})),k()(v,"400")||v.push("400"),k()(v,"700")||v.push("700")}switch(this._getHoveredElementSubId()){case"weight":r===_.weight&&(k()(v,g.weight)||F()(g.weight))&&(h[1]=g.weight,o=!0);break;case"style":s===_.italic&&(h[2]=g.italic,o=!0),l===_.uppercase&&(h[3]=g.uppercase,o=!0),u===_.capitalize&&(h[4]=g.capitalize,o=!0),d===_.underline&&(h[5]=g.underline,o=!0),c===_.linethrough&&(h[6]=g.linethrough,o=!0);break;case"line_color":p===_.line_color&&(h[7]=g.line_color,o=!0);break;case"line_style":f===_.line_style&&(h[8]=g.line_style,o=!0);break;default:i===_.family&&(h[0]=g.family,o=!0)}return!!o&&h.join("|")}},{key:"_resetOption",value:function(){this.setState({replace:""})}},{key:"_renderField",value:function(e,t,n){var i=this,s=this._getEditedModule(),l=!(!s.isModuleItem||N()(s.parentModule.props.type))&&s.parentModule.props.type?e.name+"_child":e.name;e.findReplaceModalFind?l+="__find":e.findReplaceModalReplace?l+="__replace":e.findReplaceModalWithin?l+="__within":e.findReplaceModalThroughout?l+="__throughout":e.findReplaceModalReplaceAll&&(l+="__all");var d=u()({},e,{resetValue:!1,mobile_options:!1,disableReset:!0,uniqueKey:l,processedKey:l});(e.findReplaceModalFind||e.findReplaceModalReplace)&&(k()(["color","color-alpha"],d.type)&&(d=u()({},d,{hideColorManagerLinks:!0,hideHarmoniousPalette:!0,hideCurrentColorWrapper:!0,hideColorResetButton:!0,showCustomInput:!0})),"font"===d.type&&(d=u()({},d,{subFieldLabel:!1,subField:this._getHoveredElementSubId()?this._getHoveredElementSubId():"font"})),"select_with_option_groups"===d.type&&(d=u()({},d,{value:m()(J()(d.value).split("|"),1,"none"),hideAddButton:!0,hideRemoveButton:!0,hideFetchButton:!0})),"multiple_checkboxes"===d.type&&(d=u()({},d,{shortcut_index:l})));var c=m()(d,"type","text"),p=c.replace("_","-"),f=r()(fe({"et-fb-form__group--find-replace":!0,"et-fb-form__group--find-replace__find":e.findReplaceModalFind,"et-fb-form__group--find-replace__replace":e.findReplaceModalReplace,"et-fb-form__group--find-replace__within":e.findReplaceModalWithin,"et-fb-form__group--find-replace__throughout":e.findReplaceModalThroughout,"et-fb-form__group--find-replace__all":e.findReplaceModalReplaceAll},"et-fb-form__group--"+p,!0)),h=r()(fe({"et-fb-settings-options":!0,"et-fb-option--depends-on":!N()(e.depends_default)||!N()(e.depends_show_if)||!N()(e.depends_show_if_not),"et-fb-option--select-with-option-groups":"select_with_option_groups"===c&&e.groups},"et-fb-option--"+p,!0)),_=r()(fe({"et-fb-option-container":!0},"et-fb-option-container--"+p,!0)),b=Object(o.createElement)(ee.a.getControl(c),d);return a.a.createElement(ae.b,{className:f,name:l,key:this.tabSlug+"-form-group-"+l,onMouseEnterGroup:function(){return i._onMouseEnterGroup(l)},onMouseLeaveGroup:this._onMouseLeaveGroup},a.a.createElement(ae.c,{hoveredGroup:this.state.hoveredGroup===l,onClickHelp:function(){return i._onClickHelp(l)},activeHelp:this.state.activeDescription===l},t),a.a.createElement(ae.a,{active:this.state.activeDescription===l},n),a.a.createElement("div",{className:h},a.a.createElement("div",{className:_},a.a.createElement(te.a,{componentName:l},(this.isDynamic||d.findReplaceModalReplace)&&k()(X.a.supportedFieldTypes,c)?a.a.createElement(X.a,{type:d.dynamic_content||c,fieldName:d.name,fieldType:c,value:d.value,dynamicAttributes:[d.name],showSettingsButton:!d.readonly,showDisableButton:!d.readonly,onChange:d._onChange,onReset:this._resetOption},b):b))))}},{key:"_renderFieldFind",value:function(){var e=u()({},this._getSelectedField(),{module:this,type:this._getSelectedFieldType(),value:this.state.find,findReplaceModalFind:!0,readonly:!0,_onChange:B.a}),t=this.state.find;"text"===e.type||N()(t)||V()(e,"default",t),"codemirror"===e.type&&m()(e,"is_fb_content")&&V()(e,"content",t);var n=_e.find.label.replace("%s",this._getSelectedFieldLabel()),o=_e.find.description;return this._renderField(e,n,o)}},{key:"_renderFieldWithin",value:function(){var e={name:"within",type:"select",value:this.state.within,options:this._getWithinOptions(),optionGroups:ETBuilderBackend.findReplace.groups,groupSeparator:!1,findReplaceModalWithin:!0,__onChange:this._onChangeFieldWithin},t=_e.within.label,n=_e.within.description;return this._renderField(e,t,n)}},{key:"_renderFieldThroughout",value:function(){if(!this._isThroughoutEnabled())return!1;var e={name:"throughout",type:"select",value:this.state.throughout,options:this._getThroughoutOptions(),findReplaceModalThroughout:!0,__onChange:this._onChangeFieldThroughout},t=_e.throughout.label,n=_e.throughout.description;return this._renderField(e,t,n)}},{key:"_renderFieldReplace",value:function(){var e=this,t=u()({},this._getSelectedField(),{module:this,type:this._getSelectedFieldType(),default:Object(Y.e)(this.state.find)?"":this.state.find,value:this.state.replace,findReplaceModalReplace:!0,_onChange:B.a}),n=m()(t,"readonly_if",!1);n&&f()(n,function(n,o){k()(n,e._getEditedModule(o.replace(":",".props.attrs.")))&&V()(t,"readonly",!0)});var o=m()(t,"readonly_if_not",!1);if(o&&f()(o,function(n,o){k()(n,e._getEditedModule(o.replace(":",".props.attrs.")))||V()(t,"readonly",!0)}),!m()(t,"readonly",!1))switch(t.type){case"center_map":V()(t,"_onChange",this._onChangeMap),V()(t,"hideUpdateButton",this._onChangeMap),Object(le.isJson)(this.state.replace)&&f()(JSON.parse(this.state.replace),function(e,n){V()(t,n,k()(["zoom_level"],n)?parseInt(e,10):e)});break;default:V()(t,"_onChange",this._onChangeField)}"codemirror"===t.type&&m()(t,"is_fb_content")&&V()(t,"content",this.state.replace);var a=_e.replaceWith.label,i=_e.replaceWith.description;return this._renderField(t,a,i)}},{key:"_renderFieldReplaceAll",value:function(){var e=this,t=D()(ETBuilderBackend.findReplace.all,function(t){return t.replace("%s",e._getSelectedFieldLabel())}),n={name:"all",type:"multiple_checkboxes",value:this.state.all,options:t,findReplaceModalReplaceAll:!0,_onChange:this._onChangeField},o=_e.replaceAll.label.replace("%s",this._getSelectedFieldLabel()),a=_e.replaceAll.description;return this._renderField(n,o,a)}},{key:"render",value:function(){var e=this.state.buttonState?a.a.createElement(Z.a,{icon:this.state.buttonState,color:"#FFFFFF"}):_e.tooltip,t=[a.a.createElement(Q.a,{block:!0,info:!0,ink:!1,disable:!1!==this.state.buttonState,tooltip:_e.tooltip,__onClick:this.state.buttonState?B.a:this._onFindReplace},e)],n=ce({},this.props,{measurement:{width:re.a.getAppPreference("modal_dimension_width"),height:re.a.getAppPreference("modal_dimension_height")},disableFullscreenButton:!0,disableSnapButton:!0,disableResizeButton:!0}),o=r()({"et-fb-modal__module-settings":!0,"et-fb-modal__find-replace":!0});return a.a.createElement(ne.a,ce({className:o,footerButtons:t,fullscreen:re.a.getAppPreference("modal_fullscreen"),label:me.decode(_e.title),position:{x:re.a.getAppPreference("modal_position_x"),y:re.a.getAppPreference("modal_position_y")},snapLocation:re.a.getAppPreference("modal_snap_location"),_closeFunction:this.state.buttonState?B.a:this._onClose,globalUpdate:!0},n),a.a.createElement(te.a,null,a.a.createElement(oe.d,{selectedIndex:0},a.a.createElement(oe.c,{className:"et-fb-tabs__panel--"+this.tabSlug,slug:this.tabSlug,selected:!0},a.a.createElement("div",{className:"et-fb-form"},this._renderFieldFind(),this._renderFieldWithin(),this._renderFieldThroughout(),this._renderFieldReplace(),this._renderFieldReplaceAll())))))}}]),t}();t.default=ge},1259:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(16),r=n(14),s=n.n(r),l=n(4),u=n.n(l),d=n(5),c=n.n(d),p=n(10),f=n.n(p),h=n(7),m=n.n(h),_=n(9),b=n.n(_),g=n(36),v=n.n(g),y=n(59),k=n.n(y),E=n(27),S=n.n(E),w=n(28),C=n.n(w),T=n(41),M=n.n(T),O=n(93),F=n.n(O),A=n(12),N=n.n(A),L=n(77),P=n.n(L),I=n(65),D=n.n(I),x=n(37),B=n.n(x),j=n(56),G=n.n(j),R=n(2),H=n.n(R),W=n(25),V=n.n(W),U=n(29),$=n(8),z=n(40),K=n(11),q=n(31),J=n(731),Q=n(21),X=n(409),Y=n(3),Z=n(227),ee=n(131),te=n(0),ne=n(124),oe=n(102),ae=n(767),ie=n(766),re=n(179),se=n(1244),le=n(201),ue=n(301),de=n(302),ce=n(768),pe=(n(733),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var he={isVisible:u.a.bool,onModalChange:u.a.func},me={select:ne.a,text:oe.a,textarea:ae.a,codemirror:ie.a,number:oe.a,color:re.a,"color-alpha":re.a,yes_no_button:le.a,range:ue.a,colorpalette:se.a,button:q.a,upload:de.a,categories:ce.a};function _e(){return Y.a.getAppPreference("modal_dimension_width")}function be(){return Y.a.getAppPreference("modal_snap")}function ge(){return Y.a.getAppPreference("modal_snap_location")}var ve=void 0,ye=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return ke.call(t),t.fields=U.a.pageSettings,t.state={activeDescription:null,hoveredGroup:null,openedToggle:e.openedToggle||"main_content",openedContentGroup:"",openedDesignGroup:"",openedAdvancedGroup:"",filterOptions:"",filterSelected:void 0,filterDropdownActive:!1},t.tabs=N()({},ETBuilderBackend.i18n.modals.pageSettings.tabs),t.toggles=N()({},ETBuilderBackend.i18n.modals.pageSettings.toggles),t._handleFormSubmission=t._handleFormSubmission.bind(t),t._onChange=t._onChange.bind(t),t._renderPageSettingsPanel=t._renderPageSettingsPanel.bind(t),t._renderTab=t._renderTab.bind(t),t.isVisible=t.isVisible.bind(t),t._isDescriptionVisible=t._isDescriptionVisible.bind(t),t._isHoveredGroup=t._isHoveredGroup.bind(t),t._onClickHelp=t._onClickHelp.bind(t),t._onMouseEnterGroup=t._onMouseEnterGroup.bind(t),t._onMouseLeaveGroup=t._onMouseLeaveGroup.bind(t),t._onFilterInput=t._onFilterInput.bind(t),t._onFilterSelect=t._onFilterSelect.bind(t),t._onFilterDropdownToggle=t._onFilterDropdownToggle.bind(t),t._onFilterReset=t._onFilterReset.bind(t),t._onFilterResetAll=t._onFilterResetAll.bind(t),t._isOptionMatchesFilter=t._isOptionMatchesFilter.bind(t),t._setSearchFocus=t._setSearchFocus.bind(t),t._onClickToggle=t._onClickToggle.bind(t),t._handleShortcuts=t._handleShortcuts.bind(t),t.builder_display_modal_settings=Y.a.getAppPreference("builder_display_modal_settings"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),fe(n,[{key:"componentDidMount",value:function(){te.default.topDocument().addEventListener("keydown",this._handleShortcuts),Y.a.getDroploaderPayloadCss()&&this.setState({filterOptions:""+ETBuilderBackend.i18n.modules.customCss.label})}},{key:"componentDidUpdate",value:function(e,t){this.props.isVisible&&!e.isVisible&&(this.setState({filterOptions:"",openedToggle:"main_content",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1}),this._setSearchFocus()),this.maybeShowFilterNotice()}},{key:"componentWillUnmount",value:function(){K.b.settingFieldFocused(!1),clearTimeout(ve),te.default.topDocument().removeEventListener("keydown",this._handleShortcuts)}},{key:"_handleShortcuts",value:function(e){var t=this;if(27===e.keyCode){if(e.preventDefault(),te.default.hasValue(this.state.filterOptions)||te.default.hasValue(this.state.filterSelected))return void setTimeout(function(){t.setState({filterOptions:"",filterSelected:void 0,filterDropdownActive:!1})},100);K.b.pageSettingsClose()}}},{key:"isVisible",value:function(e,t){var n=[];return f()(e.depends_on,function(o){if(C()(t,o)){var a=c()(Y.a.getPageSetting(o))?"":Y.a.getPageSetting(o);c()(e.depends_show_if)||a!==e.depends_show_if||n.push(o)}}),!m()(n)}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isHoveredGroup",value:function(e){return this.state.hoveredGroup===e}},{key:"_isToggleOpened",value:function(e,t){var n="content"===t,o="design"===t,a="advanced"===t,i=ge(),r=be(),s=_e(),l=b()(["top","bottom"],i),u=te.default.topWindow().innerWidth<z.a.responsive.phone,d=(r&&l&&te.default.topWindow().innerWidth>1200||s>1200)&&!u;if(t&&d){if(n)return this.state.openedContentGroup===e;if(o)return this.state.openedDesignGroup===e;if(a)return this.state.openedAdvancedGroup===e}return this.state.openedToggle===e}},{key:"_onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"_onMouseLeaveGroup",value:function(e){this.state.hoveredGroup===e&&this.setState({hoveredGroup:null})}},{key:"_onClickHelp",value:function(e){var t=this.state.activeDescription===e?null:e;this.setState({activeDescription:t})}},{key:"_onClickToggle",value:function(t,n,o){var a=ge(),r=be(),s=_e(),l=b()(["top","bottom"],a),u=te.default.topWindow().innerWidth<z.a.responsive.phone,d=(r&&l&&te.default.topWindow().innerWidth>1200||s>1200)&&!u,c="content"===o,p="design"===o,f="advanced"===o;if(this._isToggleOpened(t,o)&&d){if(c)return this.setState({openedContentGroup:"",openedToggle:""});if(p)return this.setState({openedDesignGroup:"",openedToggle:""});if(f)return this.setState({openedAdvancedGroup:"",openedToggle:""})}if(this._isToggleOpened(t))this.setState({openedToggle:""});else{var h=1===n?0:61*n-10;d?e(Object(i.findDOMNode)(this)).find(".et-fb-tabs__panel--"+o).animate({scrollTop:h},300):e(Object(i.findDOMNode)(this)).find(".et-fb-tabs__panel--active").animate({scrollTop:h},300),this.setState({openedToggle:t,openedContentGroup:"content"===o?t:this.state.openedContentGroup,openedDesignGroup:"design"===o?t:this.state.openedDesignGroup,openedAdvancedGroup:"advanced"===o?t:this.state.openedAdvancedGroup})}}},{key:"_onFilterInput",value:function(e,t){this.setState({filterOptions:t,filterNotice:!1})}},{key:"_onFilterSelect",value:function(e){this.setState({filterSelected:e,filterDropdownActive:!1,filterNotice:!1})}},{key:"_onFilterDropdownToggle",value:function(){this.setState({filterDropdownActive:!this.state.filterDropdownActive})}},{key:"_onFilterReset",value:function(){this.setState({filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})}},{key:"_onFilterResetAll",value:function(){this.setState({filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})}},{key:"_setSearchFocus",value:function(){var t=this;setTimeout(function(){var n=e(Object(i.findDOMNode)(t)).find(".et-fb-options-filter input");n.length>0&&n.focus()},200)}},{key:"_isOptionMatchesFilter",value:function(e,t,n){var o=this.state.filterOptions,a=[e.label,e.description,t,n],i=this.state.filterSelected;if(""===o&&m()(i))return!0;var r=!1;if(o&&f()(a,function(e){c()(e)||-1===e.toLowerCase().indexOf(o.toLowerCase())||(r=!0)}),"styles_modified"===i){if("content"===e.tab_slug&&"background"!==e.toggle_slug)return!1;var s=this._isOptionDefaultValue(e);r=o?r&&!s:!s}return r}},{key:"_isOptionDefaultValue",value:function(e){var t=!0,n=e.default,o=Y.a.getPageSetting(e.id);if(!c()(e.depends_on)&&!this.isVisible(e,this.fields))return!0;if(c()(e.readonly)&&"readonly"===e.readonly)return!0;switch(e.type){case"yes_no_button":t=!(!m()(n)||"off"!==o)||n===o;break;default:t=!(!m()(n)||!m()(o))||n===o}return t}},{key:"renderToggleFields",value:function(e,t){return!!this.builder_display_modal_settings||(!(""===this.state.filterOptions&&!te.default.hasValue(this.state.filterSelected))||this._isToggleOpened(e,t))}},{key:"_getTogglesForTab",value:function(e){var t={};return f()(this.fields,function(n){var o=n.tab_slug,a=n.toggle_slug,i=n.hide_on_fb,r=n.type;o!==e||i||"hidden"===r||M()(t,a,!0)}),D()(this.toggles,function(e,n){return C()(t,n)||"unclassified"===n})}},{key:"_renderTab",value:function(e){var t=this,n=[],o=0,i=this._getTogglesForTab(e);return S()(i,function(i,r){o++;var l=B()(i)?i.title:i,u=B()(i)?i.sub_toggles:{};return a.a.createElement(ee.d,{key:r,title:l,toggleId:r,toggleGroupId:e,_onClickToggle:t._onClickToggle,isToggleOpened:t._isToggleOpened(r,e),toggleOrder:o,isLastToggle:G()(t.toggles)-1===o,isFilterActive:""!==t.state.filterOptions||te.default.hasValue(t.state.filterSelected),subToggles:u},!!t.renderToggleFields(r,e)&&S()(P()(F()(t.fields),["index"]),function(o,i){i=o.id;var u=void 0;if(o.name&&o.name.indexOf("custom_css")>=0&&(u=Y.a.getPageSetting(o.id)),!t._isOptionMatchesFilter(o,l,u))return!1;if(o.tab_slug!==e)return"";if(o.toggle_slug!==r)return!1;if(o.hide_on_fb)return"";if(c()(o.name)&&(o.name=o.id),"categories"===o.type&&(o.categories_list={},o.taxonomy_name=c()(o.taxonomy_name)?"category":o.taxonomy_name),"select_sidebar"===o.type&&(o.sidebars_list={}),c()(me[o.type]))return!1;var d={isPageSetting:!0};if("codemirror"===o.type&&(d.search=t.state.filterOptions),!c()(o.depends_on_post_type)&&-1===o.depends_on_post_type.indexOf(ETBuilderBackend.postType))return n.push(o.name),!1;if(!c()(o.depends_on)&&!t.isVisible(o,t.fields))return n.push(o.name),!1;if(!c()(o.depends_on)&&v()(o.depends_on,k()(o.depends_on,n)))return!1;var p={"et-fb-settings-options":!0};p["et-fb-option--"+o.type.replace("_","-")]=!0,c()(o.depends_show_if)||(p[" et-fb-settings-option--depends-on"]=!0);var f="",h="",m=!c()(o.description)&&""!==o.description,_=V()(function(e){return te.default.get(H()(e,"default_on_front"),te.default.get(H()(e,"defaultValue"),te.default.get(H()(e,"default"),"")))}(o)),b=V()(Y.a.getPageSetting(o.id)),g=_===b?"":b;return c()(o.label)||""===o.label||(f=a.a.createElement(ee.c,{name:o.name,activeHelp:t._isDescriptionVisible(o.name),hoveredGroup:t._isHoveredGroup(o.name),isResetActive:te.default.get(g,_)!==_,onClickReset:t._onClickReset,key:"et-fb-settings-option-label-"+i,onClickHelp:!!m&&t._onClickHelp},o.label)),m&&(h=a.a.createElement(ee.a,{active:t._isDescriptionVisible(o.name),key:"et-fb-settings-option-description-"+i},o.description)),a.a.createElement(ee.b,{name:o.name,key:"et-fb-settings-option-form-group-"+i,onMouseEnterGroup:t._onMouseEnterGroup,onMouseLeaveGroup:t._onMouseLeaveGroup},f,h,a.a.createElement("div",{className:s()(p),key:"et-fb-settings-option-"+i},a.a.createElement("div",{className:"et-fb-settings-option-container",key:"et-fb-settings-option-container-"+i},a.a.createElement(me[o.type],N()({key:o.id,value:g,name:o.id,content:g,_onChange:t._onChange,animate:t.props.options.animate,defaultValue:_},d,o)))))}))})}},{key:"_handleFormSubmission",value:function(e){e.preventDefault(),K.b.pageSettingsClose()}},{key:"maybeShowFilterNotice",value:function(){var t=this;this.state.filterNotice||m()(this.state.filterOptions)&&m()(this.state.filterSelected)||(clearTimeout(ve),ve=setTimeout(function(){e(Object(i.findDOMNode)(t)).find(".et-fb-form__group").length||(e(Object(i.findDOMNode)(t)).find(".et-fb-options-filter input").blur(),t.setState({filterNotice:!0}))},300))}},{key:"_renderPageSettingsPanel",value:function(e){var t={},n=["styles_modified"];return f()(ETBuilderBackend.searchFilterItems,function(e,o){c()(t[o])&&(t[o]={}),f()(e,function(e,a){n.includes(a)&&(t[o][a]=e)})}),a.a.createElement(Z.c,{className:"et-fb-tabs__panel--"+e,key:"et-fb-tabs__panel--"+e,displayFilter:!0,filterValue:this.state.filterOptions,_onFilterInput:this._onFilterInput,filterItems:t,filterGroups:{show_only:ETBuilderBackend.i18n.modals.show_only},filterDropdownActive:this.state.filterDropdownActive,filterSelected:this.state.filterSelected,filterNotice:this.state.filterNotice,_onFilterSelect:this._onFilterSelect,_onFilterDropdownToggle:this._onFilterDropdownToggle,_onFilterReset:this._onFilterReset,_onFilterResetAll:this._onFilterResetAll},a.a.createElement(ee.e,{onSubmit:this._handleFormSubmission},a.a.createElement("input",{type:"submit",className:"et-fb-hide"}),this._renderTab(e),!(this.state.filterNotice||(this.state.filterOptions||this.state.filterSelected)&&b()(["content","design"],e))&&a.a.createElement(J.a,{id:"et_pb_default"})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onModalChange,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["onModalChange"]),i=ETBuilderBackend.i18n.modals.pageSettings.tabs,r=[a.a.createElement(q.a,{block:!0,danger:!0,buttonName:$.a.PAGE_SETTINGS_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},a.a.createElement(Q.a,{icon:"exit",color:"#FFFFFF"})),a.a.createElement(q.a,{block:!0,primary:!0,alt:!0,buttonName:$.a.PAGE_SETTINGS_BUTTON_UNDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.undo},a.a.createElement(Q.a,{icon:"undo",color:"#FFFFFF"})),a.a.createElement(q.a,{block:!0,info:!0,buttonName:$.a.PAGE_SETTINGS_BUTTON_REDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.redo},a.a.createElement(Q.a,{icon:"redo",color:"#FFFFFF"})),a.a.createElement(q.a,{block:!0,success:!0,buttonName:$.a.PAGE_SETTINGS_EDIT,tooltip:ETBuilderBackend.i18n.tooltip.modal.save},a.a.createElement(Q.a,{icon:"check",color:"#FFFFFF"}))],l=s()({"et-fb-modal__module-settings":!0,"et-fb-modal__filter-active":""!==this.state.filterOptions||te.default.hasValue(this.state.filterSelected)}),u=this.props.activeTab||0;return a.a.createElement(X.a,pe({className:l,footerButtons:r,fullscreen:Y.a.getAppPreference("modal_fullscreen"),globalUpdate:!0,label:ETBuilderBackend.i18n.modals.pageSettings.title,measurement:{height:Y.a.getAppPreference("modal_dimension_height"),width:Y.a.getAppPreference("modal_dimension_width")},onModalChange:n,position:{x:Y.a.getAppPreference("modal_position_x"),y:Y.a.getAppPreference("modal_position_y")},snapLocation:Y.a.getAppPreference("modal_snap_location")},o),a.a.createElement(Z.d,{selectedIndex:u},a.a.createElement(Z.b,null,S()(i,function(e,t){return a.a.createElement(Z.a,{key:"et-fb-modal--builder-settings-"+t},e)})),S()(i,function(t,n){return e._renderPageSettingsPanel(n)})))}},{key:"_onChange",value:function(e,t){"et_pb_enable_ab_testing"===e&&te.default.isOff(t)&&Y.a.abIsMode("on")?K.b.abDisable():K.b.pageSettingsChange(e,t)}}]),n}(),ke=function(){var e=this;this._onClickReset=function(t){var n=t.props;return e._onChange(n.name,"")}};ye.propTypes=he,t.default=ye}.call(this,n(30))},1260:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(16),l=n(14),u=n.n(l),d=n(53),c=n.n(d),p=n(27),f=n.n(p),h=n(219),m=n.n(h),_=n(100),b=n.n(_),g=n(28),v=n.n(g),y=(n(55),n(39),n(10)),k=n.n(y),E=n(7),S=n.n(E),w=n(36),C=n.n(w),T=n(87),M=n.n(T),O=n(59),F=n.n(O),A=n(9),N=n.n(A),L=n(5),P=n.n(L),I=n(514),D=n.n(I),x=n(19),B=n.n(x),j=n(37),G=n.n(j),R=n(48),H=n.n(R),W=n(43),V=n.n(W),U=n(49),$=n.n(U),z=n(2),K=n.n(z),q=(n(76),n(12)),J=n.n(q),Q=n(26),X=n.n(Q),Y=n(56),Z=n.n(Y),ee=n(89),te=n.n(ee),ne=(n(44),n(75)),oe=n.n(ne),ae=n(41),ie=n.n(ae),re=n(65),se=n.n(re),le=n(47),ue=n.n(le),de=n(80),ce=n.n(de),pe=n(255),fe=n.n(pe),he=n(191),me=n.n(he),_e=n(82),be=n.n(_e),ge=n(78),ve=n.n(ge),ye=(n(123),n(25),n(85),n(515)),ke=n.n(ye),Ee=n(322),Se=n.n(Ee),we=n(175),Ce=n.n(we),Te=n(190),Me=n.n(Te),Oe=n(268),Fe=n.n(Oe),Ae=(n(34),n(0)),Ne=n(15),Le=n(8),Pe=n(40),Ie=n(11),De=n(3),xe=n(29),Be=n(731),je=n(409),Ge=n(21),Re=n(243),He=n(31),We=n(574),Ve=n(227),Ue=n(131),$e=n(1250),ze=n(1248),Ke=n(242),qe=n(1246),Je=n(64),Qe=n(13),Xe=n(735),Ye=n(144),Ze=n(304),et=n(303),tt=n(20),nt=n(61),ot=n(410),at=n(22),it=(n(81),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},st=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dt=e(".et_fb_preview_container"),ct=ue()(function(){dt.removeClass("et_fb_preview_container__disable_animations")},1500),pt=xe.a.getBackgroundFieldsNames(),ft=function(e){var t=Ne.a.getFieldBaseName(e).split("_");return"padding"===t[0]&&M()(parseInt(t[1]))&&2===t.length},ht=function(e){return ft(e)?Ne.a.getFieldBaseName(e).split("_")[1]:NaN},mt=function(e){return["padding_top_"+e,"padding_right_"+e,"padding_bottom_"+e,"padding_left_"+e]},_t=function(e,t){var n=t[e+"_last_edited"],o=P()(n)?["off","desktop"]:n.split("|");return!P()(o[0])&&"on"===o[0]},bt=new(function(){function e(){ut(this,e),this.reset()}return st(e,[{key:"reset",value:function(){this.type="",this.data={},this.elementsType="",this.elementsData={}}},{key:"has",value:function(e,t){return e===this.type&&v()(this.data,t)}},{key:"get",value:function(e,t){return e===this.type?K()(this.data,t):void 0}},{key:"set",value:function(e,t,n){return e!==this.type&&(this.data={},this.type=e),ie()(this.data,t,n),!1}},{key:"hasElements",value:function(e,t){return e===this.elementsType&&v()(this.elementsData,t)}},{key:"getElements",value:function(e,t){return e===this.elementsType&&K()(this.elementsData,t)}},{key:"setElements",value:function(e,t,n){return e!==this.elementsType&&(this.elementsData={},this.elementsType=e),ie()(this.elementsData,t,n),!1}}]),e}());function gt(e,t){var n=t?"general_fields__"+t:e;if(bt.has(e,n))return bt.get(e,n);var o=De.a.filterUserFields(xe.a.getComponentFields(t||e));return bt.set(e,n,o),o}function vt(e){if(bt.has(e,"advanced_fields"))return bt.get(e,"advanced_fields");var t=De.a.filterUserFields(xe.a.getComponentAdvancedFields(e));return bt.set(e,"advanced_fields",t),t}function yt(e){if(bt.has(e,"css_fields"))return bt.get(e,"css_fields");var t=De.a.filterUserFields(xe.a.getComponentCSSFields(e));return bt.set(e,"css_fields",t),t}function kt(){return De.a.getAppPreference("modal_snap")}function Et(){return De.a.getAppPreference("modal_snap_location")}var St=function(e,t,n){var o=K()(n,e,"");return S()(o)||o===K()(t,"default","")},wt={isVisible:r.a.oneOfType([r.a.array,r.a.bool,r.a.object]),module:r.a.oneOfType([r.a.array,r.a.object,r.a.bool]),onModalChange:r.a.func},Ct=xe.a.shouldInheritParentDefaults,Tt=xe.a.inheritParentDefaults,Mt=function(t){function n(e){ut(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));if(t._onComponentFieldDefinitionsChange=function(e,n){bt.reset(),e===K()(t,"props.module.type")?t.setState({generalFields:n}):t.forceUpdate()},t._isDescriptionVisible=function(e){return t.state.activeDescription===e},t.optionsWithContext=Me()(function(){return function e(t){return m()(t,function(t,n,o){switch(n.type){case"composite":return m()(K()(n,"composite_structure",{}),function(t,n){return rt({},t,e(K()(n,"controls",{})))},t);default:return n.context?rt({},t,lt({},o,n.context)):t}},{})}(rt({},K()(t.state,"advancedFields",{}),K()(t.state,"cssFields",{}),K()(t.state,"generalFields",{})))}),t.optionContext=function(e){return K()(t.optionsWithContext(),e)},t._isHoveredGroup=function(e){var n=Fe()(t.state.hoveredGroup).filter(Ae.default.hasValue).map(Ne.a.getFieldBaseName),o=Ne.a.getFieldBaseName(e);return!!N()(n,o)||!!n.map(t.optionContext).find(function(e){return Ne.a.getFieldBaseName(e)===o})},t._onChangeCacheReset=function(){return bt.reset()},t._onMouseEnterGroup=function(e,n,o,a,i){t.hoverStarted=(new Date).getTime(),Ae.default.appWindow().clearTimeout(Ae.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),Ae.default.appWindow().clearTimeout(t.mouseLeaveTimeout),Ae.default.appWindow().ETBuilderFormGroupMouseEnterTimeout=setTimeout(function(){t.setState({hoveredGroup:e})},200);var r=Ye.a.getHelper("option").preparePayload(e,n,o,t.props.module,a,i);t._setHoveredElement("option",e,r)},t._onMouseLeaveGroup=function(e,n){if(Ae.default.appWindow().clearTimeout(Ae.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),Ae.default.appWindow().clearTimeout(t.mouseLeaveTimeout),t.state.hoveredGroup===e){(new Date).getTime()-t.hoverStarted>600?t.mouseLeaveTimeout=setTimeout(function(){return t.setState({hoveredGroup:null})},300):t.setState({hoveredGroup:null})}t._setHoveredElement(!1)},t._onMouseEnterTitle=function(){var e=t.props.module;Ie.b.setHoveredModuleElement(e)},t._onMouseLeaveTitle=function(){Ie.b.setHoveredElement(!1)},t._onClickHelp=function(e){e=Ne.a.getFieldBaseName(e);var n=t.state.activeDescription===e?null:e;t.setState({activeDescription:n})},t._setHoveredElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ie.b.setHoveredElement(e,t,n)},t.module_type=K()(e,"module.props.type",null),t.state=J()({activeDescription:null,activeHover:null,activeHoverField:null,hoveredGroup:null,openedToggle:"main_content",openedGeneralGroup:"main_content",openedDesignGroup:"",openedCSSGroup:"",advancedFields:t.module_type&&vt(t.module_type),generalFields:t.module_type&&gt(t.module_type),cssFields:t.module_type&&yt(t.module_type),filterOptions:e.filterOptions||"",filterSelected:e.filterSelected,filterNotice:!1},t.getCustomTabsFields(t.module_type)),t.setting_resolver=new Ze.a(t.props.module,{},"props.attrs."),!K()(t,"props.module.props.is_official_module")){var o=t.maybeGetFirstOpenedToggle();o&&(t.state.openedToggle=o,t.state.openedGeneralGroup=o)}return t._hasColumnsFields=t._hasColumnsFields.bind(t),t._onChange=t._onChange.bind(t),t._resetOption=t._resetOption.bind(t),t._isResetActive=t._isResetActive.bind(t),t._onClickHelp=t._onClickHelp.bind(t),t._onClickHover=t._onClickHover.bind(t),t._onClickResponsive=t._onClickResponsive.bind(t),t._onClickReset=t._onClickReset.bind(t),t._onMouseEnterGroup=t._onMouseEnterGroup.bind(t),t._onMouseLeaveGroup=t._onMouseLeaveGroup.bind(t),t._onClickToggle=t._onClickToggle.bind(t),t._handleFormSubmission=t._handleFormSubmission.bind(t),t._unsyncGlobalSetting=t._unsyncGlobalSetting.bind(t),t._unsyncGlobalContent=t._unsyncGlobalContent.bind(t),t._onFilterInput=t._onFilterInput.bind(t),t._onFilterSelect=t._onFilterSelect.bind(t),t._onFilterDropdownToggle=t._onFilterDropdownToggle.bind(t),t._onFilterReset=t._onFilterReset.bind(t),t._onFilterResetAll=t._onFilterResetAll.bind(t),t._onGoToOption=t._onGoToOption.bind(t),t._isOptionMatchesFilter=t._isOptionMatchesFilter.bind(t),t._setSearchFocus=t._setSearchFocus.bind(t),t._handleShortcuts=t._handleShortcuts.bind(t),t._onComponentAdvancedFieldDefinitionChange=t._onComponentAdvancedFieldDefinitionChange.bind(t),t._onComponentFieldDefinitionChange=t._onComponentFieldDefinitionChange.bind(t),t._onComponentCSSFieldDefinitionChange=t._onComponentCSSFieldDefinitionChange.bind(t),t._getOptionsFields=t._getOptionsFields.bind(t),t.getTabsCount=t.getTabsCount.bind(t),t.maybeGetFirstOpenedToggle=t.maybeGetFirstOpenedToggle.bind(t),t._onQuickAccessActive=t._onQuickAccessActive.bind(t),t._setHoveredToggleElement=t._setHoveredToggleElement.bind(t),t._setHoveredSubToggleElement=t._setHoveredSubToggleElement.bind(t),t.productTourOptionToggle=!1,t.builder_display_modal_settings=De.a.getAppPreference("builder_display_modal_settings"),t.updatedAttrs={},t.mouseLeaveTimeout=0,t.hoverStarted=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),st(n,[{key:"componentWillMount",value:function(){bt.reset(),xe.a.addComponentAdvancedFieldDefinitionChangeListener(this._onComponentAdvancedFieldDefinitionChange),xe.a.addComponentFieldDefinitionChangeListener(this._onComponentFieldDefinitionChange),xe.a.addComponentFieldDefinitionsChangeListener(this._onComponentFieldDefinitionsChange),xe.a.addComponentCSSFieldDefinitionChangeListener(this._onComponentCSSFieldDefinitionChange),De.a.addGoToOptionListener(this._onGoToOption),De.a.addQuickAccessActiveListener(this._onQuickAccessActive),this._onChangeCacheReset=ue()(this._onChangeCacheReset,400,{leading:!0,trailing:!1})}},{key:"componentDidMount",value:function(){Ae.default.topWindow().document.addEventListener("keydown",this._handleShortcuts),this.setState({tabsCount:this.getTabsCount()}),this.searchField=e(Object(s.findDOMNode)(this)).find(".et-fb-options-filter input"),this._setSearchFocus()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props;if(K()(n,"module.props.address","")!==K()(e,"module.props.address","")){var o=K()(e,"module.props.is_module_child"),a=this.maybeGetFirstOpenedToggle(o);a&&this.setState({openedToggle:a})}n.isVisible&&!e.isVisible&&(this.setState({filterOptions:"",openedToggle:"main_content",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1}),this.productTourOptionToggle=!1,this._setSearchFocus()),this.maybeShowFilterNotice()}},{key:"componentWillReceiveProps",value:function(e){S()(e.optionsFilter)||bt.reset();var t=K()(e,"module.props.type");if(e.module&&this.props.module.type!==t&&!C()(this.props,e)){var n=vt(e.module.props.type),o=gt(e.module.props.type),a=yt(e.module.props.type),i=this.getCustomTabsFields(e.module.props.type);this.setState(rt({advancedFields:n,generalFields:o,cssFields:a},i)),this.setting_resolver.source_object=t}}},{key:"componentWillUpdate",value:function(e){if(!C()(K()(this,"props.isVisible"),K()(e,"isVisible"))){var t=De.a.getAppPreference("builder_display_modal_settings"),n=K()(e,"module.props.type");if(t&&!P()(n)){var o=Z()(xe.a.getComponentFieldsByTypes(n,["custom_margin","custom_padding","range"]));Ie.b.setListenerQuotaForGroup("settings-modal",o)}}}},{key:"componentWillUnmount",value:function(){Ie.b.settingFieldFocused(!1),Ae.default.appWindow().clearTimeout(Ae.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),Ae.default.appWindow().clearTimeout(this.mouseLeaveTimeout),ct.flush(),xe.a.removeComponentAdvancedFieldDefinitionChangedListener(this._onComponentAdvancedFieldDefinitionChange),xe.a.removeComponentFieldDefinitionChangedListener(this._onComponentFieldDefinitionChange),xe.a.removeComponentFieldDefinitionsChangedListener(this._onComponentFieldDefinitionsChange),xe.a.removeComponentCSSFieldDefinitionChangedListener(this._onComponentCSSFieldDefinitionChange),De.a.removeQuickAccessActiveListener(this._onQuickAccessActive),Ae.default.topWindow().document.removeEventListener("keydown",this._handleShortcuts),clearTimeout(this.focusTimer),clearTimeout(this.filterNoticeTimer),clearTimeout(this.filterTimer),clearTimeout(this.goToOptionTimer),clearTimeout(this.quickAccessScrollUp),clearTimeout(this.quickAccessOpenToggle),De.a.removeGoToOptionListener(this._onGoToOption)}},{key:"maybeGetFirstOpenedToggle",value:function(e){var t=this.props.module,n=K()(t,"props.type"),o=this._getNonEmptyToggles(n,"general.toggles","general"),a=K()(o,"toggles"),i=K()(a,this.state.openedToggle);if(e){var r=K()(t,"props.module_items_config",{}),s=K()(r,"toggle_slug");if(s)return s;if(!i)return"main_content"}if(i)return!1;if(!a)return!1;var l=f()(a,function(e,t){var n=G()(e)?e:{title:e,priority:10};return n.name=t,n}),u=me()(l,"priority","asc");return K()(be()(u),"name","main_content")}},{key:"_handleShortcuts",value:function(e){var t=this,n=e.metaKey,o=e.altKey,a=e.ctrlKey,i=27===e.keyCode,r=e.shiftKey,l=32===e.keyCode,u=Ae.default.$topWindow(Object(s.findDOMNode)(this)).find(".et-fb-options-filter input"),d=u.length>0&&u.is(":focus");if(!(d&&r&&l))return i&&""!==this.state.filterOptions||i&&Ae.default.hasValue(this.state.filterSelected)?(e.preventDefault(),this.filterTimer=setTimeout(function(){t.setState({filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})},300),!1):void(!d||n||o||a||27===e.keyCode||e.stopPropagation());e.preventDefault()}},{key:"_onComponentAdvancedFieldDefinitionChange",value:function(e,t,n){var o=J()({},this.state.advancedFields);ie()(o,[e,t],n),this.setState({advancedFields:o})}},{key:"_onComponentFieldDefinitionChange",value:function(e,t,n){var o=J()({},this.state.generalFields);ie()(o,[e,t],n),bt.reset(),this.setState({generalFields:o})}},{key:"_onComponentCSSFieldDefinitionChange",value:function(e,t,n){var o=J()({},this.state.cssFields);ie()(o,[e,t],n),this.setState({cssFields:o})}},{key:"getCustomTabsList",value:function(){var e=function(e){if(bt.has(e,"module_custom_tabs"))return bt.get(e,"module_custom_tabs");var t=xe.a.getComponentCustomTabs(e);return bt.set(e,"module_custom_tabs",t),t}(this.props.module.props.type);return!S()(e)&&e}},{key:"getCustomTabsFields",value:function(e){var t=this.getCustomTabsList();if(!t)return!1;var n={};return k()(t,function(t,o){n[o+"Fields"]=function(e,t){if(bt.has(e,"custom_tab-"+t))return bt.get(e,"custom_tab-"+t);var n=De.a.filterUserFields(xe.a.getComponentCustomTabFields(e,t));return bt.set(e,"custom_tab-"+t,n),n}(e,o)}),n}},{key:"getModule",value:function(){return this.props.module}},{key:"getBulk",value:function(){var e=this.getModule(),t=K()(e,"props.address");return S()(e)?{}:De.a.isMultiItemSelected(t)?De.a.getMultiSelectItemsData():lt({},t,e)}},{key:"_isVisible",value:function(e,t){var n=this,o=this.props.module,a=[];return k()(e.depends_on,function(i){var r=Ne.a.isEnabled(i,o.props.attrs),s=De.a.getHoverMode(),l=i;i=!0===r&&!0===s?Ne.a.getHoverField(i):i;var u=K()(t[i],"type","");if(K()(t[i],"depends_on",!1)&&!n._isVisible(t[i],t))return!1;var d=K()(o.props.attrs,i,K()(t[i],"default",""));if(r&&s&&P()(d)&&(d=K()(t[l],"default",K()(t[l],"shortcode_default"))),"upload"!==u&&"text"!==u||""===d||(d="on"),P()(e.depends_show_if)||d!==e.depends_show_if||a.push(i),!P()(e.depends_show_if_not)){var c=e.depends_show_if_not;if(v()(e,"depends_on_responsive")&&N()(e.depends_on_responsive,i)){var p=K()(o,["props","attrs",i],""),f=K()(o,["props","attrs",i+"_tablet"],""),h=K()(o,["props","attrs",i+"_phone"],"");Ae.default.getResponsiveStatus(K()(o,["props","attrs",i+"_last_edited"]))?N()(c,p)&&N()(c,f)&&N()(c,h)||a.push(i):N()(c,p)||a.push(i)}else{(B()(c)?!N()(c,d):d!==c)&&a.push(i)}}}),!S()(a)}},{key:"_isModuleItemSettings",value:function(){return!P()(this.props.module.isModuleItem)}},{key:"_isModalExpanded",value:function(){var e=Et(),t=kt(),n=De.a.getAppPreference("modal_dimension_width"),o=N()(["top","bottom"],e),a=Ae.default.topWindow().innerWidth<Pe.a.responsive.phone;return(t&&o&&Ae.default.topWindow().innerWidth>1200||n>1200)&&!a}},{key:"_isToggleOpened",value:function(e,t){var n="general"===t,o="design"===t,a="css"===t,i=this._isModalExpanded();if(t&&i){if(n)return this.state.openedGeneralGroup===e;if(o)return this.state.openedDesignGroup===e;if(a)return this.state.openedCSSGroup===e}return this.state.openedToggle===e}},{key:"_hasColumnsFields",value:function(){var e=this.props.module.props.type,t=this.props.module.props.attrs,n=Ae.default.isOn(t.specialty)&&"et_pb_section"===e;return N()(["et_pb_row","et_pb_row_inner"],e)||n}},{key:"_hasModuleItem",value:function(){return!V()(this.props.module.props.child_slug)&&!P()(this.props.module.props.child_slug)}},{key:"exitHoverMode",value:function(){De.a.getHoverMode()&&(Ie.b.toggleModuleHover(!1),Ie.b.moduleSettingsChange(this.props.module,"hover_enabled",0))}},{key:"_onChange",value:function(e,t,n,o,a){this._onChangeCacheReset(),this.updatedAttrs[e]=t;var i=K()(this.props.module,"props.address"),r=De.a.isMultiItemSelected(i);if("raw_content"===e)return this.exitHoverMode(),void(r?Ie.b.multiSelectContentChange(this.props.module,t):Ie.b.moduleContentChange(this.props.module,t));var s=e.split("_"),l="padding_mobile"!==e&&"padding"===s[0]&&2===s.length;if(o)!P()(this.props.module)&&this.props.module&&(this.exitHoverMode(),r?Ie.b.multiSelectContentChange(this.props.module,t):Ie.b.moduleContentChange(this.props.module,t));else{P()(this.props.module)||P()(this.props.module.props)||"et_pb_social_media_follow_network"!==this.props.module.props.type||"social_network"!==e||(r?Ie.b.multiSelectContentChange(this.props.module,t):Ie.b.moduleContentChange(this.props.module,t));var u=N()(["custom_css_before","custom_css_main_element","custom_css_after"],e)?e.replace("custom_css_",""):e,d=this.getModule(),c=K()(d,"props.attrs"),p=De.a.getHoverMode(),h=this._getAllOptionsFields()[u],m=P()(h)||P()(h.depends_on)?e:h.depends_on[0],_=!P()(h)&&!!h.hover&&(Ne.a.isEnabled(e,c)||Ne.a.isEnabled(m,c)),b=!0===p&&!0===_?Ne.a.hoverSuffix():"",g=K()(this,"props.module.props.type"),y=K()(this,"props.module.props.attrs."+e);if($()(g,"et_pb_signup")){var k=ETBuilderBackend.emailPredefinedCustomFields,E=K()(this,"props.module"),S=K()(E,"props.attrs"),w=K()(E,"parentModule.props.attrs"),C=gt("et_pb_signup"),T=K()(C,"provider.default"),M=K()(S,"provider",K()(w,"provider",T)),O=K()(S,M+"_list",K()(w,M+"_list","")).split("|"),F=it(O,2),A=F[0],L=F[1];if("et_pb_signup"===g){var I=v()(k,[M,A,L]),D=!1;"provider"===e&&t!==y?D=!0:I&&M+"_list"===e&&t!==y&&(D=!0),D&&Ie.b.deleteModuleChildren(K()(this,"props.module.props.address"))}else if("et_pb_signup_custom_field"===g&&$()(e,"predefined_field_")&&t!==y){r?Ie.b.multiSelectSettingsChange(E,"predefined_field",t):Ie.b.moduleSettingsChange(E,"predefined_field",t);var x=[M,A];v()(k,[M,A,"custom_fields"])?x.push("custom_fields"):x.push(L),x.push(K()(S,"predefined_field"));var B=K()(k,x);if(B){if(B.field_id!==S.field_id&&(r?Ie.b.multiSelectSettingsChange(E,"field_id",B.field_id.toString()):Ie.b.moduleSettingsChange(E,"field_id",B.field_id.toString())),B.name!==S.field_title&&(r?Ie.b.multiSelectSettingsChange(E,"field_title",B.name):Ie.b.moduleSettingsChange(E,"field_title",B.name)),!P()(B.hidden)||"on"===K()(E,"props.attrs.hidden")){var j=B.hidden?"on":"off";j!==S.hidden&&(r?Ie.b.multiSelectSettingsChange(E,"hidden",j):Ie.b.moduleSettingsChange(E,"hidden",j))}if("any"!==B.type&&B.type!==S.field_type&&(r?Ie.b.multiSelectSettingsChange(E,"field_type",B.type):Ie.b.moduleSettingsChange(E,"field_type",B.type),B.options)){var G=f()(B.options,function(e,t){return{checked:0,value:e,id:t}});r?Ie.b.multiSelectSettingsChange(E,B.type+"_options",JSON.stringify(G)):Ie.b.moduleSettingsChange(E,B.type+"_options",JSON.stringify(G))}}}}if(l){var R=s[1],W=H()(t)?t.split("|"):["","","","","",""],V=P()(W[0])?"":W[0],U=P()(W[1])?"":W[1],z=P()(W[2])?"":W[2],q=P()(W[3])?"":W[3],J=P()(W[4])?"":W[4],Q=P()(W[5])?"":W[5];r?(Ie.b.multiSelectSettingsChange(this.props.module,"padding_top_"+R+b,V,null,n),Ie.b.multiSelectSettingsChange(this.props.module,"padding_right_"+R+b,U,null,n),Ie.b.multiSelectSettingsChange(this.props.module,"padding_bottom_"+R+b,z,null,n),Ie.b.multiSelectSettingsChange(this.props.module,"padding_left_"+R+b,q,null,n),Ie.b.multiSelectSettingsChange(this.props.module,"padding_top_bottom_link_"+R+b,J,null,n),Ie.b.multiSelectSettingsChange(this.props.module,"padding_left_right_link_"+R+b,Q,null,n)):(Ie.b.moduleSettingsChange(this.props.module,"padding_top_"+R+b,V,null,n),Ie.b.moduleSettingsChange(this.props.module,"padding_right_"+R+b,U,null,n),Ie.b.moduleSettingsChange(this.props.module,"padding_bottom_"+R+b,z,null,n),Ie.b.moduleSettingsChange(this.props.module,"padding_left_"+R+b,q,null,n),Ie.b.moduleSettingsChange(this.props.module,"padding_top_bottom_link_"+R+b,J,null,n),Ie.b.moduleSettingsChange(this.props.module,"padding_left_right_link_"+R+b,Q,null,n))}else 0===e.indexOf("custom_css")&&(dt.addClass("et_fb_preview_container__disable_animations"),ct()),r?Ie.b.multiSelectSettingsChange(this.props.module,""+e+b,t,null,n,a):Ie.b.moduleSettingsChange(this.props.module,""+e+b,t,null,n,a)}}},{key:"_resetOption",value:function(e){P()(e)||""===e||Ie.b.moduleSettingsChange(this.props.module,e,"")}},{key:"_onClickHover",value:function(e){var t=Ne.a.isEnabled(e,K()(this.getModule(),"props.attrs"))?"":"on",n=this.getModule(),o=Ne.a.getFieldBaseName(e);if(n){var a=K()(n,"props.address"),i=De.a.isMultiItemSelected(a);if(i?Ie.b.multiSelectSettingsChange(n,Ne.a.getHoverEnabledField(o),t):Ie.b.moduleSettingsChange(n,Ne.a.getHoverEnabledField(o),t),"on"===t)return;Ie.b.toggleModuleHover(!1),i?Ie.b.multiSelectSettingsChange(n,"hover_enabled",0):Ie.b.moduleSettingsChange(n,"hover_enabled",0)}}},{key:"_onClickResponsive",value:function(e){var t=this,n=Ne.a.getFieldBaseName(e),o=this.getModule(),a=K()(this.getModule(),"props.attrs."+n+"_last_edited","off|desktop");if(o){var i=K()(o,"props.address"),r=[Ae.default.getResponsiveStatus(a)?"off":"on",Ae.default.getResponsiveLastMode(a)].join("|");De.a.isMultiItemSelected(i)?Ie.b.multiSelectSettingsChange(o,n+"_last_edited",r):(Ie.b.moduleSettingsChange(o,n+"_last_edited",r),setTimeout(function(){t.forceUpdate()},0))}}},{key:"_onClickReset",value:function(e){if(!1!==K()(e,"props.name",!1)){var t=this._getAllOptionsFields()[e.props.name],n=Ae.default.get(K()(e,"props.default_on_front"),Ae.default.get(K()(e,"props.defaultValue"),K()(t,"default",""))),o=this.getModule(),a=K()(o,"props.address"),i=De.a.isMultiItemSelected(a),r=K()(o,"props.attrs"),s=Ne.a.getFieldBaseName(K()(e,"props.name",""));K()(e,"props.hasHoverOptions",!1)&&Ne.a.isEnabled(s,K()(o,"props.attrs"))&&Ne.a.isHoverMode()&&(s=Ne.a.getHoverField(s));var l=De.a.getPreviewMode(),u=K()(e,"props.hasResponsiveOptions",!1),d=K()(e,"props.isResponsiveEnabled",!1),c=N()(["phone","tablet"],l);if(u&&d&&c&&(s=s+"_"+l),o){var p=K()(e,"props.backgroundFields",!1);if(p)return void k()(p,function(e,t){var n=De.a.getHoverMode()?Ne.a.hoverSuffix():"";St("props.attrs."+t+n,e,o)||(i?Ie.b.multiSelectSettingsChange(o,""+t+n,K()(e,"default","")):Ie.b.moduleSettingsChange(o,""+t+n,K()(e,"default","")))});if("content"===s)i?Ie.b.multiSelectContentChange(o,n):Ie.b.moduleContentChange(o,n);else if(ft(s)){var f=mt(ht(s));i?f.map(function(e){return Ie.b.multiSelectSettingsChange(o,Ne.a.getCompositeFieldOnHover(e,s,r),"")}):f.map(function(e){return Ie.b.moduleSettingsChange(o,Ne.a.getCompositeFieldOnHover(e,s,r),"")})}else i?Ie.b.multiSelectSettingsChange(o,s,n):Ie.b.moduleSettingsChange(o,s,n)}}}},{key:"_isResetActive",value:function(e){if(!1===K()(e,"name",!1))return!1;var t=this.getModule(),n=K()(t,"props.attrs");if(!G()(t))return!1;var o=K()(e,"backgroundFields",!1);if(o){var a=De.a.getHoverMode()?Ne.a.hoverSuffix():"";return ve()(o,function(e,n){return!St("props.attrs."+n+a,e,t)})}var i=this._getAllOptionsFields(),r=Ne.a.getFieldBaseName(K()(e,"name","")),s=i[r],l=Ae.default.get(K()(e,"default"),K()(s,"default"));"font"===e.type&&""===l&&(l="||||||||"),Ne.a.doesSupport(e)&&Ne.a.isEnabled(r,K()(t,"props.attrs"))&&Ne.a.isHoverMode()&&(r=Ne.a.getHoverField(r));var u=De.a.getPreviewMode(),d=!1!==K()(e,"mobile_options",!1),c=N()(["phone","tablet"],u),p=Ae.default.getResponsiveStatus(K()(t,"props.attrs."+r+"_last_edited",""));d&&c&&p&&(r=r+"_"+u);var f="content"===K()(e,"name")?"props.content":"props.attrs."+r,h=K()(t,f);return ft(r)&&(h=mt(ht(r)).map(function(e){return K()(t,"props.attrs."+Ne.a.getCompositeFieldOnHover(e,r,n))}).join("|"),l="|||"),"tiny_mce"!==e.type||"<br />\n"!==h||!D()(l)&&""!==l||(h=""),l!==Ae.default.get(h,l)}},{key:"_onClickToggle",value:function(e,t,n,o){if(!De.a.getAppPreference("builder_display_modal_settings")){var a=this._isModalExpanded(),i=a?Pe.a.topbar.mobile:10,r="general"===n,l="design"===n,u="css"===n;if(this._isToggleOpened(e,n)&&P()(o)){if(r)return this.setState({openedGeneralGroup:"",openedToggle:""});if(l)return this._setHoveredToggleElement(e,!1,!0),this.setState({openedDesignGroup:"",openedToggle:""});if(u)return this.setState({openedCSSGroup:"",openedToggle:""})}if(!this._isToggleOpened(e)||(this.setState({openedToggle:""}),!P()(o))){var d="design"===n?"advanced":n,c=".et-fb-tabs__panel--"+d+" .et-fb-form__toggle[data-name='"+e+"']",p=Ae.default.$topWindow(c).prevAll(".et-fb-form__toggle").length+1,f=1===p?0:61*p-i,h=".et-fb-tabs__panel--"+d+" .et-fb-settings-module-items-wrap";"general"===d&&Ae.default.$topWindow(h).length&&(1===p&&(f+=Ae.default.$topWindow(".et-fb-options-filter-input-wrap").height()),f+=Ae.default.$topWindow(h).outerHeight()+30),a?Ae.default.$topWindow(Object(s.findDOMNode)(this)).find(".et-fb-tabs__panel--"+d).animate({scrollTop:f},300):Ae.default.$topWindow(Object(s.findDOMNode)(this)).find(".et-fb-tabs__panel--active").animate({scrollTop:f},300),this.setState({openedToggle:e,openedGeneralGroup:"general"===n?e:this.state.openedGeneralGroup,openedDesignGroup:"design"===n?e:this.state.openedDesignGroup,openedCSSGroup:"css"===n?e:this.state.openedCSSGroup}),l&&this._setHoveredToggleElement(e,!0,!0)}}}},{key:"_onQuickAccessActive",value:function(){var e=this,t=De.a.getActiveQuickAccess().clickedToggle,n=t.toggleId,o=t.toggleGroupId,a=this._isModalExpanded(),i=De.a.getAppPreference("builder_display_modal_settings"),r=a||i?Pe.a.topbar.mobile:10,l="design"===o?"advanced":o,u=".et-fb-tabs__panel--"+l+" .et-fb-form__toggle[data-name='"+n+"']";if(i)return clearTimeout(this.quickAccessScrollUp),void(this.quickAccessScrollUp=setTimeout(function(){var t=Ae.default.$topWindow(Object(s.findDOMNode)(e)).find(".et-fb-tabs__panel--"+l),n=Ae.default.$topWindow(u);if(0!==n.length){var o=n[0].offsetTop;t.animate({scrollTop:o},300)}},0));var d=Ae.default.$topWindow(u).prevAll(".et-fb-form__toggle").length+1,c=1===d?0:61*d-r;a?(Ae.default.$topWindow(Object(s.findDOMNode)(this)).find(".et-fb-tabs__panel--"+l).animate({scrollTop:c},300),this.setState({openedToggle:n,openedGeneralGroup:"general"===o?n:this.state.openedGeneralGroup,openedDesignGroup:"design"===o?n:this.state.openedDesignGroup,openedCSSGroup:"css"===o?n:this.state.openedCSSGroup,filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})):(clearTimeout(this.quickAccessScrollUp),this.quickAccessScrollUp=setTimeout(function(){Ae.default.$topWindow(Object(s.findDOMNode)(e)).find(".et-fb-tabs__panel--active").animate({scrollTop:c},300)},0),clearTimeout(this.quickAccessOpenToggle),this.quickAccessOpenToggle=setTimeout(function(){e.setState({openedToggle:n,openedGeneralGroup:"general"===o?n:e.state.openedGeneralGroup,openedDesignGroup:"design"===o?n:e.state.openedDesignGroup,openedCSSGroup:"css"===o?n:e.state.openedCSSGroup,filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})},300))}},{key:"_setHoveredToggleElement",value:function(e,t,n){var o=this.props.module,a=K()(o,"props.type"),i=K()(o,"props.address");if(!P()(tt.h[a])){var r=tt.h[a];if(!P()(r[e])){var s={moduleAddress:i,toggleId:e,elementAddress:i,elementOrder:10,elementKey:null,elementOuter:null,toggleSubId:0,isChild:!P()(o.isModuleItem),src:"settings",isOpened:t,hovered:n,isSubOpened:!1,subHovered:!1};Ie.b.quickAccessHighlight(s)}}}},{key:"_setHoveredSubToggleElement",value:function(e,t,n,o){var a=this.props.module,i=K()(a,"props.address");if(!P()(tt.f[e])){var r=tt.f[e],s=Se()(r);if(!P()(s[t])){var l={moduleAddress:i,toggleId:e,elementAddress:i,elementOrder:10,elementKey:null,elementOuter:null,toggleSubId:t,isChild:!P()(a.isModuleItem),src:"settings",isOpened:!0,hovered:!1,isSubOpened:n,subHovered:o};Ie.b.quickAccessHighlight(l)}}}},{key:"_unsyncGlobalContent",value:function(){this._unsyncGlobalSetting("et_pb_content_field",!0)}},{key:"_unsyncGlobalSetting",value:function(e,t){Ie.b.unsyncGlobalSetting(e,this.props.module,t)}},{key:"_handleFormSubmission",value:function(t){if(t.preventDefault(),(P()(K()(this,"props.module.props.loading"))||!this.props.module.props.loading)&&!e(Object(s.findDOMNode)(this)).find(":focus").hasClass("wp-color-picker")){var n=this,o=this.props.module;k()(this.state.generalFields,function(e){"text"===e.type&&(P()(e.name)||-1===e.name.indexOf("url")&&-1===e.name.indexOf("alt")&&-1===e.name.indexOf("link")&&n._onChange(e.name,Ae.default.decodeHtmlEntities(o.props.attrs[e.name])))}),Ie.b.closeSettings(this._isModuleItemSettings())}}},{key:"_handleFieldConditionalDefaults",value:function(e,t,n){return B()(e.default)&&!S()(e.default)?rt({},e,{conditionalDefaults:e.default,default:n&&!S()(K()(t,e.name))?K()(t,e.name):Ae.default.getConditionalDefault(e.default,t,!1,n)}):rt({},e)}},{key:"isGlobalModuleOpened",value:function(e){var t=this.props.module,n=K()(t,"props.attrs.global_parent",""),o=K()(t,"props.attrs.global_module","");if(De.a.isLibraryPostType()&&"global"===ETBuilderBackend.layoutScope){if(e){var a="et_pb_"+ETBuilderBackend.layoutType,i=N()(["et_pb_section","et_pb_row","et_pb_row_inner"],K()(t,"props.type",""))?K()(t,"props.type",""):"et_pb_module";return!K()(t,"isModuleItem")&&a===i}return!0}var r=K()(t,"props.address").split(".");if(!e&&r.length>1){var s=!1,l=X()(r).map(function(e){return Ce()(r,parseInt(e,10)+1)});return k()(l,function(e){var t=c()(De.a.getSectionsFlattened(),{address:e.join(".")});if(""!==K()(t,"attrs.global_module",""))return s=!0,!1}),s}return!e&&""!==n||(""!==o||!P()(t.props.libraryModuleScope)&&"global"===t.props.libraryModuleScope)}},{key:"getGlobalTabClass",value:function(){if(this.isGlobalModuleOpened())return"et-fb-tabs__item__global"}},{key:"getGlobalModalClass",value:function(e){var t=P()(e)?"":e;if(this.isGlobalModuleOpened())return t+"__global"}},{key:"isGlobalOptionSynced",value:function(e){if(!this.isGlobalModuleOpened())return!0;var t=K()(this.props.module,"props.unsyncedGlobalSettings",[]);return!N()(t,e)}},{key:"isSelectiveSyncAvailable",value:function(e){return!K()(e,"hide_sync",!1)&&(this.isGlobalModuleOpened(!0)&&!N()(["et_pb_section","et_pb_row","et_pb_row_inner"],this.props.module.props.type))}},{key:"_onFilterInput",value:function(e,t){Ie.b.setOptionsFilter({filterOptions:t,filterSelected:this.state.filterSelected}),this.setState({filterOptions:t,filterNotice:!1})}},{key:"_onFilterSelect",value:function(e){Ie.b.setOptionsFilter({filterOptions:this.state.filterOptions,filterSelected:e}),this.setState({filterSelected:e,filterDropdownActive:!1,filterNotice:!1})}},{key:"_onFilterDropdownToggle",value:function(){this.setState({filterDropdownActive:!this.state.filterDropdownActive})}},{key:"_onFilterReset",value:function(){Ie.b.setOptionsFilter(),this.setState({filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})}},{key:"_onFilterResetAll",value:function(){Ie.b.setOptionsFilter(),this.setState({filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1})}},{key:"_onGoToOption",value:function(t){var n=this;if(!S()(t)){var o=this.props.module,a=[{slug:"general",toggleGroupId:"general"},{slug:"advanced",toggleGroupId:"design"},{slug:"css",toggleGroupId:"css"}],i=this.getCustomTabsList();i&&k()(i,function(e,t){a.push({slug:t,toggleGroupId:t})});var r={};k()(a,function(e,a){var i=n._getNonEmptyToggles(o.props.type,e.slug+".toggles",e.slug).toggles;if("option"===K()(t,"type")){var s=n._getOptionsFields(e.slug);if(k()(s,function(n,o){var i=P()(n.name)?o:n.name;B()(t.elementId)&&N()(t.elementId,i)?r={tabSlug:e.slug,toggleGroupId:e.toggleGroupId,keyCompare:i,fieldData:n,tabSeledtedIndex:a}:H()(t.elementId)&&t.elementId===i&&(r={tabSlug:e.slug,toggleGroupId:e.toggleGroupId,keyCompare:i,fieldData:n,tabSeledtedIndex:a})}),!S()(r)){var l=0;return void k()(i,function(e,t){if(l++,t===r.fieldData.toggle_slug)return r.toggleId=t,void(r.toggleOrder=l)})}}else if(e.toggleGroupId===K()(t,"payload.toggleGroupId")){r={tabSlug:e.slug,toggleGroupId:e.toggleGroupId,tabSeledtedIndex:a};var u=0;return void k()(i,function(e,n){if(u++,n===K()(t,"payload.toggleId"))return r.toggleId=n,void(r.toggleOrder=u)})}}),S()(r)||P()(r.toggleId)||P()(r.toggleOrder)?this.setState({filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1}):(this.setState({tabSeledtedIndex:r.tabSeledtedIndex,filterOptions:"",filterSelected:void 0,filterDropdownActive:!1,filterNotice:!1}),clearTimeout(this.goToOptionTimer),this.goToOptionTimer=setTimeout(function(){e(Object(s.findDOMNode)(n)).find(".et-fb-tabs__item").each(function(t,n){t===r.tabSeledtedIndex&&e(n).trigger("click")}),n._onClickToggle(r.toggleId,r.toggleOrder,r.toggleGroupId,!0)},100))}}},{key:"_setSearchFocus",value:function(){var t=this;clearTimeout(this.focusTimer),this.focusTimer=setTimeout(function(){var n=e(Object(s.findDOMNode)(t)).find(".et-fb-options-filter input");n.length>0&&n.focus()},200)}},{key:"_getNonEmptyToggles",value:function(e,t,n){var o="css.toggles"===t?"custom_css.toggles":t,a=o+"_"+n+"_toggles",i=K()(this.props,"module.props.address"),r=De.a.isMultiItemSelected(i),s=De.a.getMultiSelectElementsType();if(bt.has(e,a)&&!r)return bt.get(e,a);var l={};if(r){if(bt.hasElements(s,a))return bt.getElements(s,a);l=nt.a.generateSelectedToggles(o)}var u=S()(l)?J()({unclassified:{title:"",priority:10}},K()(xe.a.getOptionsToggles(e),o,{})):l,d=this._getOptionsFields(n),c=this.getBackgroundFieldsNames(),p={},f={};k()(d,function(e){var t=e.toggle_slug,n=e.name,o=e.depends_on,a=e.show_if,i=e.show_if_not,r=e.type;N()(["skip","computed"],r)||P()(n)||(t=P()(t)?"unclassified":t,ie()(p,t,!0),o||a||i||N()(c,n)||ie()(f,t,!0))});var h={toggles:se()(u,function(e,t){return v()(p,t)}),safe:f};return r?bt.setElements(s,a,h):bt.set(e,a,h),h}},{key:"_isFieldValueModified",value:function(e,t,n,o){var a=this,i=!1,r=P()(e.name)?void 0:t[e.name],s=e.default;if(P()(r)&&"content"===e.name&&!P()(this.props.module.props.content)&&(r=K()(this,"props.module.props.content")),!P()(e.default_from)){var l=e.default_from.split(".").pop();!l||P()(o[l])||P()(o[l].default)||(s=o[l].default)}switch(!S()(r)&&H()(r)&&(r=r.toLowerCase()),!S()(s)&&H()(s)&&(s=s.toLowerCase()),e.type){case"font":i=!S()(r)&&"||||||||"!==r&&r!==s;break;case"custom_padding":case"custom_margin":!S()(r)&&H()(r)&&(r=r.replace(/false|\|/g,"")),i=!S()(r)&&r!==s;break;case"border-radius":i=!S()(r)&&"||||"!==r&&"on||||"!==r&&r!==s;break;case"multiple_checkboxes":i=!(S()(r)||H()(r)&&-1===r.indexOf("on"))&&r!==s;break;case"tiny_mce":i=!(S()(r)||H()(r)&&!r.replace(/(?:<br ?\/?>|\n)/g,"").length)&&r!==s;break;case"range":var u=e.default_unit;if(!P()(e.default_from)){var d=e.default_from.split(".").pop();P()(o[d])||P()(o[d].default_unit)||(u=o[d].default_unit)}B()(s)&&(s=s[1][t[s[0]]]),u&&(r&&-1===r.indexOf(u)&&(r=""+r+u),s&&-1===s.indexOf(u)&&(s=""+s+u)),i=!S()(r)&&r!==s;break;case"color-alpha":i=!S()(r)&&s!==r;break;case"yes_no_button":i=!S()(r)&&"off"!==r&&s!==r;break;case"select":i=!(!Ae.default.hasValue(r)||G()(e.options)&&!S()(e.options)&&Object.keys(e.options)[0]===r)&&s!==r;break;case"composite":P()(e.composite_structure)||k()(e.composite_structure,function(e){P()(e.controls)||k()(e.controls,function(r,s){var l=rt({},r,{name:s}),u=Object.assign({},o,e.controls);!a._isFieldDependencyExcluded(l,u)&&a._isFieldValueModified(l,t,n,u)&&(i=!0)})});break;case"background":if(!(i=(!H()(r)||!S()(r))&&s!==r)&&!S()(e.backgroundFields)){var c=e.name.split("_").slice(-1).pop();c&&k()(["background_color_%s","use_background_color_gradient_%s","bg_img_%s","background_video_mp4_%s","background_video_webm_%s"],function(e){var n=e.replace("%s",c);S()(t[n])||"off"===t[n]||(i=!0)})}break;default:i=!(!M()(r)&&!ke()(r)&&S()(r))&&s!==r}if(!i&&this._isOptionMatchesStylesResponsive(e,t)){var p=rt({},e,{name:e.name+"_tablet",default:v()(e,"default_tablet")?e.default_tablet:s,mobile_options:void 0});if(this._isFieldValueModified(p,t,n,o)&&(i=!0),!i){var f=rt({},e,{name:e.name+"_phone",default:v()(e,"default_phone")?e.default_tablet:p.default,mobile_options:void 0});this._isFieldValueModified(f,t,n,o)&&(i=!0)}}return i}},{key:"_isOptionMatchesStylesModified",value:function(e,t,n,o){var a=this;if("general"===n&&!P()(e.toggle_slug)&&"background"!==e.toggle_slug)return!1;if(!N()(["general","advanced","css"],n)&&N()(["text","textarea","tiny_mce","date_picker"],e.type))return!1;var i=this._isFieldValueModified(e,t,n,o);return i||"background_color"!==e.name||k()(pt,function(e){P()(o[e])||!a._isFieldValueModified(o[e],t,n,o)||(i=!0)}),i}},{key:"_isOptionMatchesStylesResponsive",value:function(e,t){if(P()(e.mobile_options))return!1;var n=t[e.name+"_last_edited"],o=P()(n)?["off","desktop"]:n.split("|");return!P()(o[0])&&"on"===o[0]}},{key:"_isOptionMatchesStylesHover",value:function(e,t){var n="background_color"===e.name?"background":e.name;return Ne.a.isEnabled(n,t)}},{key:"_isOptionMatchesActiveContent",value:function(e,t,n,o){return!("general"===n&&!P()(e.toggle_slug)&&"background"===e.toggle_slug)&&(!N()(["advanced","css"],n)&&(!(!N()(["general","advanced","css"],n)&&!N()(["text","textarea","tiny_mce","date_picker"],e.type))&&this._isFieldValueModified(e,t,n,o)))}},{key:"_isFieldDependencyExcluded",value:function(e,t){return!P()(e.depends_on)&&!this._isVisible(e,t)||!(P()(e.show_if)&&P()(e.show_if_not)||Object(et.a)(e,this.setting_resolver))}},{key:"_getFilteredFields",value:function(e){var t=this,n=this._getOptionsFields(e),o=this.state.filterOptions,a=this.state.filterSelected;if(""===o&&!Ae.default.hasValue(a))return n;var i=this.props.module.props.type,r=e+"_filter";if(bt.has(i,r)){var s=bt.get(i,r);if(s.search===o&&s.filterSelected===a)return s.filtered}var l=K()(this,"props.module.props.attrs",{}),u=K()(this,"props.module.props.content"),d={};k()(n,function(e){var t=e.type,n=e.name,o=e.is_fb_content;if("codemirror"===t||n&&0===n.indexOf("custom_css_")){var a=o?u:l[n];a&&(d[n]=a)}});var c=se()(n,function(e){var n=e.type,o=e.label,a=e.description,i=e.name;return"composite"===n||t._isOptionMatchesFilter(o,a,d[i])});return Ae.default.hasValue(a)?(c=this._isOptionMatchesFilterSelected(c,e),bt.set(i,r,{search:o,filterSelected:a,filtered:c}),c):(bt.set(i,r,{search:o,filterSelected:a,filtered:c}),c)}},{key:"_getFilteredToggleFields",value:function(e,t,n){var o=this.state.filterOptions,a=this.state.filterSelected;if(""===o&&!Ae.default.hasValue(a))return t;var i=this.props.module.props.type,r=n+"_"+e+"_filter_toggle";if(bt.has(i,r)){var s=bt.get(i,r);if(s.search===o&&s.filterSelected===a)return s.filtered}return this._isOptionMatchesFilter(e)&&(t=this._getOptionsFields(n)),Ae.default.hasValue(a)?(t=this._isOptionMatchesFilterSelected(t,n),bt.set(i,r,{search:o,filterSelected:a,filtered:t}),t):(bt.set(i,r,{search:o,filterSelected:a,filtered:t}),t)}},{key:"_isOptionMatchesFilterSelected",value:function(e,t){var n=this,o=this._getOptionsFields(t),a=K()(this,"props.module.props.attrs",{});return se()(e,function(e){if(n._isFieldDependencyExcluded(e,o))return!1;switch(n.state.filterSelected){case"styles_modified":return n._isOptionMatchesStylesModified(e,a,t,o);case"styles_responsive":return n._isOptionMatchesStylesResponsive(e,a);case"styles_hover":return n._isOptionMatchesStylesHover(e,a);case"active_content":return n._isOptionMatchesActiveContent(e,a,t,o);default:return!1}})}},{key:"_isOptionMatchesFilter",value:function(){for(var e=this.state.filterOptions.toLowerCase(),t=!1,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return k()(o,function(n){return P()(n)||-1===n.toLowerCase().indexOf(e)||(t=!0),!t}),t}},{key:"_getOptionsFields",value:function(e){var t=this,n=this.props.module,o=n.props.type,a=De.a.isMultiItemSelected(n.props.address);if(bt.has(o,e)&&!a)return bt.get(o,e);var i=this,r=J()({},this.state[e+"Fields"]),s=De.a.getMultiSelectElementsName(),l=De.a.getMultiSelectElementsType();if(a){if(bt.hasElements(l,e))return bt.getElements(l,e);var u={};k()(s,function(t){var n={};"general"===e?n=gt(t):"advanced"===e?n=vt(t):"css"===e&&(n=yt(t)),u=nt.a.generateSelectedFieldsItem(u,n)}),r=S()(u)?r:u}if((N()(["et_pb_row","et_pb_row_inner"],n.props.type)||Ae.default.isOn(n.props.attrs.specialty)&&"et_pb_section"===n.props.type)&&function(){for(var o=v()(n.props,"children")&&!S()(n.props.children)?n.props.children:n.props.content,a=o.length,s=function(n){var s=De.a.getColumnSettingFields(e),l={},u={};k()(s,function(e,t){var s=t.replace("%s",n),d={label:K()(e,"label","").replace("%s",1!==a?n:""),name:s,sub_toggle:K()(e,"sub_toggle","").replace("%s",n),isColumnField:!0,columnIndex:n-1,columnType:o[n-1].type};P()(e.affects)||S()(e.affects)||(d.affects=f()(e.affects,function(e){return e.replace("%s",n)})),B()(e.presets)&&(d.presets=e.presets.map(function(e){return rt({},e,{fields:e.fields||{}})}).map(function(e){return rt({},e,{fields:X()(e.fields).map(function(t){return lt({},t.replace("%s",n),e.fields[t])})})}).map(function(e){return rt({},e,{fields:e.fields.reduce(function(e,t){return rt({},e,t)},{})})})),P()(e.depends_on)||S()(e.depends_on)||(d.depends_on=f()(e.depends_on,function(e){return e.replace("%s",n)}));var c=J()(Ae.default.intentionallyClone(e),d);"background_color_%s"===t&&(l=Ae.default.intentionallyClone(c)),N()(i.getColumnBackgroundFieldsNames(),t)?u[s]=c:r[s]=c}),"general"!==e||S()(s)||(l.label=ETBuilderBackend.i18n.modules.column.backgroundColor.replace("%s",n),l.type="background",l.backgroundFields=u,l.isColumnBackground=!0,l.columnIndex=n,l._onChange=t._onChange,l.onMouseEnterGroup=t._onMouseEnterGroup,l.onMouseLeaveGroup=t._onMouseLeaveGroup,l.isDescriptionVisible=t._isDescriptionVisible,l.isHoveredGroup=t._isHoveredGroup,l.onClickHelp=t._onClickHelp,r["background_color_"+n]=l)},l=1;l<=a;l++)s(l)}(),"css"===e){var d=["before","main_element","after"];k()(r,function(e,t){var n=Ae.default.intentionallyClone(e),o=!0;k()(["module_id","module_class"],function(e){$()(t,e)&&(o=!1)}),o&&P()(e.selector)&&(n.selector=""),P()(e.isColumnField)&&(N()(["module_id","module_class"],t)||!P()(e.type)?n.name=t:n.name=!P()(e.selector)||P()(e.name)||N()(d,t)?"custom_css_"+t:t),r[t]=n})}return a?bt.setElements(l,e,r):bt.set(o,e,r),r}},{key:"_getAllOptionsFields",value:function(){var e=this.props.module.props.type;if(bt.has(e,"all"))return bt.get(e,"all");var t=this._getOptionsFields("general"),n=this._getOptionsFields("advanced"),o=this._getOptionsFields("css"),a=this.getCustomTabsFields(e),i=te()({},t,n,o);return a&&k()(a,function(e){i=te()(i,e)}),bt.set(e,"all",i),i}},{key:"getBackgroundFieldsNames",value:function(){return xe.a.getBackgroundFieldsNames()}},{key:"getColumnBackgroundFieldsNames",value:function(){return X()(ETBuilderBackend.columnSettingFields.general)}},{key:"getModuleFields",value:function(e){return J()({},gt(e),vt(e))}},{key:"_renderModuleItems",value:function(){var e=this;if(""!==this.state.filterOptions||Ae.default.hasValue(this.state.filterSelected))return!1;var t="";this._hasModuleItem()&&B()(this.props.module.props.content)&&!S()(this.props.module.props.content)&&(t=a.a.createElement(ze.a,{module:this.props.module,_v:this.props.module.props._v,setHoveredElement:this._setHoveredElement}));var n="";if(this._hasModuleItem()){var o=!1;if(this.isSelectiveSyncAvailable()){var i=this.isGlobalOptionSynced("et_pb_content_field")?"#97D000":"#EF5555";o=a.a.createElement("div",{className:"et-fb-form__global-sync",onClick:this._unsyncGlobalContent},a.a.createElement(Ge.a,{icon:"sync",color:i}))}var r=!!De.a.getModuleItemDragEndWaiting()&&a.a.createElement("div",{className:"et-fb-settings-module-items--waiting"}),s=ETBuilderBackend.i18n,l=K()(s,"modules."+this.props.module.props.type+".addNew")||s.controls.moduleItem.addNew;n=this._isModuleItemSettings()?"":a.a.createElement("div",{className:"et-fb-settings-module-items-wrap"},t,o,a.a.createElement("span",{className:"et-fb-item-button-wrap--add"},a.a.createElement(Qe.Motion,{defaultStyle:{size:0,opacity:0},style:{size:this.props.options.animate?Object(Qe.spring)(1,{stiffness:300,damping:20}):1,opacity:this.props.options.animate?Object(Qe.spring)(1,{stiffness:300,damping:20}):1}},function(t){return a.a.createElement(Re.a,{buttonName:Le.a.MODULE_ITEM_ADD,editingModule:e,style:{opacity:t.opacity,transform:"scale( "+t.size+" )"},title:l})})),r)}return n}},{key:"renderToggleFields",value:function(e,t){return!!De.a.isProductTourActive()||(!!this.builder_display_modal_settings||(!(""===this.state.filterOptions&&!Ae.default.hasValue(this.state.filterSelected))||this._isToggleOpened(e,t)))}},{key:"_isValidProductTourToggle",value:function(e,t){return!("et_pb_row"===K()(this.props,"module.props.type")&&!S()(t.background)&&"background"!==e)}},{key:"_maybeRenderHelpButton",value:function(e){var t=this.props.module,n=e||t.props.type;if(P()(ETBuilderBackend.i18n.videos[n]))return!1;if(this.state.filterNotice)return!1;var o=this.props.address,i=De.a.isMultiItemSelected(o),r=1===De.a.getMultiSelectElementsName().length;return i&&!r&&(n="et_pb_default"),a.a.createElement(Be.a,{videoListId:n})}},{key:"_renderTabOptionsPanel",value:function(e,t){var n=this,i="advanced"===e?"design":e,r=N()(["general","advanced","css"],e)?e+"_settings":e;if(r="css"===e?"custom_css_settings":r,!De.a.isAllowedAction(r))return!1;var s=this,l=s.props.module,d=De.a.isMultiItemSelected(l.props.address),p=[],h=!(!l.isModuleItem||P()(l.parentModule.props.type))&&l.parentModule.props.type,m=this._getAllOptionsFields(),_=this._getFilteredFields(e),g=this.getModuleFields(l.props.type),y=X()(g).reduce(function(e,t){return e||!!t.match(/background_color(_[0-9])?$/)},!1),E=this._getNonEmptyToggles(l.props.type,e+".toggles",e),w=E.safe,T=E.toggles,O=d?nt.a.generateSelectedAttrs(l.props.type,l.props.attrs,this.updatedAttrs):l.props.attrs;this.setting_resolver.source_object=this.props.module,this.setting_resolver.property_definitions=m,"et_pb_signup_custom_field"===K()(l,"props.child_slug")&&(this.setting_resolver.child_property_definitions=gt(l.props.type,"et_pb_signup_custom_field")),"et_pb_signup_custom_field"===K()(l,"props.type")&&(this.setting_resolver.property_definitions.parentModule=gt("et_pb_signup"));var A=0,L=e!==t,I="general"===e&&!d&&this._renderModuleItems(),D=K()(l,"props.module_items_config",{}),x=K()(D,"toggle_slug"),B=K()(D,"location"),j=S()(D)||Object(et.a)(D,this.setting_resolver),R="";if(N()(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column"],l.props.type))R=c()(ETBuilderBackend.structureModules,{slug:l.props.type}).name;else{var W=c()(ETBuilderBackend.modules,{label:l.props.type});P()(W)||P()(W.title)||(R=W.title)}var V=De.a.getActiveQuickAccess().clickedToggle,U=V.toggleId,$=V.toggleSubId,z=De.a.getAppPreference("modal_dimension_width");return a.a.createElement(Ve.c,{key:"et-fb-tabs__panel--"+i,className:"et-fb-tabs__panel--"+e,slug:e,isModuleItemSettings:this._isModuleItemSettings(),displayFilter:!0,filterValue:this.state.filterOptions,_onFilterInput:this._onFilterInput,tabsCount:this.state.tabsCount,filterItems:ETBuilderBackend.searchFilterItems,filterGroups:{show_only:ETBuilderBackend.i18n.modals.show_only},filterDropdownActive:this.state.filterDropdownActive,filterSelected:this.state.filterSelected,filterNotice:this.state.filterNotice,_onFilterSelect:this._onFilterSelect,_onFilterDropdownToggle:this._onFilterDropdownToggle,_onFilterReset:this._onFilterReset,_onFilterResetAll:this._onFilterResetAll},a.a.createElement(Ue.e,{onSubmit:this._handleFormSubmission},a.a.createElement("input",{type:"submit",className:"et-fb-hide"}),j&&P()(x)&&I,f()(T,function(t,r){A++;var c=G()(t)?t.title:t,E=G()(t)?t.sub_toggles:{},D=!S()(E)&&K()(t,"tabbed_subtoggles",!1),W=n._getFilteredToggleFields(c,_,e),V=v()(w,r)&&"unclassified"!==r,q=!V||n.renderToggleFields(r,i),Q=n._isToggleOpened(r,i)||!L&&n._isValidProductTourToggle(r,T)||n.productTourOptionToggle===r,X=Z()(T)===A;Ae.default.hasValue(c)||"unclassified"!==r||(c=R);var Y=U===r?$:0;return a.a.createElement(Ue.d,{fields:W,key:r,title:c,toggleId:r,toggleGroupId:i,toggleSubId:Y,_onClickToggle:n._onClickToggle,setHoveredToggleElement:n._setHoveredToggleElement,setHoveredSubToggleElement:n._setHoveredSubToggleElement,isToggleOpened:Q,toggleOrder:A,isLastToggle:X,isFilterActive:""!==n.state.filterOptions||Ae.default.hasValue(n.state.filterSelected),isGroupActive:!n.builder_display_modal_settings,showEmpty:V,subToggles:E,tabbedSubtoggles:D,setHoveredElement:function(e,t){if(e){var o=t.props.toggleId,a=Ye.a.getHelper(e);if(a){var i=a.preparePayload(t,n.props.module);n._setHoveredElement(e,o,i)}}}},j&&r===x&&"top"===B&&I,!!q&&f()(W,function(t,c){var f=t,_=K()(f,"toggle_slug","unclassified"),E=P()(f.type)&&"css"===e?"codemirror":f.type;if(_!==r||P()(E))return!1;if(!P()(f.specialty_only)&&"yes"===f.specialty_only&&(P()(l.props.attrs.specialty)||"on"!==l.props.attrs.specialty))return!1;"sortable_list"===(f="composite"===t.type?Ae.default.intentionallyCloneDeep(t):Ae.default.intentionallyClone(t)).type&&(f.useAddNewButton=!0);var w=O,A="et_pb_counter"===n.props.module.props.type&&"content"===f.name,I=u()("et-fb-settings-options","et-fb-option--"+E.replace("_","-")),D="",x="",B="",j=O.content||(d?nt.a.generateSelectedContent(l.props.content,n.updatedAttrs):l.props.content),G={},W=h?c+"_child":c,V="",U=K()(f,"default",""),$=void 0;if("categories"===E&&(f.categories_list={},f.taxonomy_name=P()(f.taxonomy_name)?"category":f.taxonomy_name),"select_sidebar"===E&&(f.sidebars_list={}),"text"===E&&"et_pb_signup"===l.props.type&&N()(f.option_class,"--last-field")&&(E="text_api_key"),"background_color"===f.name)f.backgroundFields={},f.onMouseEnterGroup=s._onMouseEnterGroup,f.onMouseLeaveGroup=s._onMouseLeaveGroup,f.isDescriptionVisible=s._isDescriptionVisible,f.isHoveredGroup=s._isHoveredGroup,f.onClickHelp=s._onClickHelp,k()(pt,function(e){var t=K()(g,e,!1);t&&(f.backgroundFields[e]=t,f.backgroundFields[e]._unsyncGlobalSetting=s._unsyncGlobalSetting,f.backgroundFields[e].isGlobalOptionSynced=s.isGlobalOptionSynced(e),f.backgroundFields[e].isSelectiveSyncAvailable=s.isSelectiveSyncAvailable(),f.backgroundFields[e].isGlobalOptionSynced=s.isGlobalOptionSynced(e))}),Z()(f.backgroundFields)>1&&(f.name="background",f.label=ETBuilderBackend.i18n.modules.background.label,f.type="background",E="background",f._onChange=s._onChange,f._unsyncGlobalSetting=s._unsyncGlobalSetting,P()(f.is_toggleable)&&delete f.depends_on,delete f.additional_code,delete f.depends_show_if,delete f.description);else if(y&&N()(pt,Ne.a.getFieldBaseName(K()(f,"name",""))))return!1;("background-field"===f.type&&(f.onMouseEnterGroup=s._onMouseEnterGroup,f.onMouseLeaveGroup=s._onMouseLeaveGroup,f.isDescriptionVisible=s._isDescriptionVisible,f.isHoveredGroup=s._isHoveredGroup,f.onClickHelp=s._onClickHelp,f.background_fields=b()(f.background_fields,function(e,t){return e._unsyncGlobalSetting=s._unsyncGlobalSetting,e.isGlobalOptionSynced=s.isGlobalOptionSynced(t),e.isSelectiveSyncAvailable=s.isSelectiveSyncAvailable(),e.isGlobalOptionSynced=s.isGlobalOptionSynced(t),e})),h&&Ct(f))&&(f=Tt(f,l,"general"===e?"":e));var q="tabs"===K()(f,"hover",!1),Q=!1!==K()(f,"hover",!1)||void 0,X=Ne.a.isHoverMode(),Y=!1!==K()(f,"depends_on[0]",!1)&&K()(f,"depends_on[0]",!1),ee=Y&&Ne.a.isEnabled(Y,w),te=Ne.a.isHoverMode()&&Ne.a.doesSupport(f)&&(Ne.a.isEnabled(f.name,w)||ee)?Ne.a.getHoverField(f.name||""):f.name||"",ne=Ne.a.getFieldBaseName(te),ae=X&&q&&Ne.a.isEnabled(f.name,w);if("custom_padding"===E&&n._hasColumnsFields()&&"custom_padding"!==ne){var ie=!0===X?Ne.a.hoverSuffix():"",re=f.name.replace("padding_",""),se=Ae.default.hasValue(w["padding_"+re+"_last_edited"])?w["padding_"+re+"_last_edited"].split("|"):[],le=(K()(w,"padding_top_"+re+ie,"")||"").trim()+"|"+(K()(w,"padding_right_"+re+ie,"")||"").trim()+"|"+(K()(w,"padding_bottom_"+re+ie,"")||"").trim()+"|"+(K()(w,"padding_left_"+re+ie,"")||"").trim()+"|"+(K()(w,"padding_top_bottom_link_"+re,"")||"").trim()+"|"+(K()(w,"padding_left_right_link_"+re,"")||"").trim();if(D={desktop:le,tablet:K()(w,"padding_"+re+"_tablet",""),phone:K()(w,"padding_"+re+"_phone",""),isResponsive:!P()(se[0])&&"on"===se[0],activeTab:P()(se[1])?"desktop":se[1]},X)x=K()(w,"padding_top_"+re,"").trim()+"|"+K()(w,"padding_right_"+re,"").trim()+"|"+K()(w,"padding_bottom_"+re,"").trim()+"|"+K()(w,"padding_left_"+re,"").trim();V=le}else if(N()(["range","custom_margin","custom_padding","text","number"],E)&&f.mobile_options){var ue=w[f.name+"_last_edited"],de=P()(ue)?["off","desktop"]:ue.split("|"),ce=K()(s,"props.module.props.is_module_child",!1)&&(v()(f,"default_tablet")||v()(f,"default_phone")),pe=K()(w,te,""),fe=K()(w,f.name,""),he=K()(w,f.name+"_tablet",""),me=K()(w,f.name+"_phone","");if(B=De.a.getPreviewMode(),!ce&&K()(f,"default_value_depends",!1)){var _e=f.default_value_depends,be=f.default_values_mapping;G.getDefaultFrom=K()(l.props.attrs,_e,!1),fe=Ae.default.hasValue(w[f.name])&&f.default!==w[f.name]?w[f.name]:K()(be,G.getDefaultFrom,f.default),pe=Ae.default.hasValue(w[te])&&f.default!==w[te]?w[te]:fe}he&&!v()(f,"default_phone")&&(f.default_phone=he),!he&&v()(f,"default_tablet")&&(f.default_phone=f.default_tablet),pe&&!v()(f,"default_tablet")&&(f.default_tablet=pe),pe&&!v()(f,"default_phone")&&(f.default_phone=pe),x=fe,D={desktop:pe,tablet:he,phone:me,isResponsive:_t(f.name,w),activeTab:de[1]},V=pe||K()(f,"default","")}else A?D=P()(l.props.attrs.content)?l.props.content:l.props.attrs.content:"codemirror"===E?(x=K()(w,f.name,K()(f,"default","")),D=K()(w,te,K()(f,"default",""))):"composite"!==E&&(f=n._handleFieldConditionalDefaults(f,w,f.name!==te),x=K()(w,f.name,K()(f,"default","")),D=K()(w,te,ae?x:K()(f,"default","")),M()(D)&&(D=""+D),M()(x)&&(x=""+x),D||(D=""),x||(x=""),V=Ae.default.hasValue(D)?D:K()(f,"default",""));if("font"===E&&(V=P()(V)||S()(oe()(V.split("|")))?"":V,U=P()(U)?"":U),"select_with_option_groups"===E&&Ae.default.hasValue(D)&&-1!==D.indexOf("|")&&(D=H()(D)?D.split("|")[1]:D),"select_with_option_groups"===E&&Ae.default.hasValue(x)&&-1!==x.indexOf("|")&&(x=H()(x)?x.split("|")[1]:x),P()(f.depends_default)&&P()(f.depends_show_if)&&P()(f.depends_show_if_not)||(I=u()("et-fb-option--depends-on",I)),"select_with_option_groups"===E&&f.groups&&(I=u()("et-fb-option--select-with-option-groups",I)),"text"===E&&($=u()("et-fb-settings-option-input--block",$)),"color-alpha"===E&&"et_pb_section"===K()(l,"props.type")&&"background_color"===K()(f,"name")&&(f.default=De.a.getPageSetting("et_pb_section_background_color")||De.a.getPageSettingField("et_pb_section_background_color").default),"admin_label"===c&&(f.default=R),P()(f.readonly_if)&&P()(f.readonly_if_not)||!Object(et.b)(f,n.setting_resolver)||(f.readonly=!0,f.useAddNewButton=!1),P()(E)||!Ke.a.getControl(E))return!1;if("warning"===E&&f.display_if!==f.value)return!1;if(!P()(f.depends_on)&&P()(f.show_if_not)&&P()(f.show_if)&&!n._isVisible(f,m))return p.push(f.name),!1;if(!(P()(f.show_if)&&P()(f.show_if_not)||Object(et.a)(f,n.setting_resolver)))return p.push(f.name),!1;if(!P()(f.depends_on)&&C()(f.depends_on,F()(f.depends_on,p)))return!1;if("composite"===E)return Xe.a.createControl(f,{uniqueKey:W,module:s,_onChange:s._onChange.bind(s),onClickHelp:s._onClickHelp,activeHover:Ne.a.isEnabled(ne,w),onClickHover:s._onClickHover,onClickReset:s._onClickReset,onClickResponsive:s._onClickResponsive,hasHoverOptions:Q,isDescriptionVisible:s._isDescriptionVisible,isHoveredGroup:s._isHoveredGroup,onMouseEnterGroup:s._onMouseEnterGroup,onMouseLeaveGroup:s._onMouseLeaveGroup,isSelectiveSyncAvailable:s.isSelectiveSyncAvailable.bind(s),isGlobalOptionSynced:s.isGlobalOptionSynced.bind(s),_unsyncGlobalSetting:s._unsyncGlobalSetting.bind(s),isResetActive:s._isResetActive,setting_resolver:s.setting_resolver,animate:s.props.options.animate,rightClickOpened:s.props.rightClickOpened,toggleGroupId:i,isSettingsModal:!0,isResponsiveEnabled:_t,toggleId:r});var ge=!P()(f.description)&&""!==f.description,ve=N()(["content","raw_content"],c)||!P()(f.is_fb_content)&&f.is_fb_content,ye=ve?"et_pb_content_field":f.name,ke=P()(f.priority)?10:f.priority,Ee=!!P()(f.vb_support)||f.vb_support?"":a.a.createElement("span",{className:"et-fb-no-vb-support-warning"},ETBuilderBackend.i18n.modals.moduleSettings.noSupport),Se=U===V,we=ge?f.description:"",Ce={},Te=f.label,Me="",Oe=P()(f.additional_button_type)?"":a.a.createElement($e.a,{type:f.additional_button_type,name:f.name,attrs:f.additional_button_attrs,module:l,_onChange:n._onChange});if("css"===e){var Fe=!P()(f.isColumnField)&&f.isColumnField,Le="."+(Fe?f.columnType:l.props.type)+"_"+(Fe?f.columnIndex:l.props.shortcode_index),Pe=!P()(f.selector)&&!ge&&f.selector;if(!1!==Pe){if(-1!==Pe.indexOf("%%order_class%%"))Pe=Pe.replace(/%%order_class%%/g,Le);else Pe=Le+(!P()(f.no_space_before_selector)&&f.no_space_before_selector?"":" ")+Pe;ge=!0,we=Pe}"custom_css"===f.toggle_slug&&(Ae.default.hasValue(n.state.filterOptions)||Ae.default.hasValue(n.state.filterSelected))&&(Te=f.label+" "+ETBuilderBackend.i18n.controls.cssText)}var Ie=f.default_on_front||f.defaultValue||f.default,xe=Ne.a.isEnabled(ne,w);Ce.activeHover=xe,Ce.isHoverTab=X;var Be=P()(f.label)||""===f.label?"":a.a.createElement(Ue.c,{name:te,backgroundFields:f.backgroundFields,defaultValue:Ie,activeHelp:s._isDescriptionVisible(ne),activeHover:xe,hoveredGroup:s._isHoveredGroup(ne),key:e+"-form-label-"+f.name,onClickHelp:!!ge&&s._onClickHelp,onClickHover:!!q&&s._onClickHover,onClickResponsive:s._onClickResponsive,onClickReset:s._onClickReset,isResetActive:s._isResetActive(f),hasResponsiveOptions:f.mobile_options,hasHoverOptions:Q,isResponsiveEnabled:_t(f.name,w)},Te),je=ge?a.a.createElement(Ue.a,{active:s._isDescriptionVisible(f.name),key:e+"-form-description-"+f.name},we):"",Ge=q&&Ne.a.isEnabled(ne,w)?a.a.createElement(Je.a,null,a.a.createElement(We.a,{module:n.props.module,isResponsiveEnabled:_t(f.name,w),isHover:X,fieldName:ne})):"";if(L||f.isColumnBackground||!n._isValidProductTourToggle(r,T)||(Me="et-fb-product-tour-element","text"===E?Me+=" et-fb-product-tour-element-text":"background"===E&&(Me+=" et-fb-product-tour-element-background"),n.productTourOptionToggle=r,L=!0),"codemirror"===E&&(Ce.search=n.state.filterOptions),"font"===E&&(Ce.formLabel=Be,Ce.formDescription=je),"tiny_mce"===E&&"content"!==f.name&&(j=D),K()(f,"attributes.data-old-option-ref",!1)){var Re=f.attributes["data-old-option-ref"];G.oldOptionValue=K()(l.props.attrs,Re,!1)}f.name=Ne.a.getHoverFieldOnHover(f.name,w),ae&&""!==x&&(f.default=x);var He=K()(f,"data_type",!1),Ve=E+(He?"_"+He:""),ze=Object(o.createElement)(Ke.a.getControl(E),J()({processedKey:W,value:D,className:$,module:s,content:j,resetValue:!1,previewMode:B,_onChange:n._onChange,_resetOption:n._resetOption,visible:!0,additionalAttrs:G,filterSelected:n.state.filterSelected,animate:n.props.options.animate,rightClickOpened:n.props.rightClickOpened,isSettingsModal:!0,isItemSelected:d},Ce,f));return a.a.createElement(Ue.b,{name:f.name,key:e+"-form-group-"+W,onMouseEnterGroup:function(){n._onMouseEnterGroup(f.name,Te,Ve,r,i)},onMouseLeaveGroup:function(){n._onMouseLeaveGroup(f.name,Te)},forceUseOnMouseOver:"tiny_mce"===E,isSelectiveSyncAvailable:n.isSelectiveSyncAvailable(f),isGlobalOptionSynced:n.isGlobalOptionSynced(ye),_unsyncGlobalSetting:n._unsyncGlobalSetting,optionSubToggle:f.sub_toggle,globalName:ye,className:Me,priority:ke,isDefaultValue:Se},!N()(["font"],E)&&Be,Ge,!N()(["font"],E)&&je,a.a.createElement("div",{className:I,key:"et-fb-option-"+e+"_"+W},a.a.createElement("div",{className:"et-fb-option-container",key:"et-fb-option-container-"+W},a.a.createElement(Je.a,{componentName:f.name},f.dynamic_content?a.a.createElement(ot.a,{type:f.dynamic_content,fieldName:f.name,fieldType:E,isContentField:!A&&ve,value:ve?j:D,dynamicAttributes:Object(at.c)(l.props.attrs),onChange:function(){A&&n._onChange(f.name,"",E,!0),n._onChange.apply(n,arguments)},onReset:n._resetOption,modalWidth:z},ze):ze),Oe,Ee)))}),j&&r===x&&"bottom"===B&&I)}),a.a.createElement("div",{className:"et-fb-modal__tab-footer"},""!==this.state.filterOptions||Ae.default.hasValue(this.state.filterSelected)||this.renderSupportNotice(K()(this,"props.module.props.vb_support","off")),this._maybeRenderHelpButton(h),""!==this.state.filterOptions||Ae.default.hasValue(this.state.filterSelected)||a.a.createElement(qe.a,{moduleTitle:this._getModuleTitle(),moduleType:l.props.type}))))}},{key:"_maybeRenderCustomTabsOptionsPanel",value:function(){var e=this,t=this.getCustomTabsList();return!!t&&f()(t,function(t,n){return!!De.a.isAllowedAction(n)&&(!!e.hasOptionTab(n)&&e._renderTabOptionsPanel(n))})}},{key:"maybeRenderCustomTabs",value:function(){var e=this,t=this.getCustomTabsList();if(!t)return!1;var n=Ye.a.getHelper("modal_tab");return f()(t,function(t,o){if(!De.a.isAllowedAction(o))return!1;if(!e.hasOptionTab(o))return!1;var i=K()(t,"name");if(!i)return!1;return a.a.createElement(Ve.a,{key:o,className:e.getGlobalTabClass(),panelId:i,setHoveredElement:function(t){if(t){var a=e._getNonEmptyToggles(e.props.module.props.type,o+".toggles",o),r=e._getOptionsFields(o),s=n.preparePayload(o,i,a,r,e.props.module);e._setHoveredElement(t,o,s)}else e._setHoveredElement(!1)}},i)})}},{key:"getTabsCount",value:function(){var e=this.props.module,t=!P()(vt(e.props.type))&&!S()(vt(e.props.type)),n=!S()(yt(e.props.type)),o=this.hasOptionTab("general"),a=this.maybeRenderCustomTabs();return oe()([t,n,o]).length+oe()(a).length}},{key:"hasOptionTab",value:function(e,t){var n=t?this._getOptionsFields(e):this._getFilteredFields(e),o=!S()(ce()(n,["toggles_"+e+"_toggles","_builder_version"])),a=!1;return"general"===e&&(a=this._hasModuleItem()),o||a}},{key:"renderSupportNotice",value:function(e){if(Ae.default.isOn(e))return"";var t=N()(["off","partial"],e)?e:"off";return a.a.createElement("div",{className:"et-fb-modal__support-notice",dangerouslySetInnerHTML:{__html:fe()(K()(ETBuilderBackend,["i18n","vbSupport","modalSupportNotices",t],""))}})}},{key:"_getModuleTitle",value:function(){var e=this.props.module;if(De.a.isMultiItemSelected(e.props.address))return ETBuilderBackend.i18n.controls.element;var t="";if(N()(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column"],e.props.type))t=c()(ETBuilderBackend.structureModules,{slug:e.props.type}).name;else{var n=c()(ETBuilderBackend.modules,{label:e.props.type});P()(n)||P()(n.title)||(t=n.title)}return t}},{key:"maybeShowFilterNotice",value:function(){var t=e(Object(s.findDOMNode)(this)).find(".et-fb-tabs__panel--filter-active"),n=!S()(this.state.filterOptions)||!S()(this.state.filterSelected);t.length&&t.each(function(t,o){Ae.default.hasValue(e(o).find(".et-fb-form__group:not(:empty)").text())&&(n=!1)}),n!==this.state.filterNotice&&this.setState({filterNotice:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isVisible,o=t.module,i="wireframe"===De.a.getPreviewMode(),r=this.isGlobalModuleOpened()?430:400;if(!n)return!1;if(P()(o.props))return!1;var s=this._getModuleTitle(),l=K()(this.props,"module.props.loading",!1),d={"et-fb-product-tour-element":"saveModule"===this.props.currentTourElement},c={"et-fb-product-tour-element":"saveModule"===this.props.currentTourElement||"saveRow"===this.props.currentTourElement},p="saveModule"===this.props.currentTourElement?o:{},f=l&&!i,h=[a.a.createElement(He.a,{block:!0,danger:!0,buttonName:Le.a.MODAL_SETTINGS_BUTTON_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel,disableClick:f,className:d,editingModule:p,additionalAttrs:{skipReset:Et()&&kt()}},a.a.createElement(Ge.a,{icon:"exit",color:"#FFFFFF"})),a.a.createElement(He.a,{block:!0,primary:!0,alt:!0,buttonName:Le.a.MODAL_SETTINGS_BUTTON_UNDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.undo,disableClick:f},a.a.createElement(Ge.a,{icon:"undo",color:"#FFFFFF"})),a.a.createElement(He.a,{block:!0,info:!0,buttonName:Le.a.MODAL_SETTINGS_BUTTON_REDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.redo,disableClick:f},a.a.createElement(Ge.a,{icon:"redo",color:"#FFFFFF"})),a.a.createElement(He.a,{block:!0,success:!0,buttonName:this._isModuleItemSettings()?Le.a.MODULE_ITEM_BACK_TO_PARENT:Le.a.MODAL_SETTINGS_BUTTON_SAVE,tooltip:ETBuilderBackend.i18n.tooltip.modal.save,disableClick:f,className:c,editingModule:p,additionalAttrs:{skipReset:Et()&&kt()}},a.a.createElement(Ge.a,{icon:"check",color:"#FFFFFF"}))],m=!P()(vt(o.props.type))&&!S()(vt(o.props.type)),_=!S()(yt(o.props.type)),b=this.hasOptionTab("general",!0),g=Ye.a.getHelper("modal_tab"),v=function(t,n){if(t){var o=K()(ETBuilderBackend.i18n.controls.tabs,n),a=e._getNonEmptyToggles(e.props.module.props.type,n+".toggles",n),i=e._getOptionsFields(n),r=g.preparePayload(n,o,a,i,e.props.module);e._setHoveredElement(t,n,r)}else e._setHoveredElement(!1)},y=!(!De.a.isAllowedAction("general_settings")||!b)&&a.a.createElement(Ve.a,{className:this.getGlobalTabClass(),panelId:"general",setHoveredElement:v},ETBuilderBackend.i18n.controls.tabs.general),k=!(!De.a.isAllowedAction("advanced_settings")||!m)&&a.a.createElement(Ve.a,{className:this.getGlobalTabClass(),panelId:"advanced",setHoveredElement:v},ETBuilderBackend.i18n.controls.tabs.design),E=!(!De.a.isAllowedAction("custom_css_settings")||!_)&&a.a.createElement(Ve.a,{className:this.getGlobalTabClass(),panelId:"css",setHoveredElement:v},ETBuilderBackend.i18n.controls.tabs.css),w=u()({"et-fb-modal__module-settings":!0,"et-fb-modal__filter-active":""!==this.state.filterOptions||Ae.default.hasValue(this.state.filterSelected),"et-fb-modal__selective-sync":this.isSelectiveSyncAvailable()},this.getGlobalModalClass("et-fb-modal")),C="configureModule"===this.props.currentTourElement&&De.a.getProductTourModuleName()===o.props.type||"editRow"===this.props.currentTourElement&&"et_pb_row"===o.props.type,T=C?"general":"";!C||b&&y||(T=m&&k?"advanced":"css");var M=this.maybeRenderCustomTabs(),O=De.a.getAppPreference("modal_fullscreen"),F=De.a.getAppPreference("modal_dimension_width"),A=De.a.getAppPreference("modal_snap_location");return a.a.createElement(je.a,rt({className:w,disableEscShortcut:""!==this.state.filterOptions||Ae.default.hasValue(this.state.filterSelected),footerButtons:h,fullscreen:O,globalUpdate:!0,isModuleItemSettings:this._isModuleItemSettings(),label:ETBuilderBackend.i18n.modals.moduleSettings.title.replace("%s",s),modalMinimalWidth:r,measurement:{height:De.a.getAppPreference("modal_dimension_height"),width:F},onModalChange:this.props.onModalChange,position:{x:De.a.getAppPreference("modal_position_x"),y:De.a.getAppPreference("modal_position_y")},snapLocation:A,tabsCount:this.state.tabsCount,onMouseEnterTitle:this._onMouseEnterTitle,onMouseLeaveTitle:this._onMouseLeaveTitle},this.props),a.a.createElement(Ve.d,{selectedIndex:this.state.tabSeledtedIndex,module:this.props.module,onSelect:this._setSearchFocus},a.a.createElement(Ve.b,{className:this.getGlobalModalClass("et-fb-tabs__list"),modalWidth:F,snapLocation:A,fullscreen:O,showScroll:!Ae.default.hasValue(this.state.filterOptions)&&!Ae.default.hasValue(this.state.filterSelected)},y,k,E,M),b&&this._renderTabOptionsPanel("general",T),m&&this._renderTabOptionsPanel("advanced",T),_&&this._renderTabOptionsPanel("css",T),this._maybeRenderCustomTabsOptionsPanel()))}}]),n}();Mt.propTypes=wt,Mt.defaultProps={},t.default=Mt}.call(this,n(30))},1261:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(9),r=n.n(i),s=n(136),l=n.n(s),u=n(12),d=n.n(u),c=n(2),p=n.n(c),f=n(76),h=n.n(f),m=n(5),_=n.n(m),b=n(72),g=n.n(b),v=(n(1251),n(0)),y=n(11),k=n(8),E=n(40),S=n(31),w=n(67),C=n(131),T=n(227),M=n(21),O=n(409),F=n(321),A=n(201),N=n(3),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var I=v.default.isLimitedMode(),D=v.default.topWindow(),x=ETBuilderBackend.i18n.app.modal,B=520,j=v.default.condition("is_bfb"),G=v.default.condition("is_rtl"),R=j?30:10;function H(e,t){return t[e]?"#5C6978":"#BEC9D6"}function W(e,t){if(t)switch(e){case"hover":return 0;case"click":return 1;case"grid":return 2;default:return 0}else switch(parseInt(e)){case 0:return"hover";case 1:return"click";case 2:return"grid";default:return"hover"}}function V(){return v.default.condition("is_bfb")?"wireframe":"desktop"}function U(e,t){if(t)switch(parseInt(e)){case 1:return 0;case 10:return 1;case 20:return 2;case 30:return 3;case 40:return 4;default:return 0}else switch(parseInt(e)){case 0:return 1;case 1:return 10;case 2:return 20;case 3:return 30;case 4:return 40;default:return 1}}function $(e,t){if(t)switch(e){case"default":return 0;case"minimum":return 1;case"fullscreen":return 2;case"left":return 3;case"right":return 4;case"bottom":return 5;case"top":return 6;default:return 0}else switch(parseInt(e)){case 0:return"default";case 1:return"minimum";case 2:return"fullscreen";case 3:return"left";case 4:return"right";case 5:return"bottom";case 6:return"top";default:return"default"}}function z(e,t){if(t)switch(e){case"default":return 0;case"build_from_scratch":return 1;case"choose_premade_layout":return 2;case"clone_existing_page":return 3;default:return 0}else switch(parseInt(e)){case 0:return"default";case 1:return"build_from_scratch";case 2:return"choose_premade_layout";case 3:return"clone_existing_page";default:return"default"}}var K=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={height:635,width:D.innerWidth<B?D.innerWidth-E.a.pageSettingsBar-30:400},e._getPosition=e._getPosition.bind(e),e._handleAnimationChange=e._handleAnimationChange.bind(e),e._handleAllModalSettings=e._handleAllModalSettings.bind(e),e._handleDummyContent=e._handleDummyContent.bind(e),e._handleDisabledModules=e._handleDisabledModules.bind(e),e._handleShortcuts=e._handleShortcuts.bind(e),e._handleResize=e._handleResize.bind(e),e._handleScroll=e._handleScroll.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),P(t,[{key:"componentWillMount",value:function(){this._handleResize(),j&&(this.throttleScroll=g()(this._handleScroll,100),D.addEventListener("scroll",this.throttleScroll),v.default.$topWindow().on("et-preview-animation-complete",this._handleResize)),D.addEventListener("resize",this._handleResize)}},{key:"componentDidMount",value:function(){v.default.topDocument().addEventListener("keydown",this._handleShortcuts)}},{key:"componentWillUnmount",value:function(){v.default.topDocument().removeEventListener("keydown",this._handleShortcuts),D.removeEventListener("resize",this._handleResize),j&&(D.removeEventListener("scroll",this.throttleScroll),v.default.$topWindow().off("et-preview-animation-complete",this._handleResize))}},{key:"_getModalOptions",value:function(){return j?h()(x.modal_default_select,[0,1,2,4]):I?x.modal_default_select.slice(0,-3):x.modal_default_select}},{key:"_getPosition",value:function(e){var t=this.props.pageSettingsBarLocation,n=r()(["top-left","top-right"],t),o="top"===t,a="right"===t,i="left"===t,s=r()(["top-right","bottom-right"],t),l=E.a.responsive.phone>D.innerWidth,u=l?0:E.a.pageSettingsBar,d=l?0:30,c=!!j&&v.default.$topWindow("#et_pb_layout");if("top"===e){if(j&&c){var f=v.default.$topWindow().scrollTop();return p()(c.offset(),"top",0)+c.find("h2.hndle").outerHeight()+R-f}return i||a?E.a.topbar.desktop+d:o?u+E.a.topbar.desktop:n?u+E.a.topbar.desktop:"auto"}return"bottom"===e?j?"auto":o||n||i||a?"auto":u:"right"===e?j?G?"auto;":v.default.$topWindow().width()-(p()(c.offset(),"left",0)+c.width())+10:s||a?u:i?"auto":!!v.default.condition("is_rtl")&&d:"left"===e?j?G?p()(c.offset(),"left",0)+10:"auto":i?u:s||a?"auto":n?u:!(!o&&v.default.condition("is_rtl"))&&d:void 0}},{key:"_handleScroll",value:function(){this._handleResize()}},{key:"_handleShortcuts",value:function(e){27===e.keyCode&&y.b.buttonClick({props:{buttonName:k.a.MODAL_APP_BUTTON_CLOSE}})}},{key:"_handleResize",value:function(){var e=j?v.default.$topWindow("#et_pb_layout").offset().top:0,t=j?v.default.$topWindow().scrollTop():0,n=j?96:146;D.innerHeight<940+n+(e-t)+30?D.innerHeight<200?this.setState({height:100}):this.setState({height:D.innerHeight-n-30-e+t}):this.setState({height:940})}},{key:"_handleAnimationChange",value:function(){var e=this.props.builderAnimation;y.b.preferencesChange({builder_animation:!e})}},{key:"_handleDisabledModules",value:function(){var e=this.props.builderHideDisabledModules;y.b.preferencesChange({hide_disabled_modules:!e})}},{key:"_handleAllModalSettings",value:function(){var e=this.props.builderDisplayModalSettings;y.b.preferencesChange({builder_display_modal_settings:!e})}},{key:"_handleDummyContent",value:function(){var e=this.props.builderEnableDummyContent;y.b.preferencesChange({builder_enable_dummy_content:!e})}},{key:"_handleEventModeChange",value:function(e,t){y.b.preferencesChange({event_mode:W(t)})}},{key:"_handleViewModeChange",value:function(e,t){var n=_()(t)?V():t;y.b.preferencesChange({view_mode:n})}},{key:"_handleHistoryChange",value:function(e,t){y.b.preferencesChange({history_intervals:U(t)})}},{key:"_handlePageCreationFlowChange",value:function(e,t){y.b.preferencesChange({page_creation_flow:z(t)})}},{key:"_handleModalChange",value:function(e,t){y.b.preferencesChange({modal_preference:$(t)})}},{key:"_handleReset",value:function(e,t,n){return e!==t&&a.a.createElement(S.a,{__onClick:n},a.a.createElement(M.a,{icon:"reset"}))}},{key:"_getViewModesList",value:function(){var e=v.default.condition("is_bfb"),t=x.view_mode_select;if(e){var n=t.wireframe;l()(t.wireframe),t=d()({wireframe:n},t)}return t}},{key:"render",value:function(){var e=this.props,t=e.builderAnimation,n=e.builderDisplayModalSettings,o=e.builderEnableDummyContent,i=e.builderEventMode,s=e.builderViewMode,l=e.builderHideDisabledModules,u=e.builderModalPreference,d=e.builderPageCreationFlow,c=e.historyIntervals,f=e.toolbarButtons,h=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["builderAnimation","builderDisplayModalSettings","builderEnableDummyContent","builderEventMode","builderViewMode","builderHideDisabledModules","builderModalPreference","builderPageCreationFlow","historyIntervals","toolbarButtons"]),m=this.state,_=m.height,b=m.width,g=N.a.getAppPreferences();return a.a.createElement(O.a,L({className:"et-fb-modal--app",forceUpdate:!0,headerButtons:[a.a.createElement(S.a,{buttonName:k.a.MODAL_APP_BUTTON_CLOSE,inverse:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},a.a.createElement(M.a,{icon:"exit",color:"#FFFFFF"}))],label:x.title,measurement:{height:_,width:b},style:{top:this._getPosition("top"),bottom:this._getPosition("bottom"),left:this._getPosition("left"),right:this._getPosition("right")}},h),a.a.createElement(T.c,{selected:!0},a.a.createElement("div",{className:"et-fb-form"},a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.toolbar),a.a.createElement(w.a,null,a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"wireframe"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,stopPropagation:!0,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("wireframe",f),icon:"wireframe"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"zoom"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,stopPropagation:!0,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("zoom",f),icon:"zoom-in"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"desktop"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("desktop",f),icon:"desktop"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"tablet"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("tablet",f),icon:"tablet"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"phone"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("phone",f),icon:"phone"}))),a.a.createElement(w.a,{style:v.default.condition("is_rtl")?{marginRight:3}:{marginLeft:3}},a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"hover"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("hover",f),icon:"hover"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"click"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("click",f),icon:"click"})),a.a.createElement(S.a,{additionalAttrs:{toolbarButton:"grid"},buttonName:k.a.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},a.a.createElement(M.a,{color:H("grid",f),icon:"grid"})))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.view_mode),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(F.a,{name:"builder_view_mode",value:s,options:this._getViewModesList(),_onChange:this._handleViewModeChange}),s!==V()&&""!==s&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleViewModeChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.interaction_mode),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(F.a,{name:"view_mode",value:W(i,!0),options:x.interaction_mode_select,_onChange:this._handleEventModeChange}),!r()(["","hover","default"],i)&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleEventModeChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.history),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(F.a,{name:"history",value:U(c,!0),options:x.history_intervals_select,_onChange:this._handleHistoryChange}),1!==c&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleHistoryChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.modal_position),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(F.a,{name:"modal_position",value:$(u,!0),options:this._getModalOptions(),_onChange:this._handleModalChange}),"default"!==u&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleModalChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.page_creation_flow),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(F.a,{name:"page_creation",value:z(d,!0),options:x.page_creation_flow_select,_onChange:this._handlePageCreationFlowChange}),"default"!==d&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handlePageCreationFlowChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.animation),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(A.a,{onClick:this._handleAnimationChange,options:{on:x.builder_animation_toggle.on,off:x.builder_animation_toggle.off},value:t?"on":"off"}),t!==p()(g,"builder_animation.default")&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleAnimationChange,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.disabled_modules),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(A.a,{onClick:this._handleDisabledModules,options:{on:x.hide_disabled_module_toggle.on,off:x.hide_disabled_module_toggle.off},value:l?"off":"on"}),l!==p()(g,"hide_disabled_modules.default")&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleDisabledModules,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.group_settings),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(A.a,{onClick:this._handleAllModalSettings,options:{on:x.display_modal_settings.on,off:x.display_modal_settings.off},value:n?"off":"on"}),n!==p()(g,"builder_display_modal_settings.default")&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleAllModalSettings,small:!0},a.a.createElement(M.a,{icon:"reset"}))))),a.a.createElement(C.b,null,a.a.createElement(C.c,null,x.labels.dummy_content),a.a.createElement("div",{className:"et-fb-settings-option"},a.a.createElement("div",{className:"et-fb-settings-option-container"},a.a.createElement(A.a,{onClick:this._handleDummyContent,options:{on:x.enable_dummy_content.on,off:x.enable_dummy_content.off},value:o?"on":"off"}),o!==p()(g,"builder_enable_dummy_content.default")&&a.a.createElement(S.a,{className:"et-fb-button--reset",__onClick:this._handleDummyContent,small:!0},a.a.createElement(M.a,{icon:"reset"}))))))))}}]),t}();K.propTypes={},K.defaultProps={toolbarButtons:{}},t.default=K},573:function(e,t,n){"use strict";n.r(t),function(e){var o=n(1),a=n.n(o),i=n(4),r=n.n(i),s=n(14),l=n.n(s),u=n(16),d=n.n(u),c=n(13),p=n(105),f=n.n(p),h=n(27),m=n.n(h),_=n(5),b=n.n(_),g=n(73),v=n.n(g),y=n(10),k=n.n(y),E=n(7),S=n.n(E),w=n(36),C=n.n(w),T=n(72),M=n.n(T),O=n(47),F=n.n(O),A=(n(55),n(9)),N=n.n(A),L=n(12),P=n.n(L),I=n(34),D=n.n(I),x=n(2),B=n.n(x),j=(n(202),n(1235)),G=n(1228),R=n(8),H=n(11),W=n(21),V=n(1227),U=n(1226),$=n(3),z=n(1225),K=n(0),q=(n(1223),n(731)),J=n(31),Q=n(321),X=n(122),Y=n(102),Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=ETBuilderBackend.i18n.tooltips,oe=ETBuilderBackend.i18n,ae=K.default.isBFB(),ie={active:r.a.bool,actionType:r.a.string,active_tab:r.a.string,tooltipTitle:r.a.string,specialtyModal:r.a.bool,preloadingItems:r.a.bool,_closeFunction:r.a.func,modalPosition:r.a.object,classNames:r.a.object,children:r.a.node,modalHeight:r.a.number,modalWidth:r.a.oneOfType([r.a.number,r.a.string]),ignorePosition:r.a.bool,forceFixedPosition:r.a.bool},re={active:!1,_closeFunction:D.a,classNames:{},ignorePosition:!1,forceFixedPosition:!1,enableContextMenu:!1},se=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.debouncedSetInputFocus=F()(i.setInputFocus,1e3),i.tabClassName=function(e){var t={"et-fb-settings-options-tab":!0,"et-fb-all-modules":!0,"et-fb-modules-list":!0,"et-fb-settings-options":!0};return t["et-fb-settings-options-tab-"+e]=!0,e===i.state.active_tab&&(t["et-fb-settings-options-tab--active"]=!0),l()(t)},i._onLibraryDoneLoading=function(){$.a.setProductTourElementReady("selectLayoutPack"),i.setState({library_loading:!1})},i._onClickLibraryBackButton=function(){i.setState({libraryBackToLayouts:!0})},i._onLibraryPageChanged=function(t){var n={libraryBackToLayouts:!1};(i.state.hasBackButton&&!t||t&&!i.state.hasBackButton)&&(n.hasBackButton=t),i.setState(n),t&&$.a.isProductTourActive()&&($.a.setProductTourElementReady("loadLayoutItem"),e("body").trigger("et_fb_product_tour_element_clicked"))},i._renderTabs=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=m()(t,function(e){return a.a.createElement("li",{key:e.name,className:i.tabNavClassName(e.className)},a.a.createElement("a",{href:"#",className:e.className,onClick:i.handle_tab_click},B()(oe,e.name,e.name)))});return a.a.createElement("ul",{className:"et-fb-settings-tabs-nav",ref:"settingsTabsNav"},o)},i.state={active_tab:t.activeTab||"modules_all",library_category:"all",filterByTitle:"",helpModalMoved:!1,library_modules_updated:$.a.getLastRetrievedLayoutType(),selectedItemIndex:0,selectedItemUpdated:!1,currentTourElement:"",move:!1,library_loading:!0,hasBackButton:!1,libraryBackToLayouts:!1,applyTransitionAnimation:!1},i.maxItemIndex={modules_all:0,modules_library:0},i.isLibrary=i.isLibrary.bind(i),i._onClose=i._onClose.bind(i),i._preventRightClick=i._preventRightClick.bind(i),i.getModuleType=i.getModuleType.bind(i),i.tabNavClassName=i.tabNavClassName.bind(i),i.setMaxItemIndex=i.setMaxItemIndex.bind(i),i._onModuleItemMouseLeave=i._onModuleItemMouseLeave.bind(i),i._onModuleItemMouseEnter=i._onModuleItemMouseEnter.bind(i),i._onKeyDownEvent=i._onKeyDownEvent.bind(i),i.centerizeSelectedItem=i.centerizeSelectedItem.bind(i),i.isAddingIntoGlobal=i.isAddingIntoGlobal.bind(i),i.insertLayout=i.insertLayout.bind(i),i.getSavedModulesList=i.getSavedModulesList.bind(i),i.handle_tab_click=i.handle_tab_click.bind(i),i.generateAddModuleContent=i.generateAddModuleContent.bind(i),i._onInput=i._onInput.bind(i),i.setModalPosition=i.setModalPosition.bind(i),i._onLibraryLoaded=i._onLibraryLoaded.bind(i),i.getSavedModulesArray=i.getSavedModulesArray.bind(i),i.loadLibraryModules=i.loadLibraryModules.bind(i),i.isPreloadingItems=i.isPreloadingItems.bind(i),i._handleStartMovement=i._handleStartMovement.bind(i),i._handleEndMovement=i._handleEndMovement.bind(i),i._handleMove=i._handleMove.bind(i),i._onProductTourElementChange=i._onProductTourElementChange.bind(i),i.modal=Object(o.createRef)(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),ee(n,[{key:"isLibrary",value:function(){return"load_layout"===this.props.actionType}},{key:"componentDidMount",value:function(){var e=this,t=N()(["phone","tablet"],B()(this,"props.previewMode")),n=this.isLibrary();this.windowScrolled=!1,this.shortThrottleReset=M()(function(){return e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:f()(),modalPositionData:e.setModalPosition()})},100,{leading:!1}),this.mediumThrottleReset=M()(function(){return e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:f()(),modalPositionData:e.setModalPosition(),applyTransitionAnimation:"fast"})},100,{leading:!1}),this.longThrottleReset=M()(function(){e.windowScrolled=!0,e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:f()(),modalPositionData:e.setModalPosition()})},1e3,{leading:!1}),$.a.addModuleLibraryLoadedListener(this._onLibraryLoaded),$.a.addProductTourChangeElementListener(this._onProductTourElementChange),$.a.getDroploaderPayloadPortability()&&this.setState({active_tab:"modules_library"});var o=K.default.condition("is_bfb")||t?K.default.topWindow():K.default.appWindow();this.props.movable&&(o.addEventListener("mousemove",this._handleStartMovement,{capture:!0}),o.addEventListener("mouseup",this._handleEndMovement,{capture:!0})),"custom_content"!==this.props.actionType&&(o.addEventListener("scroll",this.mediumThrottleReset),n?o.addEventListener("resize",this.shortThrottleReset):o.addEventListener("resize",this.longThrottleReset),this.setInputFocus()),this.timer=setTimeout(function(){var t=e.getModalContentHeight();e.setState({modalPositionData:e.setModalPosition(t),autoHeight:t})},80)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.shortThrottleReset.cancel(),this.mediumThrottleReset.cancel(),this.longThrottleReset.cancel();var e=this.isLibrary(),t=N()(["phone","tablet"],B()(this,"props.previewMode"));$.a.removeModuleLibraryLoadedListener(this._onLibraryLoaded),$.a.removeProductTourChangeElementListener(this._onProductTourElementChange);var n=K.default.condition("is_bfb")||t?K.default.topWindow():K.default.appWindow();"custom_content"!==this.props.actionType&&(n.removeEventListener("scroll",this.mediumThrottleReset),e?n.removeEventListener("resize",this.shortThrottleReset):n.removeEventListener("resize",this.longThrottleReset)),this.props.movable&&(n.removeEventListener("mousemove",this._handleStartMovement),n.removeEventListener("mouseup",this._handleEndMovement))}},{key:"componentWillUpdate",value:function(e){e.active&&this.props.currentTourElement===e.currentTourElement||this.setState({modalPositionData:{}});var t=this.props.modalMoving!==e.modalMoving;"load_layout"===this.props.actionType&&!this.state.helpModalMoved&&this.props.helpModalActive&&t&&this.setState({helpModalMoved:!0,resetModalStyles:f()(),modalPositionData:this.setModalPosition()}),this.props.helpModalActive===e.helpModalActive||e.helpModalActive||this.setState({helpModalMoved:!1})}},{key:"componentDidUpdate",value:function(t,n){"add_module"!==this.props.actionType||$.a.isProductTourActive()||this.loadLibraryModules();e(d.a.findDOMNode(this));if(t.active!==this.props.active||n.active_tab!==this.state.active_tab||t.actionType!==this.props.actionType||t.specialtyModal!==this.props.specialtyModal||!C()(t.modalPosition,this.props.modalPosition)||t.preloadingItems!==this.props.preloadingItems){this.props.active?t.actionType!==this.props.actionType&&this.setState({active_tab:"modules_all"}):(this.setState({resetModalStyles:!1,active_tab:"modules_all",filterByTitle:"",library_category:"all",importBackUp:"off",importFile:"",importError:"",applyTransitionAnimation:"no"}),this.windowScrolled=!1),this.debouncedSetInputFocus();var o=e(d.a.findDOMNode(this.refs.settingsTabsNav)),a=o.children().size(),i=100/a,r=$.a.getModuleAddAfter();2===a&&o.children().css({maxWidth:i+"%"});var s=this.getModalContentHeight(),l=this.setModalPosition(s),u=B()(l,"style.position"),c=B()(n.modalPositionData,"style.position");this.setState({selectedItemIndex:K.default.hasValue(this.state.filterByTitle)?1:0,modalPositionData:l,autoHeight:s,applyTransitionAnimation:"add_module"===this.props.actionType&&B()(r,"autoAddModule")||u!==c?"no":"normal"})}this.state.selectedItemUpdated&&(this.centerizeSelectedItem(),this.setState({selectedItemUpdated:!1}));var p=this.props.helpModalActive!==t.helpModalActive;"load_layout"===this.props.actionType&&p&&this.setState({resetModalStyles:f()(),modalPositionData:this.setModalPosition()});var h=this.props.modalMoving!==t.modalMoving;"load_layout"===this.props.actionType&&this.props.helpModalActive&&h&&this.setState({resetModalStyles:f()(),modalPositionData:this.setModalPosition()})}},{key:"shouldComponentUpdate",value:function(e,t){return!C()(this.state,t)||!C()(this.props,e)}},{key:"getModalContentHeight",value:function(){var t=e(d.a.findDOMNode(this)),n="modules_library"===this.state.active_tab&&"add_module"===this.props.actionType&&""===t.find(".et-fb-settings-options .et-fb-settings-options-tab-modules_library ul").text()?300:0,o=t.find(".et-fb-save-library-button").length>0?40:0,a=t.find(".et-fb-settings-tabs-nav").length>0?100:60,i=0;return t.find(".et-fb-settings-options").length>0&&(!b()(this.props.modalWidth)&&this.props.modalWidth&&t.find(".et-fb-settings-options").width(this.props.modalWidth),i=0===n?t.find(".et-fb-settings-options").innerHeight():n,!b()(this.props.modalWidth)&&this.props.modalWidth&&t.find(".et-fb-settings-options").width("auto")),ae||"portability"!==this.props.actionType||(i+=25),i+o+a}},{key:"setInputFocus",value:function(){K.default.$appWindow(this.modal.current).focus().find('input[type="text"]:visible:first').focus()}},{key:"_handleStartMovement",value:function(e){if(!this.state.move)return!1;var t=this.state.modalPositionData,n="absolute"===t.style.position?e.pageX:e.pageX-K.default.$topWindow().scrollLeft(),o="absolute"===t.style.position?e.pageY:e.pageY-K.default.$topWindow().scrollTop();return n-=this.state.reactive.x,o-=this.state.reactive.y,t.style.top=o,t.style.left=n,this.setState({resetModalStyles:f()(),modalPositionData:t})}},{key:"_handleMove",value:function(t){if(this.props.movable){var n="absolute"===this.state.modalPositionData.style.position?e(Object(u.findDOMNode)(this)).position():e(Object(u.findDOMNode)(this)).offset();this.setState({reactive:{x:t.pageX-n.left,y:t.pageY-n.top},move:!this.state.move})}}},{key:"_handleEndMovement",value:function(t){if(this.state.move){var n=e("#et-fb-app").offset(),o=K.default.$topWindow().width(),a=K.default.$topWindow().height(),i=this.state.modalPositionData;if("absolute"!==i.style.position&&(i.style.top+400>a||i.style.top<0)||"absolute"===i.style.position&&i.style.top<0&&Math.abs(i.style.top)>n.top){var r=50;"absolute"===i.style.position&&i.style.top<0&&Math.abs(i.style.top)>n.top&&(r+=i.style.top+(Math.abs(i.style.top)-n.top)),i.style.top=i.style.top<0?r:a-400}if("absolute"!==i.style.position&&i.style.left<0||i.style.left+400>o||"absolute"===i.style.position&&i.style.left<0&&Math.abs(i.style.left)>n.left){var s=50;"absolute"===i.style.position&&i.style.left<0&&Math.abs(i.style.left)>n.left&&(s+=i.style.left+(Math.abs(i.style.left)-n.left)),i.style.left=i.style.left<0?s:o-400}return this.setState({move:!1,modalPositionData:i})}}},{key:"_onProductTourElementChange",value:function(){this.setState({currentTourElement:$.a.getActiveProductTourElement()})}},{key:"_onModuleItemMouseEnter",value:function(e){this.setState({selectedItemIndex:e})}},{key:"_onModuleItemMouseLeave",value:function(){this.setState({selectedItemIndex:0})}},{key:"setMaxItemIndex",value:function(e,t){this.maxItemIndex[t]=e}},{key:"tabNavClassName",value:function(e){var t={};return t["et-fb-settings-options_tab_"+e]=!0,t["et-fb-settings-tabs-nav-item"]=!0,e===this.state.active_tab&&(t["et-fb-settings-tabs-nav-item--active"]=!0),l()(t)}},{key:"centerizeSelectedItem",value:function(){var t=e(d.a.findDOMNode(this)),n=t.find(".et-fb-settings-options-wrap"),o=t.find(".et-fb-settings-options-tab:visible .et-fb-selected-item");if(o.length){var a=o.offset(),i=o.parent().offset();n.stop().animate({scrollTop:a.top-i.top})}}},{key:"_onKeyDownEvent",value:function(t){if(!$.a.isProductTourActive()){var n=this,o=e(d.a.findDOMNode(this)),a=this.state.selectedItemIndex,i=t.keyCode;if(13===i&&(o.find(".et-fb-selected-item:visible").trigger("click"),"change_structure"===this.props.actionType&&H.b.cancelTooltip()),N()([38,39,40,37],i)){N()([38,40],i)&&t.preventDefault();var r=void 0,s=void 0;if("change_structure"===this.props.actionType?(o.find(".et-fb-module-settings"),s=(r=o.find(".et-fb-columns-layout")).find(".et-fb-selected-item")):(o.find(".et-fb-settings-options-wrap"),s=(r=o.find(".et-fb-settings-options-tab:visible")).find(".et-fb-selected-item")),s.length){var l=r.width(),u=s.width(),c=Math.floor(l/u),p=0;switch(i){case 38:p=a-c;break;case 39:p=a+1;break;case 40:p=a+c;break;case 37:p=a-1}p>0&&p<=this.maxItemIndex[this.state.active_tab]&&this.setState({selectedItemIndex:p,selectedItemUpdated:!0})}else this.setState({selectedItemIndex:1,selectedItemUpdated:!0})}if(27===i&&H.b.cancelTooltip(),9===i&&!o.closest(".et-fb-modal-settings--library")&&!e(t.target).is("input:focus, button:focus")){var f="modules_all"===this.state.active_tab?"modules_library":"modules_all",h=o.find(".et-fb-columns-layout");if(this.setState({active_tab:f}),h.length&&"change_structure"===this.props.actionType){var m=h.find(".et-fb-column-layout--selected"),_=m;(_=t.shiftKey?m.prev().length?m.prev():h.find("li").last():m.next().length?m.next():h.find("li").first()).trigger("click"),setTimeout(function(){n.setState({selectedItemIndex:_.index()+1})},0)}return t.preventDefault(),!1}}}},{key:"getModuleType",value:function(){if(this.isLibrary())return"layout";var e=$.a.getModuleAddAfter(),t=e.type;if(e.is_parent)switch(t){case"et_pb_section":t="yes"===e.fullwidth?"et_pb_module":"et_pb_row";break;case"et_pb_column":t=e.is_inner_row?"et_pb_row_inner":"et_pb_module"}return N()(["et_pb_section","et_pb_row","et_pb_row_inner"],t)||(t="et_pb_module"),t}},{key:"isAddingIntoGlobal",value:function(){return $.a.getModuleAddAfter().is_global}},{key:"_preventRightClick",value:function(t){this.props.enableContextMenu||e(t.target).is("input:focus")||t.preventDefault()}},{key:"getLibraryCategoriesList",value:function(){var e=ETBuilderBackend.saveModuleLibraryCategories,t={};return t.all=ETBuilderBackend.i18n.saveModuleLibraryAttrs.allCategoriesText,S()(e)||k()(e,function(e){t[e.slug]=e.name}),t}},{key:"generateAddModuleContent",value:function(){var e=v()(ETBuilderBackend.modules,{is_parent:"on"}),t="",n=this,o=$.a.getModuleAddAfter(),i=o.type,r=this.props.specialtyModal,s={allModulesList:{},mainTabTitle:"",modalTitle:"",moduleType:"",settingsModalClass:[]};if(this.maxItemIndex.modules_all=0,s.mainTabTitle=ne.newModule,s.modalTitle=ne.insertModule,!0===r){var l=0;s.modalTitle=ne.insertColumn,this.maxItemIndex.modules_all=0,t=m()([["1_2,1_2","1,0"],["1_2,1_2","0,1"],["1_4,3_4","0,1"],["3_4,1_4","1,0"],["1_4,1_2,1_4","0,1,0"],["1_2,1_4,1_4","1,0,0"],["1_4,1_4,1_2","0,0,1"],["1_3,2_3","0,1"],["2_3,1_3","1,0"]],function(e,t){var o=e[0].split(","),i={layoutType:e[1],layoutFormat:e[0],columns:o,specialtyColumns:3};return l++,n.maxItemIndex.modules_all++,a.a.createElement(V.a,{label:e[0],title:e[0],key:l,specialtyLayout:i,itemIndex:n.maxItemIndex.modules_all,selectedItemIndex:n.state.selectedItemIndex,onMouseEnter:n._onModuleItemMouseEnter})}),s.allModulesList=a.a.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},t)}else if("et_pb_section"!==i&&"et_pb_row"!==i&&"et_pb_row_inner"!==i&&!o.is_inner_row||"et_pb_section"===i&&"yes"===o.fullwidth&&o.is_parent)t=m()(e,function(e){if(!N()(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"],e.label)){var t=void 0!==e.fullwidth_only&&"on"===e.fullwidth_only,o=$.a.getModuleAddAfter(),i=$.a.getProductTourModuleName(),r=o.fullwidth,s={};if(!("yes"===r&&!t||"no"===r&&t||""!==n.state.filterByTitle&&-1===e.title.toLowerCase().indexOf(n.state.filterByTitle.toLowerCase())))return"selectModule"===n.state.currentTourElement&&i===e.label&&(s["et-fb-product-tour-element"]=!0),n.maxItemIndex.modules_all++,a.a.createElement(V.a,{label:e.label,title:e.title,fbSupport:e.vb_support,key:e.label,itemIndex:n.maxItemIndex.modules_all,selectedItemIndex:n.state.selectedItemIndex,icon:B()(e,"icon",""),iconSvg:B()(e,"icon_svg",""),onMouseEnter:n._onModuleItemMouseEnter,classnames:s})}}),s.allModulesList=a.a.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},t),s.moduleType="module";else if("et_pb_section"!==i||o.is_parent){if(("et_pb_row"===i||"et_pb_row_inner"===i)&&!o.is_parent||o.is_inner_row||"et_pb_section"===i&&o.is_parent){$.a.getLastAddedModuleData();var u={},d="regular",c="et_pb_column"===i?"et_pb_row_inner":i;s.settingsModalClass.et_fb_add_row_modal=!0,u.props={},"et_pb_row_inner"===c&&(d="specialty"),"on"===o.fullwidth&&(d="fullwidth"),u.props.section_parent=d,u.props.specialty_layout=o.specialty_layout,s.modalTitle=ne.insertRow,s.mainTabTitle=ne.newRow,s.allModulesList=a.a.createElement(z.a,Z({active:"true",_onClick:this.addRow,row:u,selectedItemIndex:n.state.selectedItemIndex,setMaxItemIndex:n.setMaxItemIndex,currentTourElement:n.state.currentTourElement},this.props))}}else{var p={et_fb_regular:ne.regular,et_fb_fullwidth:ne.fullwidth,et_fb_specialty:ne.specialty};this.maxItemIndex.modules_all=0,s.modalTitle=ne.insertSection,s.mainTabTitle=ne.newSection,s.settingsModalClass.et_fb_add_section_modal=!0,t=m()(["et_fb_regular","et_fb_specialty","et_fb_fullwidth"],function(e){var t={};return n.maxItemIndex.modules_all++,"selectSectionType"===n.state.currentTourElement&&"et_fb_regular"===e&&(t["et-fb-product-tour-element"]=!0),a.a.createElement(V.a,{label:e,title:p[e],key:e,itemIndex:n.maxItemIndex.modules_all,selectedItemIndex:n.state.selectedItemIndex,onMouseEnter:n._onModuleItemMouseEnter,classnames:t})}),s.allModulesList=a.a.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},t)}return s}},{key:"handle_tab_click",value:function(e){e.preventDefault(),this.isLibrary()&&this.state.library_loading||this.setState({active_tab:e.target.className,libraryBackToLayouts:!0})}},{key:"getSavedModulesList",value:function(){var e=this.getModuleType(),t=this.getSavedModulesArray(),n="";if(this.maxItemIndex.modules_library=0,!S()(t))if("string"==typeof t)n=t;else{var o=this,i="",r=[];if("et_pb_row_inner"===e){var s=$.a.getModuleAddAfter();i=s.saved_specialty_column_type,r=3===("3_4"===i?3:2)?["4_4","1_2,1_2","1_3,1_3,1_3"]:["4_4","1_2,1_2"]}n=m()(t,function(t,n){if((""===i||N()(r,t.row_layout))&&("all"===o.state.library_category||N()(t.categories,o.state.library_category))){if(!B()(t,"shortcode.0.type"))return!1;var s="global"===t.is_global?t.ID:"",l={};return l.et_fb_global="global"===t.is_global,""!==o.state.filterByTitle&&-1===t.title.toLowerCase().indexOf(o.state.filterByTitle.toLowerCase())?!1:(o.maxItemIndex.modules_library++,a.a.createElement(V.a,{label:""!==t.module_type?t.module_type:e,title:t.title,key:n,savedShortcode:t.shortcode,globalID:s,onClickAction:"",itemIndex:o.maxItemIndex.modules_library,selectedItemIndex:o.state.selectedItemIndex,icon:B()(t,"icon",""),iconSvg:B()(t,"icon_svg",""),onMouseEnter:o._onModuleItemMouseEnter,classnames:l,isAddingIntoGlobal:o.isAddingIntoGlobal()}))}})}return n}},{key:"insertLayout",value:function(e){var t="on"===this.state.replace_layout;H.b.insertSavedModule(e,!0,t),H.b.cancelTooltip()}},{key:"loadLibraryModules",value:function(){var e=this.getModuleType(),t="et_pb_row_inner"===e?"et_pb_row":e,n="yes"===$.a.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";!1===$.a.getLibraryModules(t,n)&&H.b.getLibraryModules(t,n)}},{key:"getSavedModulesArray",value:function(){var e=this.getModuleType();"et_pb_row_inner"===e&&(e="et_pb_row");var t="yes"===$.a.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";return $.a.getLibraryModules(e,t)}},{key:"_onLibraryLoaded",value:function(){var e=this.getModuleType();"et_pb_row_inner"===e&&(e="et_pb_row");var t="yes"===$.a.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";this.setState({library_modules_updated:t+e,currentTourElement:$.a.getActiveProductTourElement()})}},{key:"setModalPosition",value:function(t){if(this.props.ignorePosition)return{};var n=$.a.getModuleAddAfter(),o=n.type,a=this.props.specialtyModal,i=this.props.modalPosition,r=!b()(i)&&i,s=e(i.element).closest(".et-fb-skeleton"),l=ae?K.default.$topWindow("#et_pb_layout"):"",u=ae?l.offset().top:0,d=ae?l.offset().left:0,c=B()(this,"props.previewMode"),p=!b()(i)&&e(B()(i,"element","")),f=K.default.$topWindow("#wpadminbar").length>0?K.default.$topWindow("#wpadminbar").innerHeight():0,h={},m=!1,_=!1;r&&!1!==i.element&&"rightClickMenu"!==i.element&&(0===(m=p&&p.length>0?p:K.default.$topWindow(".et-fb-page-settings-bar .et-fb-button--toggle-portability")).length&&(m=K.default.$topWindow(".et-fb-page-settings-bar .et-fb-button--toggle-add")),_=m.hasClass("et-fb-page-settings--tools"),(m.hasClass("et-fb-button-group")||_)&&(m=K.default.$topWindow(m.context)));var g=m&&m.closest(".et-fb-page-settings-bar").length>0,v=m?m.innerHeight()/2:0,y=m?m.innerWidth()/2:0,k=K.default.$topWindow().width(),E=K.default.$topWindow().height(),S=m?m.offset():i,w=ae||N()(["zoom","tablet","phone"],c)?K.default.$topWindow().scrollTop():K.default.$appWindow().scrollTop();if(ae&&(w-=u),h.class={},k<=502&&this.isLibrary())return h.style={top:0,left:0,right:!1,width:k,height:E,position:"fixed"},h;0===S.top&&0===S.left&&(S.top=i.top,S.left=i.left);var C=k<493?k-20:400,T=t||this.state.autoHeight,M=ae?-1*K.default.$topWindow("#adminmenuwrap").innerWidth():0,O=b()(this.props.modalHeight)||""===this.props.modalHeight?274:this.props.modalHeight,F=O,A=b()(this.props.modalWidth)||""===this.props.modalWidth?C:this.props.modalWidth,L="zoom"!==c||g||"rightClickMenu"===i.element?S.left:S.left/2,P=!1,I=0;if((L=L-A/2+y)>0){var D=S.left+A/2+y;L=D>k?L-(D-k)-10:L}else P=Math.abs(M)<=Math.abs(L),I=Math.abs(L)-Math.abs(M),L=P?M:L;"et_pb_section"!==o||n.is_parent||a?"et_pb_row_inner"===o||n.is_inner_row?O=188:"modules_library"!==this.state.active_tab&&"portability"!==this.props.actionType&&("et_pb_row"===o||"et_pb_section"===o&&n.is_parent&&!a&&"yes"!==n.fullwidth)?O=284:"et_pb_section"===o&&a?O=320:"add_module"===this.props.actionType&&(O=385):O=198,_&&(O=290),"change_structure"===this.props.actionType&&p&&p.length>0&&p.closest(".et_pb_row_inner").length>0&&(O=148),"clear_layout"===this.props.actionType&&(O=200),F=b()(T)||""===T?O:Math.max(O,Math.min(936,T));var x="rightClickMenu"!==i.element||ae||N()(["zoom","tablet","phone"],c)?w:0,j=x+E,G=x+E/2,R=(!ae||!g)&&S.top>=G,H=R?S.top-x:j-S.top,W=ae?5:f+30,V=R?W:ae?117:100;S.top;if(ae&&g&&N()(["save_to_library","portability"],this.props.actionType)&&(H=E+w),F+V>H&&(F=Math.max(O,H-V)),g){var U=m.closest(".et-fb-page-settings-bar"),z=U.hasClass("et-fb-page-settings-bar--vertical"),q=U.hasClass("et-fb-page-settings-bar--corner"),J=q&&U.hasClass("et-fb-page-settings-bar--right-corner"),Q=q&&U.hasClass("et-fb-page-settings-bar--left-corner"),X=U.hasClass("et-fb-page-settings-bar--right"),Y=q&&U.hasClass("et-fb-page-settings-bar--top-corner"),Z=U.position().top,ee=ae?U.offset().top+parseInt(U.height())+13:122,te=95,ne=Q?te:L<(z?80:10)?z?80:10:z?L-70:L,oe=this.isLibrary();if(X&&(ne-=K.default.maybeGetScrollbarWidth()),("modules_library"===this.state.active_tab||N()(["save_to_library","portability","load_layout"],this.props.actionType))&&k<493&&(A=k<493?k-100-30:400),oe){var ie=z||ae?30:parseInt(U.height()),re=ae?0:60-f,se=ae||!z&&!q?50:te;F=E-f-ie-re,A=Math.min(k-2*se,1179),ae&&(te=0),z||q||ae?(ee=Y?ee:f+re,(L=(k-A)/2)<15&&(L=15)):L=(k-A-K.default.getScrollbarWidth())/2}if((z||q||this.props.helpModalActive&&!this.state.helpModalMoved||ae)&&(h.class["et-fb-tooltip--no-arrow"]=!0),32===Z||ae)h.class={"et-fb-modal-settings--inversed":!ae||ae&&!oe,"et-fb-tooltip--no-arrow":z||q||this.props.helpModalActive&&!this.state.helpModalMoved||ae&&oe,"et-fb-tooltip--vertical-center":z},oe&&!ae&&(F-=25);else{var le=ae?0:W;if((ee=Z-F)<le){var ue=le-ee;ee+=ue,F=Math.max(O,F-ue)}ae||"save_to_library"!==this.props.actionType&&"clear_layout"!==this.props.actionType&&("portability"!==this.props.actionType||this.props.preloadingItems)||(h.class["et-fb-modal-settings--blue-bottom"]=!0)}"load_layout"===this.props.actionType&&this.props.helpModalActive&&"library"===this.props.helpModalTrigger&&!this.state.helpModalMoved&&(K.default.topWindow().innerWidth<1639&&K.default.topWindow().innerWidth>960?A-=this.props.helpModal.width:window.innerWidth>960&&(L-=this.props.helpModal.width/2));var de=oe?L:!J&&ne;return h.style={top:ee,left:de,right:!!J&&te,width:A,height:F,position:ae&&!oe?"absolute":"fixed"},h}var ce=(ae?K.default.$topWindow("#et-bfb-app-frame"):K.default.$topWindow("#et-fb-app-frame")).offset(),pe=ce.top;if(s.length>0){var fe="save_to_library"===this.props.actionType&&s.hasClass("et-fb-skeleton--row")?38:10;s.offset().left+fe}pe=ae||N()(["zoom","tablet","phone"],c)||"rightClickMenu"===i.element||this.props.renderInsideApp?pe:pe-w;var he="zoom"===c&&"rightClickMenu"!==i.element?S.top/2:S.top;he=he-F+pe,this.props.forceFixedPosition||(L+="rightClickMenu"===i.element?d:ce.left),L+A>k&&(L=k-A);var me=0>L&&(this.props.forceFixedPosition||Math.abs(L)>ce.left)?10:L;if(me=30>me?30:me,h.style={top:he,left:me,width:A,height:F,position:this.props.forceFixedPosition?"fixed":"absolute"},this.props.forceFixedPosition&&"custom_content"===this.props.actionType)return(h.style.top<0||h.style.top+F>E)&&(h.style.top=h.style.top<0?50:E-F-100),(h.style.left<0||h.style.left+A>k)&&(h.style.left=h.style.left<0?50:k-A-100),h;if("save_to_library"===this.props.actionType&&(h.class["et-fb-modal-settings--blue-bottom"]=!0),!R){var _e=F+v+15;h.style.top=h.style.top+_e,_e,_e,!ae&&h.style.height+V+v+15>H&&(h.style.height=h.style.height-v-15),h.class={"et-fb-modal-settings--inversed":!0},"save_to_library"===this.props.actionType&&(h.class["et-fb-modal-settings--blue-bottom"]=!1)}var be=R&&ae?F:F+V;if(!this.windowScrolled&&F===O&&be>H){var ge=be-H,ve="desktop"!==c||ae?K.default.$topWindow().scrollTop():K.default.$appWindow().scrollTop(),ye=R?ve-ge:ve+ge;("desktop"!==c||ae?K.default.$topWindow("html, body"):K.default.$appWindow("html, body")).animate({scrollTop:ye},500,"swing")}if(P){var ke=K.default.$topWindow("head"),Ee="et-fb-modal-edge-style",Se=".et-db #et-boc .et-fb-modal-add-module-container.et-fb-modal-settings--left-side:after {left: "+(200-I-30)+"px;}";ke.remove("#"+Ee),ke.append('<style id="'+Ee+'">'+Se+"</style>"),h.class["et-fb-modal-settings--left-side"]=!0}return this.windowScrolled=!0,h}},{key:"addRow",value:function(e,t){t=b()(t)?"et_pb_row":t,H.b.insertNewModule(t,e)}},{key:"_onClearLayout",value:function(e){e.preventDefault(),$.a.abIsMode("off")&&(H.b.performLayoutClearing(),H.b.cancelTooltip())}},{key:"_onClose",value:function(){D.a!==this.props._closeFunction?this.props._closeFunction():H.b.cancelTooltip()}},{key:"_onInput",value:function(e,t){var n=te({},e,t);"filterByTitle"===e&&K.default.hasValue(this.state.filterByTitle)&&(n.selectedItemIndex=1,n.selectedItemUpdated=!0),this.setState(n)}},{key:"isPreloadingItems",value:function(e){return!!this.props.preloadingItems&&$.a.isPreloadingItem(e)}},{key:"render",value:function(){var e,t=this;if(!this.props.active)return!1;var n=$.a.getAppPreference("builder_animation"),i=P()((te(e={"et-fb-settings":!0,"et-fb-tooltip-modal":!0},"et-fb-tooltip-modal--"+this.props.actionType,!0),te(e,"et-fb-modal-settings--container",!0),te(e,"et-fb-modal-settings--"+this.state.active_tab,!0),te(e,"et-fb-modal-add-module-container",!0),te(e,"et-fb-moving",this.state.move),te(e,"et-fb-movable-modal",this.props.movable),te(e,"et-fb-tooltip-modal-animated","normal"===this.state.applyTransitionAnimation),te(e,"et-fb-tooltip-modal-animated-fast","fast"===this.state.applyTransitionAnimation),e),this.props.classNames),r=!b()(this.state.modalPositionData),s=r&&!S()(this.state.modalPositionData)?this.state.modalPositionData:this.setModalPosition(),u=s.style,p="",f="";b()(s.class)||P()(i,s.class);var h="";switch(this.props.actionType){case"add_module":var m=this.generateAddModuleContent(),_=m.allModulesList,g=m.mainTabTitle,v=$.a.isProductTourActive()?$.a.getActiveProductTourElement():"",y={maxHeight:B()(u,"height",100)-100};"selectSectionType"===v&&(y.overflow="visible"),p=m.modalTitle,P()(i,m.settingsModalClass);var k="module"===m.moduleType?a.a.createElement("div",{className:"et-fb-modules-filters et-fb-module-single-filter"},a.a.createElement(Y.a,{type:"text",value:this.state.filterByTitle,name:"filterByTitle",_onChange:this._onInput,onKeyDown:this._onKeyDownEvent,additional_attrs:{placeholder:ne.search}})):"",E=$.a.isAllowedAction("add_library")&&$.a.isAllowedAction("divi_library")?a.a.createElement("li",{className:this.tabNavClassName("modules_library")},a.a.createElement("a",{href:"#",className:"modules_library",onClick:this.handle_tab_click},ne.addFromLibrary)):"",w=$.a.isAllowedAction("add_library")&&$.a.isAllowedAction("divi_library")?a.a.createElement("div",{className:this.tabClassName("modules_library")},a.a.createElement("div",{className:"et-fb-modules-filters"},a.a.createElement(Q.a,{options:this.getLibraryCategoriesList(),value:this.state.library_category,name:"library_category",_onChange:this._onInput}),a.a.createElement(Y.a,{type:"text",value:this.state.filterByTitle,name:"filterByTitle",_onChange:this._onInput,additional_attrs:{placeholder:ne.search}})),a.a.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},this.getSavedModulesList()),a.a.createElement(X.a,{isLoading:this.isPreloadingItems("module")},a.a.createElement(q.a,{videoListId:"et_pb_save_to_library",trigger:"tooltip"}))):"";h=a.a.createElement("div",{className:"et-fb-main-settings et-fb-main-settings--add_new_module"},a.a.createElement("ul",{className:"et-fb-settings-tabs-nav",ref:"settingsTabsNav"},a.a.createElement("li",{className:this.tabNavClassName("modules_all")},a.a.createElement("a",{href:"#",className:"modules_all",onClick:this.handle_tab_click},g)),E),a.a.createElement("div",{className:"et-fb-settings-options-wrap",style:y},a.a.createElement("div",{className:"et-fb-settings-options"},a.a.createElement("div",{className:this.tabClassName("modules_all")},k,_),w)));break;case"load_layout":var C="et-fb-modal-settings--library";if(i[C]=!0,this.state.hasBackButton){i[C+"__layout"]=!0;var T={position:Object(c.spring)(-12,{stiffness:100,damping:10}),opacity:Object(c.spring)(1,{stiffness:100,damping:10})};p=a.a.createElement(c.Motion,{defaultStyle:{position:-40,opacity:0},style:T},function(e){return a.a.createElement("div",null,a.a.createElement(J.a,{className:"et-fb-settings-button--back",buttonName:R.a.LIBRARY_MODAL_BACK_BUTTON,_onClick:t._onClickLibraryBackButton,primary:!0,style:{opacity:e.opacity,transform:"translateX( "+e.position+"% )"}},a.a.createElement(W.a,{size:"14",icon:"back",color:"#FFFFFF"})),ne.layoutDetails)})}else p=ne.loadLayout;h=a.a.createElement(j.a,{isLoading:this.state.library_loading,_renderTabs:this._renderTabs,doneLoading:this._onLibraryDoneLoading,pageChanged:this._onLibraryPageChanged,backToLayouts:this.state.libraryBackToLayouts,tabClassName:this.tabClassName,active_tab:this.state.active_tab,layoutFilters:this.props.layoutFilters,type:"layout",isProductTour:$.a.isProductTourActive(),productTourElement:this.state.currentTourElement,modalMoving:this.props.modalMoving,width:u.width,height:u.height});break;case"save_to_library":i.et_fb_save_module_modal=!0,p=ne.addToLibrary,h=a.a.createElement(U.a,{maxHeight:B()(u,"height",70)-70});break;case"change_structure":var M=$.a.getStructurallyChangedRow();p=ne.changeRow,h=a.a.createElement("div",{className:"et-fb-settings-options-wrap",style:{maxHeight:B()(u,"height",100)-60}},a.a.createElement("div",{className:"et-fb-settings-options"},a.a.createElement(z.a,{row:M,selectedItemIndex:this.state.selectedItemIndex,setMaxItemIndex:this.setMaxItemIndex})));break;case"clear_layout":p=ne.clearLayout,h=a.a.createElement("div",{className:"et_fb_save_module_modal et_fb_clear_layout"},a.a.createElement("div",{className:"et-fb-settings-options"},ne.clearLayoutText),a.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:this._onClearLayout},ne.yes));break;case"portability":p=ne.portability,h=a.a.createElement(G.a,{_renderTabs:this._renderTabs,preloadingItems:this.props.preloadingItems,tabClassName:this.tabClassName,active_tab:this.state.active_tab,maxHeight:B()(u,"height",140)-140});break;case"custom_content":p=this.props.tooltipTitle,f=b()(this.props.buttons)?"":this.props.buttons,h=a.a.createElement("div",{className:"et-fb-main-settings et-fb-settings-options"},this.props.children)}var O=r?1:0,F="custom_content"!==this.props.actionType?"et-fb-tooltip-helper-container":"et-fb-tooltip-helper-container-custom",A=B()(u,"position",""),N=a.a.createElement(o.Fragment,null,a.a.createElement(c.Motion,{key:A,defaultStyle:{size:.5},style:{size:n?Object(c.spring)(1,{stiffness:300,damping:20}):1}},function(e){return a.a.createElement("div",{key:"modal",id:"et-fb-settings-column",ref:t.modal,className:l()(i),onContextMenu:t._preventRightClick,onKeyDown:t._onKeyDownEvent,tabIndex:"0",style:Z({},u,{opacity:O,transform:"scale( "+e.size+" )"})},a.a.createElement("div",{className:F},a.a.createElement("div",{className:"et-fb-module-settings"},a.a.createElement("h3",{className:"et-fb-settings-heading",onMouseDown:t._handleMove},p,a.a.createElement(J.a,{className:"et-fb-settings-button--close",buttonName:R.a.MODAL_SETTINGS_BUTTON_CLOSE,_onClick:t._onClose,primary:!0},a.a.createElement(W.a,{size:"14",icon:"close",color:"#FFFFFF"}))),h,f)))}),this.isLibrary()&&K.default.isBFB()&&a.a.createElement("div",{className:"et-core-modal-overlay et-core-active et-core-modal-overlay--library"}));return this.props.renderInsideApp?N:d.a.createPortal(N,K.default.$topWindow("#et-boc #et-fb-app")[0])}}]),n}();se.propTypes=ie,se.defaultProps=re,t.default=se}.call(this,n(30))}}]);